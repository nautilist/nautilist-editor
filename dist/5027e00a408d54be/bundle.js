!function(){var e,t,n,r=e={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,c=[],l=!1,u=-1;function f(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=a(f);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var m={};(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}m.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,o="/"===a.charAt(0))}return(o?"/":"")+(r=t(n(r.split("/"),function(e){return!!e}),!o).join("/"))||"."},m.normalize=function(e){var o=m.isAbsolute(e),i="/"===r(e,-1);return(e=t(n(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},m.isAbsolute=function(e){return"/"===e.charAt(0)},m.join=function(){var e=Array.prototype.slice.call(arguments,0);return m.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},m.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=m.resolve(e).substr(1),t=m.resolve(t).substr(1);for(var r=n(e.split("/")),o=n(t.split("/")),i=Math.min(r.length,o.length),a=i,s=0;s<i;s++)if(r[s]!==o[s]){a=s;break}var c=[];for(s=a;s<r.length;s++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},m.sep="/",m.delimiter=":",m.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},m.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},m.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(o=!1,r=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e);var b={exports:{}};function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){var r="object"==(void 0===b.exports?"undefined":t(b.exports))&&b.exports&&!b.exports.nodeType&&b.exports,o="object"==t(b)&&b&&!b.nodeType&&b,i="object"==(void 0===e?"undefined":t(e))&&e;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var a,s,c=2147483647,l=36,u=1,f=26,d=38,h=700,p=72,m=128,v="-",g=/^xn--/,y=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=l-u,E=Math.floor,_=String.fromCharCode;function C(e){throw new RangeError(A[e])}function x(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function S(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+x((e=e.replace(w,".")).split("."),t).join(".")}function O(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function j(e){return x(e,function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+_(e)}).join("")}function T(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function F(e,t,n){var r=0;for(e=n?E(e/h):e>>1,e+=E(e/t);e>k*f>>1;r+=l)e=E(e/k);return E(r+(k+1)*e/(e+d))}function L(e){var t,n,r,o,i,a,s,d,h,b,g,y=[],w=e.length,A=0,k=m,_=p;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&C("not-basic"),y.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=A,a=1,s=l;o>=w&&C("invalid-input"),((d=(g=e.charCodeAt(o++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:l)>=l||d>E((c-A)/a))&&C("overflow"),A+=d*a,!(d<(h=s<=_?u:s>=_+f?f:s-_));s+=l)a>E(c/(b=l-h))&&C("overflow"),a*=b;_=F(A-i,t=y.length+1,0==i),E(A/t)>c-k&&C("overflow"),k+=E(A/t),A%=t,y.splice(A++,0,k)}return j(y)}function P(e){var t,n,r,o,i,a,s,d,h,b,g,y,w,A,k,x=[];for(y=(e=O(e)).length,t=m,n=0,i=p,a=0;a<y;++a)(g=e[a])<128&&x.push(_(g));for(r=o=x.length,o&&x.push(v);r<y;){for(s=c,a=0;a<y;++a)(g=e[a])>=t&&g<s&&(s=g);for(s-t>E((c-n)/(w=r+1))&&C("overflow"),n+=(s-t)*w,t=s,a=0;a<y;++a)if((g=e[a])<t&&++n>c&&C("overflow"),g==t){for(d=n,h=l;!(d<(b=h<=i?u:h>=i+f?f:h-i));h+=l)k=d-b,A=l-b,x.push(_(T(b+k%A,0))),d=E(k/A);x.push(_(T(d,0))),i=F(n,w,r==o),n=0,++r}++n,++t}return x.join("")}if(a={version:"1.4.1",ucs2:{decode:O,encode:j},decode:L,encode:P,toASCII:function(e){return S(e,function(e){return y.test(e)?"xn--"+P(e):e})},toUnicode:function(e){return S(e,function(e){return g.test(e)?L(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==t(define.amd)&&define.amd)define("punycode",function(){return a});else if(r&&o)if(b.exports==r)o.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),b=b.exports;var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(e){switch(void 0===e?"undefined":y(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},A=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function k(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var E=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},_={};_.decode=_.parse=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var c=0;c<s;++c){var l,u,f,d,h=e[c].replace(i,"%20"),p=h.indexOf(n);p>=0?(l=h.substr(0,p),u=h.substr(p+1)):(l=h,u=""),f=decodeURIComponent(l),d=decodeURIComponent(u),v(o,f)?g(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o},_.encode=_.stringify=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":y(e))?k(E(e),function(r){var o=encodeURIComponent(w(r))+n;return A(e[r])?k(e[r],function(e){return o+encodeURIComponent(w(e))}).join(t):o+encodeURIComponent(w(e[r]))}).join(t):r?encodeURIComponent(w(r))+n+encodeURIComponent(w(e)):""};var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":C(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},S={},O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function j(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}S.parse=B,S.resolve=function(e,t){return B(e,!1,!0).resolve(t)},S.resolveObject=function(e,t){return e?B(e,!1,!0).resolveObject(t):t},S.format=function(e){return x.isString(e)&&(e=B(e)),e instanceof j?e.format():j.prototype.format.call(e)},S.Url=j;var T=/^([a-z0-9.+-]+:)/i,F=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,P=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),N=["'"].concat(P),I=["%","/","?",";","#"].concat(N),D=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,U={javascript:!0,"javascript:":!0},$={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function B(e,t,n){if(e&&x.isObject(e)&&e instanceof j)return e;var r=new j;return r.parse(e,t,n),r}j.prototype.parse=function(e,t,n){if(!x.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":O(e)));var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(o);i[0]=i[0].replace(/\\/g,"/");var a=e=i.join(o);if(a=a.trim(),!n&&1===e.split("#").length){var s=L.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=T.exec(a);if(c){var l=(c=c[0]).toLowerCase();this.protocol=l,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===a.substr(0,2);!u||c&&$[c]||(a=a.substr(2),this.slashes=!0)}if(!$[c]&&(u||c&&!q[c])){for(var f,d,h=-1,p=0;p<D.length;p++)-1!==(m=a.indexOf(D[p]))&&(-1===h||m<h)&&(h=m);for(-1!==(d=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(f=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(f)),h=-1,p=0;p<I.length;p++){var m;-1!==(m=a.indexOf(I[p]))&&(-1===h||m<h)&&(h=m)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),y=(p=0,g.length);p<y;p++){var w=g[p];if(w&&!w.match(M)){for(var A="",k=0,E=w.length;k<E;k++)w.charCodeAt(k)>127?A+="x":A+=w[k];if(!A.match(M)){var C=g.slice(0,p),S=g.slice(p+1),j=w.match(R);j&&(C.push(j[1]),S.unshift(j[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=b.toASCII(this.hostname));var F=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+F,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!U[l])for(p=0,y=N.length;p<y;p++){var B=N[p];if(-1!==a.indexOf(B)){var H=encodeURIComponent(B);H===B&&(H=escape(B)),a=a.split(B).join(H)}}var z=a.indexOf("#");-1!==z&&(this.hash=a.substr(z),a=a.slice(0,z));var Y=a.indexOf("?");if(-1!==Y?(this.search=a.substr(Y),this.query=a.substr(Y+1),t&&(this.query=_.parse(this.query)),a=a.slice(0,Y)):t&&(this.search="",this.query={}),a&&(this.pathname=a),q[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var V=this.search||"";this.path=F+V}return this.href=this.format(),this},j.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&x.isObject(this.query)&&Object.keys(this.query).length&&(i=_.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||q[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},j.prototype.resolve=function(e){return this.resolveObject(B(e,!1,!0)).format()},j.prototype.resolveObject=function(e){if(x.isString(e)){var t=new j;t.parse(e,!1,!0),e=t}for(var n=new j,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var c=a[s];"protocol"!==c&&(n[c]=e[c])}return q[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!q[e.protocol]){for(var l=Object.keys(e),u=0;u<l.length;u++){var f=l[u];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||$[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=b||m||n.host&&e.pathname,g=v,y=n.pathname&&n.pathname.split("/")||[],w=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!q[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===y[0]?y[0]=n.host:y.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),v=v&&(""===d[0]||""===y[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,y=d;else if(d.length)y||(y=[]),y.pop(),y=y.concat(d),n.search=e.search,n.query=e.query;else if(!x.isNullOrUndefined(e.search))return w&&(n.hostname=n.host=y.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=e.search,n.query=e.query,x.isNull(n.pathname)&&x.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!y.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=y.slice(-1)[0],k=(n.host||e.host||y.length>1)&&("."===A||".."===A)||""===A,E=0,_=y.length;_>=0;_--)"."===(A=y[_])?y.splice(_,1):".."===A?(y.splice(_,1),E++):E&&(y.splice(_,1),E--);if(!v&&!g)for(;E--;E)y.unshift("..");!v||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),k&&"/"!==y.join("/").substr(-1)&&y.push("");var C,S=""===y[0]||y[0]&&"/"===y[0].charAt(0);return w&&(n.hostname=n.host=S?"":y.length?y.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(v=v||n.host&&y.length)&&!S&&y.unshift(""),y.length?n.pathname=y.join("/"):(n.pathname=null,n.path=null),x.isNull(n.pathname)&&x.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},j.prototype.parseHost=function(){var e=this.host,t=F.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var H=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)z.call(n,r)&&(e[r]=n[r])}return e},z=Object.prototype.hasOwnProperty,Y={};(function(e){"function"==typeof Symbol&&Symbol.iterator,Y=n;var t=n.events={INSTALLED:"sw:installed",UPDATED:"sw:updated",REDUNDANT:"sw:redundant",POST_MESSAGE:"sw:postMessage",MESSAGE:"sw:message",SYNC:"sw:sync",NOTIFICATION_REQUEST:"sw:notificationRequest",ERROR:"log:error"};function n(n,r){return n=n||"/sw.js",r=r||{},function(o,i){i.on(o.events.DOMCONTENTLOADED,function(){if((r=H({scope:"/"},r)).electron&&(r.scope=m.join(e,r.scope),n=S.format({pathname:m.join(e,n.replace(/^\//,"")),protocol:"file:",slashes:!0}),delete r.electron),window.onmessage=function(e){i.emit(t.MESSAGE,{data:e.data,channel:"window",port:null})},window.MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(e){i.emit(t.MESSAGE,{data:e.data,channel:"messageChannel",port:"port1"})},a.port2.onmessage=function(e){i.emit(t.MESSAGE,{data:e.data,channel:"messageChannel",port:"port2"})}}i.on(t.NOTIFICATION_REQUEST,function(e){Notification.requestPermission(function(t){"function"==typeof t&&e(t)})}),navigator.serviceWorker&&navigator.onLine&&(navigator.serviceWorker.onmessage=function(e){i.emit(t.MESSAGE,{data:e.data,channel:"navigator.serviceWorker",port:null})},navigator.serviceWorker.register(n,r).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state?navigator.serviceWorker.controller?i.emit(t.UPDATED,e):i.emit(t.INSTALLED,e):"redundant"===n.state&&i.emit(t.REDUNDANT,e)}},e.sync&&function(e){e.sync.getTags().then(function(e){o.syncTags=e}).catch(function(e){i.emit(t.ERROR,e)})}(e)}).catch(function(e){i.emit(t.ERROR,e)}),navigator.serviceWorker.ready.then(function(e){new Promise(function(n){var r=e.active;"activated"!==r.state?(r.addEventListener("statechange",n,{once:!0}),i.on(t.POST_MESSAGE,function(e){r.postMessage(e)})):n()}).then(function(){e.navigationPreload&&e.navigationPreload.enable()}),i.on(t.SYNC,function(n){e.sync.register(n).then(function(){return e.sync.getTags()}).then(function(e){o.syncTags=e}).catch(function(e){i.emit(t.ERROR,e)})})}).catch(function(e){i.emit(t.ERROR,e)}))})}}}).call(this,"/node_modules/choo-service-worker");var V={};function W(e){if(!(this instanceof W))return new W(e);"number"==typeof e&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}V=W,Object.defineProperty(W.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),W.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},W.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},W.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},W.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},W.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},W.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge&&(this.remove(e),1))},W.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},W.prototype.evict=function(){this.tail&&this.remove(this.tail)};var G={};function J(e,t,n){this.cache="number"==typeof n?new V(n):n||new V(100),this.state=e,this.emit=t}function Z(e){return new(e.bind.apply(e,arguments))}"function"==typeof Symbol&&Symbol.iterator,G=J,J.prototype.render=function(e,t){var n=this.cache.get(t);if(!n){for(var r=[],o=2,i=arguments.length;o<i;o++)r.push(arguments[o]);r.unshift(e,t,this.state,this.emit),n=Z.apply(Z,r),this.cache.set(t,n)}return n};var X,K=function(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})};"function"==typeof Symbol&&Symbol.iterator;var Q="undefined"!=typeof window;function ee(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}ee.prototype.push=function(e){this.queue.push(e),this.schedule()},ee.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},ee.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},X=function(){var e;return Q?(window._nanoScheduler||(window._nanoScheduler=new ee(!0)),e=window._nanoScheduler):e=new ee,e},"function"==typeof Symbol&&Symbol.iterator;var te,ne=X();re.disabled=!0;try{te=window.performance,re.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!te.mark}catch(hc){}function re(e){if(re.disabled)return oe;var t=(1e4*te.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function r(r){var o="end-"+t+"-"+e;te.mark(o),ne.push(function(){var i=null;try{var a=e+" ["+t+"]";te.measure(a,n,o),te.clearMarks(n),te.clearMarks(o)}catch(hc){i=hc}r&&r(i,e)})}return te.mark(n),r.uuid=t,r}function oe(e){e&&ne.push(function(){e(new Error("nanotiming: performance API unavailable"))})}var ie=re,ae=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}},se={};function ce(e){if(!(this instanceof ce))return new ce(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}"function"==typeof Symbol&&Symbol.iterator,se=ce,ce.prototype.emit=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var o=ie(this._name+"('"+e.toString()+"')"),i=this._listeners[e];return i&&i.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,o.uuid),o(),this},ce.prototype.on=ce.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},ce.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},ce.prototype.once=function(e,t){var n=this;return this.on(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},ce.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},ce.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(ae(e,n,1),!0):void 0}}},ce.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},ce.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},ce.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var a=e[i];a.apply(a,n)}}},"function"==typeof Symbol&&Symbol.iterator;var le=/(noopener|noreferrer) (noopener|noreferrer)/,ue=/^[\w-_]+:/;function fe(e,t){if(!e)throw new Error(t||"AssertionError")}fe.notEqual=function(e,t,n){},fe.notOk=function(e,t){},fe.equal=function(e,t,n){},fe.ok=fe;var de=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],he=de.length;function pe(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}var me=function(e,t){var n=e.nodeType,r=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,r=e.attributes,o=null,i=null,a=null,s=null,c=r.length-1;c>=0;--c)a=(s=r[c]).name,o=s.namespaceURI,i=s.value,o?(a=s.localName||a,t.getAttributeNS(o,a)!==i&&t.setAttributeNS(o,a,i)):t.hasAttribute(a)?t.getAttribute(a)!==i&&("null"===i||"undefined"===i?t.removeAttribute(a):t.setAttribute(a,i)):t.setAttribute(a,i);for(var l=n.length-1;l>=0;--l)!1!==(s=n[l]).specified&&(a=s.name,(o=s.namespaceURI)?(a=s.localName||a,e.hasAttributeNS(o,a)||t.removeAttributeNS(o,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===r?function(e,t){var n=e.value,r=t.value;pe(e,t,"checked"),pe(e,t,"disabled"),n!==r&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===r?function(e,t){pe(e,t,"selected")}(e,t):"TEXTAREA"===r&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<he;n++){var r=de[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)};"function"==typeof Symbol&&Symbol.iterator;var be=3;function ve(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName?e:(me(e,t),ge(e,t),t):null:e}function ge(e,t){for(var n,r,o,i,a=0,s=0;n=t.childNodes[s],r=e.childNodes[s-a],n||r;s++)if(r)if(n)if(ye(r,n))(o=ve(r,n))!==n&&(t.replaceChild(o,n),a++);else{i=null;for(var c=s;c<t.childNodes.length;c++)if(ye(t.childNodes[c],r)){i=t.childNodes[c];break}i?((o=ve(r,i))!==i&&a++,t.insertBefore(o,n)):r.id||n.id?(t.insertBefore(r,n),a++):(o=ve(r,n))!==n&&(t.replaceChild(o,n),a++)}else t.appendChild(r),a++;else t.removeChild(n),s--}function ye(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===be&&e.nodeValue===t.nodeValue}var we=function(e,t,n){return n&&n.childrenOnly?(ge(t,e),e):ve(t,e)};"function"==typeof Symbol&&Symbol.iterator;var Ae=/([^?=&]+)(=([^&]*))?/g;"function"==typeof Symbol&&Symbol.iterator;var ke=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Ee.call(n,r)&&(e[r]=n[r])}return e},Ee=Object.prototype.hasOwnProperty,_e={};function Ce(){if(!(this instanceof Ce))return new Ce;this.trie={nodes:{}}}"function"==typeof Symbol&&Symbol.iterator,_e=Ce,Ce.prototype.create=function(e){var t=e.replace(/^\//,"").split("/");return function e(n,r){var o=t.hasOwnProperty(n)&&t[n];if(!1===o)return r;var i=null;return/^:|^\*/.test(o)?(r.nodes.hasOwnProperty("$$")?i=r.nodes.$$:(i={nodes:{}},r.nodes.$$=i),"*"===o[0]&&(r.wildcard=!0),r.name=o.replace(/^:|^\*/,"")):r.nodes.hasOwnProperty(o)?i=r.nodes[o]:(i={nodes:{}},r.nodes[o]=i),e(n+1,i)}(0,this.trie)},Ce.prototype.match=function(e){var t=e.replace(/^\//,"").split("/"),n={},r=function e(r,o){if(void 0!==o){var i=t[r];if(void 0===i)return o;if(o.nodes.hasOwnProperty(i))return e(r+1,o.nodes[i]);if(o.name){try{n[o.name]=decodeURIComponent(i)}catch(hc){return e(r,void 0)}return e(r+1,o.nodes.$$)}if(o.wildcard){try{n.wildcard=decodeURIComponent(t.slice(r).join("/"))}catch(hc){return e(r,void 0)}return o.nodes.$$}return e(r+1)}}(0,this.trie);if(r)return(r=ke(r)).params=n,r},Ce.prototype.mount=function(e,t){var n=e.replace(/^\//,"").split("/"),r=null,o=null;if(1===n.length)o=n[0],r=this.create(o);else{var i=n.join("/");o=n[0],r=this.create(i)}H(r.nodes,t.nodes),t.name&&(r.name=t.name),r.nodes[""]&&(Object.keys(r.nodes[""]).forEach(function(e){"nodes"!==e&&(r[e]=r.nodes[""][e])}),H(r.nodes,r.nodes[""].nodes),delete r.nodes[""].nodes)},"function"==typeof Symbol&&Symbol.iterator;var xe=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),r=_e();return o._trie=r,o.on=function(e,t){var n=t._wayfarer&&t._trie?t:function(){return t.apply(this,Array.prototype.slice.call(arguments))};(e=e||"/",n.route=e,n._wayfarer&&n._trie)?r.mount(e,n._trie.trie):r.create(e).cb=n;return o},o.emit=o,o.match=i,o._wayfarer=!0,o;function o(e){var t=i(e),n=new Array(arguments.length);n[0]=t.params;for(var r=1;r<n.length;r++)n[r]=arguments[r];return t.cb.apply(t.cb,n)}function i(e){var t=r.match(e);if(t&&t.cb)return new a(t);var o=r.match(n);if(o&&o.cb)return new a(o);throw new Error("route '"+e+"' did not match")}function a(e){this.cb=e.cb,this.route=e.cb.route,this.params=e.params}},Se={},Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je=/file:\/\//.test("object"===("undefined"==typeof window?"undefined":Oe(window))&&window.location&&window.location.origin),Te=new RegExp("^(file://|/)(.*.html?/?)?"),Fe=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),Le=new RegExp("#"),Pe=new RegExp("[?].*$");function Ne(e){if(!(this instanceof Ne))return new Ne(e);e=e||{},this.router=xe(e.default||"/404")}function Ie(e,t){return e=t?e.replace(Te,""):e.replace(Fe,""),decodeURI(e.replace(Pe,"").replace(Le,"/"))}Se=Ne,Ne.prototype.on=function(e,t){e=e.replace(/^[#\/]/,""),this.router.on(e,t)},Ne.prototype.emit=function(e){return e=Ie(e,je),this.router.emit(e)},Ne.prototype.match=function(e){return e=Ie(e,je),this.router.match(e)};var De=function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(hc){}},Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re=$e,Ue={};function $e(e){if(!(this instanceof $e))return new $e(e);e=e||{};var t=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hashEnabled=void 0===e.hash||e.hash,this._hasWindow="undefined"!=typeof window,this._cache=e.cache,this._loaded=!1,this._stores=[],this._tree=null;var n={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?ke(window.initialState,n):n,delete window.initialState):this.state=n,this.router=Se({curry:!0}),this.emitter=se("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title),this.emitter.prependListener(this._events.DOMTITLECHANGE,function(e){t.state.title=e,t._hasWindow&&(document.title=e)})}$e.prototype.route=function(e,t){this.router.on(e,t)},$e.prototype.use=function(e){var t=this;this._stores.push(function(n){var r="choo.use";r=e.storeName?r+"("+e.storeName+")":r;var o=ie(r);e(n,t.emitter,t),o()})},$e.prototype.start=function(){var e,t,n=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){n._matchRoute(),n._loaded&&(n.emitter.emit(n._events.RENDER),setTimeout(De.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){n.emitter.emit(n._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){window.history.pushState(Ue,null,e),n.emitter.emit(n._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){window.history.replaceState(Ue,null,e),n.emitter.emit(n._events.NAVIGATE)}),window.onpopstate=function(){n.emitter.emit(n._events.POPSTATE)},n._hrefEnabled&&(e=function(e){var t=e.href,r=e.hash;t!==window.location.href?n.emitter.emit(n._events.PUSHSTATE,t):!n._hashEnabled&&r&&De(r)},t=t||window.document,window.addEventListener("click",function(n){if(!(n.button&&0!==n.button||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.defaultPrevented)){var r=function e(n){if(n&&n!==t)return"a"!==n.localName||void 0===n.href?e(n.parentNode):n}(n.target);r&&(window.location.protocol!==r.protocol||window.location.hostname!==r.hostname||window.location.port!==r.port||r.hasAttribute("data-nanohref-ignore")||r.hasAttribute("download")||"_blank"===r.getAttribute("target")&&le.test(r.getAttribute("rel"))||ue.test(r.getAttribute("href"))||(n.preventDefault(),e(r)))}}))),this._setCache(this.state),this._stores.forEach(function(e){e(n.state)}),this._matchRoute(),this._tree=this._prerender(this.state),this.emitter.prependListener(n._events.RENDER,function(e,t){t||(t=window.requestAnimationFrame);var n=!1,r=null;return function(){null!==r||n||(n=!0,t(function(){n=!1;for(var t=r.length,o=new Array(t),i=0;i<t;i++)o[i]=r[i];e.apply(e,o),r=null})),r=arguments}}(function(){var e=ie("choo.render"),t=n._prerender(n.state),r=ie("choo.morph");we(n._tree,t),r(),e()})),K(function(){n.emitter.emit(n._events.DOMCONTENTLOADED),n._loaded=!0}),this._tree},$e.prototype.mount=function(e){if("object"!==("undefined"==typeof window?"undefined":Me(window)))return this.selector=e,this;var t=this;K(function(){var n=ie("choo.render"),r=t.start();t._tree="string"==typeof e?document.querySelector(e):e;var o=ie("choo.morph");we(t._tree,r),o(),n()})},$e.prototype.toString=function(e,t){this.state=ke(this.state,t||{});var n=this;this._setCache(this.state),this._stores.forEach(function(e){e(n.state)}),this._matchRoute(e);var r=this._prerender(this.state);return"string"==typeof r.outerHTML?r.outerHTML:r.toString()},$e.prototype._matchRoute=function(e){var t,n;e?(t=e.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(t=t.replace(/#.+$/,"")),n=e):(t=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(t+=window.location.hash.replace(/^#/,"/")),n=window.location.search);var r,o=this.router.match(t);return this._handler=o.cb,this.state.href=t,this.state.query=(r={},n.replace(/^.*\?/,"").replace(Ae,function(e,t,n,o){r[decodeURIComponent(t)]=decodeURIComponent(o)}),r),this.state.route=o.route,this.state.params=o.params,this.state},$e.prototype._prerender=function(e){var t=ie("choo.prerender('"+e.route+"')"),n=this._handler(e,this.emit);return t(),n},$e.prototype._setCache=function(e){var t=new G(e,this.emitter.emit.bind(this.emitter),this._cache);function n(e,n){for(var r=[],o=0,i=arguments.length;o<i;o++)r.push(arguments[o]);return t.render.apply(t,r)}e.cache=n,n.toJSON=function(){return null}};var qe={populateHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.header)throw new Error("You need to pass 'options.header' to the populateHeader() hook.");return function(t){return"before"!==t.type?Promise.reject(new Error("The 'populateHeader' hook should only be used as a 'before' hook.")):(t.params.accessToken&&(t.params.headers=Object.assign({},(n={},r=e.header,o=e.prefix?e.prefix+" "+t.params.accessToken:t.params.accessToken,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n),t.params.headers)),Promise.resolve(t));var n,r,o}},populateAccessToken:function(){return function(e){var t=e.app;return"before"!==e.type?Promise.reject(new Error("The 'populateAccessToken' hook should only be used as a 'before' hook.")):(Object.assign(e.params,{accessToken:t.get("accessToken")}),Promise.resolve(e))}},populateEntity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.service)throw new Error("You need to pass 'options.service' to the populateEntity() hook.");if(!e.field)throw new Error("You need to pass 'options.field' to the populateEntity() hook.");if(!e.entity)throw new Error("You need to pass 'options.entity' to the populateEntity() hook.");return function(t){var n=t.app;return"after"!==t.type?Promise.reject(new Error("The 'populateEntity' hook should only be used as an 'after' hook.")):n.passport.verifyJWT(t.result.accessToken).then(function(t){var r=t[e.field];return r?n.service(e.service).get(r):Promise.reject(new Error("Access token payload is missing the '"+e.field+"' field."))}).then(function(r){return t.result[e.entity]=r,n.set(e.entity,r),Promise.resolve(t)})}}},Be={},He=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Be.Storage=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.store={}}return He(e,[{key:"getItem",value:function(e){return this.store[e]}},{key:"setItem",value:function(e,t){return this.store[e]=t}},{key:"removeItem",value:function(e){return delete this.store[e],this}}]),e}(),Be.payloadIsValid=function(e){return e&&(!e.exp||1e3*e.exp>(new Date).getTime())},Be.getCookie=function(e){if("undefined"!=typeof document){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}return null},Be.clearCookie=function(e){return"undefined"!=typeof document&&(document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),null};var ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye=1e3,Ve=6e4,We=36e5,Ge=24*We;function Je(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var Ze=function(e,t){t=t||{};var n,r,o=void 0===e?"undefined":ze(e);if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*Ge;case"hours":case"hour":case"hrs":case"hr":case"h":return n*We;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ve;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ye;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===o&&!1===isNaN(e))return t.long?(n=e,(r=Math.abs(n))>=Ge?Je(n,r,Ge,"day"):r>=We?Je(n,r,We,"hour"):r>=Ve?Je(n,r,Ve,"minute"):r>=Ye?Je(n,r,Ye,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=Ge?Math.round(e/Ge)+"d":t>=We?Math.round(e/We)+"h":t>=Ve?Math.round(e/Ve)+"m":t>=Ye?Math.round(e/Ye)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Xe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ke={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Ke.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&(e=console).log.apply(e,arguments)},Ke.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ke.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},Ke.save=function(e){try{e?Ke.storage.setItem("debug",e):Ke.storage.removeItem("debug")}catch(error){}},Ke.load=function(){var t=void 0;try{t=Ke.storage.getItem("debug")}catch(error){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},Ke.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Ke.storage=function(){try{return localStorage}catch(error){}}(),Ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],(Ke=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var i=void 0;function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a.enabled){var o=a,s=Number(new Date),c=s-(i||s);o.diff=c,o.prev=i,o.curr=s,i=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;l++;var i=n.formatters[r];if("function"==typeof i){var a=t[l];e=i.call(o,a),t.splice(l,1),l--}return e}),n.formatArgs.call(o,t),(o.log||n.log).apply(o,t)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=t(e),a.destroy=r,a.extend=o,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){var e=[].concat(Xe(n.names.map(i)),Xe(n.skips.map(i).map(function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t=void 0,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,r=void 0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=Ze,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}(Ke)).formatters.j=function(e){try{return JSON.stringify(e)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this,e);var Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function et(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var tt=function(e,t){t=t||{};var n,r,o=void 0===e?"undefined":Qe(e);if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===o&&!1===isNaN(e))return t.long?(n=e,(r=Math.abs(n))>=864e5?et(n,r,864e5,"day"):r>=36e5?et(n,r,36e5,"hour"):r>=6e4?et(n,r,6e4,"minute"):r>=1e3?et(n,r,1e3,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=864e5?Math.round(e/864e5)+"d":t>=36e5?Math.round(e/36e5)+"h":t>=6e4?Math.round(e/6e4)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function nt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var rt={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};rt.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&(e=console).log.apply(e,arguments)},rt.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+rt.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},rt.save=function(e){try{e?rt.storage.setItem("debug",e):rt.storage.removeItem("debug")}catch(error){}},rt.load=function(){var t=void 0;try{t=rt.storage.getItem("debug")}catch(error){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},rt.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},rt.storage=function(){try{return localStorage}catch(error){}}(),rt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],(rt=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var i=void 0;function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a.enabled){var o=a,s=Number(new Date),c=s-(i||s);o.diff=c,o.prev=i,o.curr=s,i=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;l++;var i=n.formatters[r];if("function"==typeof i){var a=t[l];e=i.call(o,a),t.splice(l,1),l--}return e}),n.formatArgs.call(o,t),(o.log||n.log).apply(o,t)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=t(e),a.destroy=r,a.extend=o,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){var e=[].concat(nt(n.names.map(i)),nt(n.skips.map(i).map(function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t=void 0,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,r=void 0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=tt,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}(rt)).formatters.j=function(e){try{return JSON.stringify(e)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this,e);var ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it=rt("@feathersjs/errors");function at(e,t,n,r,o){var i=void 0,a=void 0,s=void 0;(e=e||"Error")instanceof Error?(a=e.message||"Error",e.errors&&(i=e.errors)):"object"===(void 0===e?"undefined":ot(e))?(a=e.message||"Error",o=e):a=e,o&&((s=JSON.parse(JSON.stringify(o))).errors?(i=s.errors,delete s.errors):o.errors&&(i=JSON.parse(JSON.stringify(o.errors)))),this.type="FeathersError",this.name=t,this.message=a,this.code=n,this.className=r,this.data=s,this.errors=i||{},it(this.name+"("+this.code+"): "+this.message),it(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,at):this.stack=(new Error).stack}function st(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function ct(e,t){at.call(this,e,"BadRequest",400,"bad-request",t)}function lt(e,t){at.call(this,e,"NotAuthenticated",401,"not-authenticated",t)}function ut(e,t){at.call(this,e,"PaymentError",402,"payment-error",t)}function ft(e,t){at.call(this,e,"Forbidden",403,"forbidden",t)}function dt(e,t){at.call(this,e,"NotFound",404,"not-found",t)}function ht(e,t){at.call(this,e,"MethodNotAllowed",405,"method-not-allowed",t)}function pt(e,t){at.call(this,e,"NotAcceptable",406,"not-acceptable",t)}function mt(e,t){at.call(this,e,"Timeout",408,"timeout",t)}function bt(e,t){at.call(this,e,"Conflict",409,"conflict",t)}function vt(e,t){at.call(this,e,"LengthRequired",411,"length-required",t)}function gt(e,t){at.call(this,e,"Unprocessable",422,"unprocessable",t)}function yt(e,t){at.call(this,e,"TooManyRequests",429,"too-many-requests",t)}function wt(e,t){at.call(this,e,"GeneralError",500,"general-error",t)}function At(e,t){at.call(this,e,"NotImplemented",501,"not-implemented",t)}function kt(e,t){at.call(this,e,"BadGateway",502,"bad-gateway",t)}function Et(e,t){at.call(this,e,"Unavailable",503,"unavailable",t)}st(at,Error),Object.defineProperty(at.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),st(ct,at),st(lt,at),st(ut,at),st(ft,at),st(dt,at),st(ht,at),st(pt,at),st(mt,at),st(bt,at),st(vt,at),st(gt,at),st(yt,at),st(wt,at),st(At,at),st(kt,at),st(Et,at);var _t={FeathersError:at,BadRequest:ct,NotAuthenticated:lt,PaymentError:ut,Forbidden:ft,NotFound:dt,MethodNotAllowed:ht,NotAcceptable:pt,Timeout:mt,Conflict:bt,LengthRequired:vt,Unprocessable:gt,TooManyRequests:yt,GeneralError:wt,NotImplemented:At,BadGateway:kt,Unavailable:Et,400:ct,401:lt,402:ut,403:ft,404:dt,405:ht,406:pt,408:mt,409:bt,411:vt,422:gt,429:yt,500:wt,501:At,502:kt,503:Et},Ct=Object.assign({convert:function(e){if(!e)return e;var t=_t[e.name],n=t?new t(e.message,e.data):new Error(e.message||e);return"object"===(void 0===e?"undefined":ot(e))&&Object.assign(n,e),n}},_t),xt={};function St(e){this.message=e}St.prototype=new Error,St.prototype.name="InvalidCharacterError",xt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new St("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};var Ot;function jt(e){this.message=e}jt.prototype=new Error,jt.prototype.name="InvalidTokenError",(Ot=function(e,t){if("string"!=typeof e)throw new jt("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(xt(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(n){return xt(t)}}(e.split(".")[n]))}catch(hc){throw new jt("Invalid token specified: "+hc.message)}}).InvalidTokenError=jt;var Tt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ft=Be.Storage,Lt=Be.payloadIsValid,Pt=Be.getCookie,Nt=Be.clearCookie,It=Ke("@feathersjs/authentication-client"),Dt=function(){function e(t,n){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),t.passport)throw new Error("You have already registered authentication on this client app instance. You only need to do it once.");Object.assign(this,{options:n,app:t,payloadIsValid:Lt,getCookie:Pt,clearCookie:Nt,storage:t.get("storage")||this.getStorage(n.storage)}),this.setJWT=this.setJWT.bind(this),t.set("storage",this.storage),this.getJWT().then(this.setJWT),this.setupSocketListeners()}return Tt(e,[{key:"setupSocketListeners",value:function(){var e=this,t=this.app,n=t.io||t.primus,r=t.io?"emit":"send",o=t.io?"reconnect":"reconnected";if(n){n.on(o,function(){if(It("Socket reconnected"),n.authenticated){var o={strategy:e.options.jwtStrategy,accessToken:t.get("accessToken")};e.authenticateSocket(o,n,r).then(e.setJWT).catch(function(e){It("Error re-authenticating after socket reconnect",e),n.authenticated=!1,t.emit("reauthentication-error",e)})}});var i=function(){n.io.engine.on("upgrade",function(){if(It("Socket upgrading"),n.authenticated){var o={strategy:e.options.jwtStrategy,accessToken:t.get("accessToken")};e.authenticateSocket(o,n,r).then(e.setJWT).catch(function(e){It("Error re-authenticating after socket upgrade",e),n.authenticated=!1,t.emit("reauthentication-error",e)})}})};n.io&&n.io.engine?i():n.on("connect",i)}}},{key:"connected",value:function(){var e=this,t=this.app;if(t.rest)return Promise.resolve();var n=t.io||t.primus;return n?t.io&&n.connected||t.primus&&3===n.readyState?(It("Socket already connected"),Promise.resolve(n)):new Promise(function(r,o){var i=t.primus?"open":"connect",a=t.io?"disconnect":"end",s=setTimeout(function(){It("Socket connection timed out"),o(new Error("Socket connection timed out"))},e.options.timeout);It("Waiting for socket connection");var c=function(){It("Socket disconnected before it could connect"),n.authenticated=!1};n.once(a,c),n.once(i,function(){It("Socket connected"),It("Removing "+a+" listener"),n.removeListener(a,c),clearTimeout(s),r(n)})}):Promise.reject(new Error("It looks like your client connection has not been configured."))}},{key:"authenticate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.app,r=Promise.resolve(t);return t.strategy||(t.accessToken?t.strategy=this.options.jwtStrategy:r=this.getJWT().then(function(t){return t?{strategy:e.options.jwtStrategy,accessToken:t}:Promise.reject(new Ct.NotAuthenticated("Could not find stored JWT and no authentication strategy was given"))})),r.then(function(t){return e.connected(n).then(function(r){if(n.rest)return n.service(e.options.path).create(t).then(e.setJWT);var o=n.io?"emit":"send";return e.authenticateSocket(t,r,o).then(e.setJWT)})}).then(function(e){return n.emit("authenticated",e),e})}},{key:"authenticateSocket",value:function(e,t,n){var r=this;return new Promise(function(o,i){var a=setTimeout(function(){It("authenticateSocket timed out"),i(new Error("Authentication timed out"))},r.options.timeout);It("Attempting to authenticate socket"),t[n]("authenticate",e,function(e,n){if(e)return i(e);clearTimeout(a),t.authenticated=!0,It("Socket authenticated!"),o(n)})})}},{key:"logoutSocket",value:function(e,t){var n=this;return new Promise(function(r,o){var i=setTimeout(function(){It("logoutSocket timed out"),o(new Error("Logout timed out"))},n.options.timeout);e[t]("logout",function(t){if(clearTimeout(i),e.authenticated=!1,t)return o(t);r()})})}},{key:"logout",value:function(){var e=this,t=this.app;return t.set("accessToken",null),this.clearCookie(this.options.cookie),Promise.resolve(t.get("storage").removeItem(this.options.storageKey)).then(function(){if(t.io||t.primus){var n=t.io?"emit":"send",r=t.io?t.io:t.primus;return e.logoutSocket(r,n)}}).then(function(e){return t.emit("logout",e),e})}},{key:"setJWT",value:function(e){var t=e&&e.accessToken?e.accessToken:e;return t&&(this.app.set("accessToken",t),this.app.get("storage").setItem(this.options.storageKey,t)),Promise.resolve(e)}},{key:"getJWT",value:function(){var e=this,t=this.app;return new Promise(function(n,r){var o=t.get("accessToken");return o?n(o):Promise.resolve(e.storage.getItem(e.options.storageKey)).then(function(t){var r=t||e.getCookie(e.options.cookie);return r&&"null"!==r&&!e.payloadIsValid(Ot(r))&&(r=void 0),n(r)}).catch(r)})}},{key:"verifyJWT",value:function(e){if("string"!=typeof e)return Promise.reject(new Error("Token provided to verifyJWT is missing or not a string"));try{var t=Ot(e);return this.payloadIsValid(t)?Promise.resolve(t):Promise.reject(new Error("Invalid token: expired"))}catch(error){return Promise.reject(new Error("Cannot decode malformed token."))}}},{key:"getStorage",value:function(e){return e||new Ft}}]),e}(),Mt={},Rt={header:"Authorization",cookie:"feathers-jwt",storageKey:"feathers-jwt",jwtStrategy:"jwt",path:"/authentication",entity:"user",service:"users",timeout:5e3};function Ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},Rt,e);return function(){var e=this;e.passport=new Dt(e,t),e.authenticate=e.passport.authenticate.bind(e.passport),e.logout=e.passport.logout.bind(e.passport),e.mixins.push(function(n){if(e.version<"3.0.0")throw new Error("This version of @feathersjs/authentication-client only works with @feathersjs/feathers v3.0.0 or later.");n.hooks({before:qe.populateAccessToken(t)})}),e.rest&&e.mixins.push(function(e){e.hooks({before:qe.populateHeader(t)})})}}(Mt=Ut).default=Ut,Mt.defaults=Rt;var $t={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$t.stripSlashes=function(e){return e.replace(/^(\/+)|(\/+)$/g,"")};var o=$t._={each:function(e,t){e&&"function"==typeof e.forEach?e.forEach(t):o.isObject(e)&&Object.keys(e).forEach(function(n){return t(e[n],n)})},some:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).some(function(e){var r=n(e,2),o=r[0],i=r[1];return t(o,i)})},every:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).every(function(e){var r=n(e,2),o=r[0],i=r[1];return t(o,i)})},keys:function(e){return Object.keys(e)},values:function(e){return o.keys(e).map(function(t){return e[t]})},isMatch:function(e,t){return o.keys(t).every(function(n){return e[n]===t[n]})},isEmpty:function(e){return 0===o.keys(e).length},isObject:function(e){return"object"===(void 0===e?"undefined":t(e))&&!Array.isArray(e)&&null!==e},isObjectOrArray:function(e){return"object"===(void 0===e?"undefined":t(e))&&null!==e},extend:function(){return Object.assign.apply(Object,arguments)},omit:function(e){for(var t=o.extend({},e),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(e){return delete t[e]}),t},pick:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})},merge:function(e,t){return o.isObject(e)&&o.isObject(t)&&Object.keys(t).forEach(function(n){o.isObject(t[n])?(e[n]||Object.assign(e,r({},n,{})),o.merge(e[n],t[n])):Object.assign(e,r({},n,t[n]))}),e}};$t.isPromise=function(e){return o.isObject(e)&&"function"==typeof e.then},$t.makeUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="function"==typeof n.get?n.get.bind(n):function(){},o=r("env")||"production",i=r("host")||e.env.HOST_NAME||"localhost",a="development"===o||"test"===o||void 0===o?"http":"https",s=r("port")||e.env.PORT||3030;return t=t||"",a+"://"+i+("development"===o||"test"===o||void 0===o?":"+s:"")+"/"+$t.stripSlashes(t)},$t.createSymbol=function(e){return"undefined"!=typeof Symbol?Symbol(e):e}}).call(this,e);var qt={},Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht=$t._,zt=Ht.each,Yt=Ht.pick,Vt=$t.createSymbol,Wt=Vt("__feathersSkipHooks");qt.SKIP=Wt,qt.ACTIVATE_HOOKS=Vt("__feathersActivateHooks"),qt.createHookObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return Object.defineProperty(n,"toJSON",{value:function(){return Yt(this,"type","method","path","params","id","data","result","error")}}),Object.assign(n,t,{method:e,get path(){var e=t.app,n=t.service;return n&&e&&e.services?Object.keys(e.services).find(function(t){return e.services[t]===n}):null}})},qt.defaultMakeArguments=function(e){var t=[];return void 0!==e.id&&t.push(e.id),e.data&&t.push(e.data),t.push(e.params||{}),t},qt.makeArguments=function(e){switch(e.method){case"find":return[e.params];case"get":case"remove":return[e.id,e.params];case"update":case"patch":return[e.id,e.data,e.params];case"create":return[e.data,e.params]}return qt.defaultMakeArguments(e)},qt.convertHookData=function(e){var t={};return Array.isArray(e)?t={all:e}:"object"!==(void 0===e?"undefined":Bt(e))?t={all:[e]}:zt(e,function(e,n){t[n]=Array.isArray(e)?e:[e]}),t},qt.isHookObject=function(e){return"object"===(void 0===e?"undefined":Bt(e))&&"string"==typeof e.method&&"string"==typeof e.type},qt.getHooks=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.__hooks[n][r]||[],a=t.__hooks[n][r]||[];return o?a.concat(i):i.concat(a)},qt.processHooks=function(e,t){var n=this,r=t,o=function(e){if(e){if(e===Wt)return Wt;if(!qt.isHookObject(e))throw new Error(r.type+" hook for '"+r.method+"' method returned invalid hook object");r=e}return r};return e.reduce(function(e,t){var r=t.bind(n);return(e=2===r.length?e.then(function(e){return e===Wt?Wt:new Promise(function(t,n){r(e,function(e,r){return e?n(e):t(r)})})}):e.then(function(e){return e===Wt?Wt:r(e)})).then(o)},Promise.resolve(r)).then(function(){return r}).catch(function(e){throw e.hook=r,e})},qt.enableHooks=function(e,t,n){if("function"==typeof e.hooks)return e;var r={};return n.forEach(function(e){r[e]={}}),Object.defineProperty(e,"__hooks",{value:r}),Object.assign(e,{hooks:function(e){var n=this;return zt(e,function(e,r){if(!n.__hooks[r])throw new Error("'"+r+"' is not a valid hook type");var o=qt.convertHookData(e);zt(o,function(e,n){if("all"!==n&&-1===t.indexOf(n))throw new Error("'"+n+"' is not a valid hook method")}),t.forEach(function(e){var t=n.__hooks[r][e]||(n.__hooks[r][e]=[]);o.all&&t.push.apply(t,o.all),o[e]&&t.push.apply(t,o[e])})}),this}})};var Gt,Jt=Object.assign({},$t,{hooks:qt}),Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt=Object.create||function(e){var t=function(){};return t.prototype=e,new t},Kt=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},Qt=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function en(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=Xt(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}Gt=en,en.EventEmitter=en,en.prototype._events=void 0,en.prototype._maxListeners=void 0;var tn,nn=10;try{var rn={};Object.defineProperty&&Object.defineProperty(rn,"x",{value:0}),tn=0===rn.x}catch(pc){tn=!1}function on(e){return void 0===e._maxListeners?en.defaultMaxListeners:e._maxListeners}function an(e,t,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=Xt(null),e._eventsCount=0),a){if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=on(e))&&o>0&&a.length>o){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"===("undefined"==typeof console?"undefined":Zt(console))&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=i[t]=n,++e._eventsCount;return e}function sn(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function cn(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=Qt.call(sn,r);return o.listener=n,r.wrapFn=o,o}function ln(e,t,n){var r=e._events;if(!r)return[];var o=r[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):fn(o,o.length):[]}function un(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function fn(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}tn?Object.defineProperty(en,"defaultMaxListeners",{enumerable:!0,get:function(){return nn},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');nn=e}}):en.defaultMaxListeners=nn,en.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},en.prototype.getMaxListeners=function(){return on(this)},en.prototype.emit=function(e){var t,n,r,o,i,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=fn(e,r),i=0;i<r;++i)o[i].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=fn(e,o),a=0;a<o;++a)i[a].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=fn(e,i),s=0;s<i;++s)a[s].call(n,r,o)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,s=fn(e,a),c=0;c<a;++c)s[c].call(n,r,o,i)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=fn(e,o),a=0;a<o;++a)i[a].apply(n,r)}(n,l,this,o)}return!0},en.prototype.addListener=function(e,t){return an(this,e,t,!1)},en.prototype.on=en.prototype.addListener,en.prototype.prependListener=function(e,t){return an(this,e,t,!0)},en.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,cn(this,e,t)),this},en.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,cn(this,e,t)),this},en.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Xt(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=o,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},en.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=Xt(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=Xt(null):delete n[e]),this;if(0===arguments.length){var o,i=Kt(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Xt(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},en.prototype.listeners=function(e){return ln(this,e,!0)},en.prototype.rawListeners=function(e){return ln(this,e,!1)},en.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):un.call(e,t)},en.prototype.listenerCount=un,en.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var dn,hn={},pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};dn=function(){var e="function"==typeof Object.getOwnPropertySymbols;return{create:function(){var e=Object.create(this),t="string"==typeof e.__init?e.__init:"init";return"function"==typeof e[t]&&e[t].apply(e,arguments),e},mixin:function(t,n){var r=n||this,o=/\b_super\b/,i=Object.getPrototypeOf(r)||r.prototype,a={},s=t,c=function(e){var t=Object.getOwnPropertyDescriptor(s,e);!a[e]&&t&&(a[e]=t)};do{Object.getOwnPropertyNames(s).forEach(c),e&&Object.getOwnPropertySymbols(s).forEach(c)}while((s=Object.getPrototypeOf(s))&&Object.getPrototypeOf(s));var l=function(t){var n=a[t];"function"==typeof n.value&&o.test(n.value)&&(n.value=function(t,n,r,o){var i="function"==typeof n,a=function(){var e=this._super;this._super=i?n:t[r];var a=o.apply(this,arguments);return this._super=e,a};return i&&e&&Object.getOwnPropertySymbols(n).forEach(function(e){a[e]=n[e]}),a}(i,r[t],t,n.value)),Object.defineProperty(r,t,n)};return Object.keys(a).forEach(l),e&&Object.getOwnPropertySymbols(a).forEach(l),r},extend:function(e,t){return this.mixin(e,Object.create(t||this))},proxy:function(e){var t=this[e],n=Array.prototype.slice.call(arguments,1);return n.unshift(this),t.bind.apply(t,n)}}},"function"==typeof define&&define.amd?define([],dn):"object"===(void 0===hn?"undefined":pn(hn))?hn=dn():this.Proto=dn();var mn={},bn=Gt.EventEmitter,vn=mn.eventHook=function(){return function(e){var t=e.app,n=e.service,r=t.eventMappings[e.method],o=n._hookEvents&&-1!==n._hookEvents.indexOf(r);r&&o&&"error"!==e.type&&(Array.isArray(e.result)?e.result:[e.result]).forEach(function(t){return n.emit(r,t,e)})}},gn=mn.eventMixin=function(e){if(!e._serviceEvents){var t=this,n="function"==typeof e.on&&"function"==typeof e.emit;"function"!=typeof e.mixin||n||e.mixin(bn.prototype),Object.defineProperties(e,{_serviceEvents:{value:Array.isArray(e.events)?e.events.slice():[]},_hookEvents:{value:[]}}),Object.keys(t.eventMappings).forEach(function(n){var r=t.eventMappings[n],o=-1!==e._serviceEvents.indexOf(r);"function"!=typeof e[n]||o||(e._serviceEvents.push(r),e._hookEvents.push(r))})}};mn=function(){return function(e){Object.assign(e,{eventMappings:{create:"created",update:"updated",remove:"removed",patch:"patched"}}),e.hooks({finally:vn()}),hn.mixin(bn.prototype,e),e.mixins.push(gn)}};var yn=Jt._,wn=[function(e){var t=e.service,n=e.method,r=t.methods[n],o=e.arguments.reduce(function(e,t,n){return e[r[n]]=t,e},{});return o.params||(o.params={}),Object.assign(e,o),e},function(e){var t=e.service,n=e.method,r=t.methods[n];if(r.includes("id")&&void 0===e.id)throw new Error("An id must be provided to the '"+n+"' method");if(r.includes("data")&&!yn.isObjectOrArray(e.data))throw new Error("A data object must be provided to the '"+n+"' method");return e}],An={};function kn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var En=Jt.hooks,_n=Jt.isPromise,Cn=Jt._,xn=En.createHookObject,Sn=En.getHooks,On=En.processHooks,jn=En.enableHooks,Tn=En.ACTIVATE_HOOKS,Fn=function(e){var t=e.app,n=e.service,r=e.method,o=e.original;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.hookTypes.reduce(function(t,n){var r=e[n]||[];return t[n]=Array.isArray(r)?r:[r],t},{});return function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];var c=!0===a[a.length-1]&&a.pop(),l=o||n[r].bind(n),u=xn(r,{type:"before",arguments:a,service:n,app:t});return On.call(n,wn.concat(i.before),u).then(function(e){if(void 0!==e.result)return e;var t=l.apply(void 0,kn(function(e,t,n){return e.methods[t].reduce(function(e,t){return[].concat(kn(e),[n[t]])},[])}(n,r,e)));if(!_n(t))throw new Error("Service method '"+e.method+"' for '"+e.path+"' service must return a promise");return t.then(function(t){return e.result=t,e})}).then(function(e){return Object.assign({},e,{type:"after"})}).then(function(e){var t=i.after.concat(i.finally);return On.call(n,t,e)}).then(function(e){return c?e:e.result}).catch(function(e){var t=i.error.concat(i.finally),r=Cn.omit(Object.assign({},e.hook,u,{type:"error",original:e.hook,error:e}),"result");return On.call(n,t,r).catch(function(e){return r.error=e,r}).then(function(e){return c?void 0!==e.result?e:Promise.reject(e):void 0!==e.result?e.result:Promise.reject(e.error)})})}}},Ln=An.hookMixin=function(e){if("function"!=typeof e.hooks){e.methods=Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]&&e[t][Tn]}).reduce(function(t,n){return t[n]=e[n][Tn],t},e.methods||{}),Object.assign(e.methods,{find:["params"],get:["id","params"],create:["data","params"],update:["id","data","params"],patch:["id","data","params"],remove:["id","params"]});var t=this,n=Object.keys(e.methods),r=n.reduce(function(n,r){return"function"!=typeof e[r]?n:(n[r]=function(){var e=Array.from(arguments),n=this._super.bind(this);return Fn({app:t,service:this,method:r,original:n})({before:Sn(t,this,"before",r),after:Sn(t,this,"after",r,!0),error:Sn(t,this,"error",r,!0),finally:Sn(t,this,"finally",r,!0)}).apply(void 0,kn(e))},n)},{});jn(e,n,t.hookTypes),e.mixin(r)}};(An=function(){return function(e){Object.assign(e,{hookTypes:["before","after","error","finally"]}),jn(e,e.methods,e.hookTypes),e.mixins.push(Ln)}}).withHooks=Fn,An.ACTIVATE_HOOKS=Tn,An.activateHooks=function(e){return function(t){return Object.defineProperty(t,Tn,{value:e}),t}};var Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Nn(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var In=function(e,t){t=t||{};var n,r,o=void 0===e?"undefined":Pn(e);if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===o&&!1===isNaN(e))return t.long?(n=e,(r=Math.abs(n))>=864e5?Nn(n,r,864e5,"day"):r>=36e5?Nn(n,r,36e5,"hour"):r>=6e4?Nn(n,r,6e4,"minute"):r>=1e3?Nn(n,r,1e3,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=864e5?Math.round(e/864e5)+"d":t>=36e5?Math.round(e/36e5)+"h":t>=6e4?Math.round(e/6e4)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Dn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Mn={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Mn.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&(e=console).log.apply(e,arguments)},Mn.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Mn.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},Mn.save=function(e){try{e?Mn.storage.setItem("debug",e):Mn.storage.removeItem("debug")}catch(error){}},Mn.load=function(){var t=void 0;try{t=Mn.storage.getItem("debug")}catch(error){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},Mn.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Mn.storage=function(){try{return localStorage}catch(error){}}(),Mn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],(Mn=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var i=void 0;function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a.enabled){var o=a,s=Number(new Date),c=s-(i||s);o.diff=c,o.prev=i,o.curr=s,i=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;l++;var i=n.formatters[r];if("function"==typeof i){var a=t[l];e=i.call(o,a),t.splice(l,1),l--}return e}),n.formatArgs.call(o,t),(o.log||n.log).apply(o,t)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=t(e),a.destroy=r,a.extend=o,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){var e=[].concat(Dn(n.names.map(i)),Dn(n.skips.map(i).map(function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t=void 0,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,r=void 0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=In,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}(Mn)).formatters.j=function(e){try{return JSON.stringify(e)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this,e);var Rn=Mn("feathers:application"),Un=Jt.stripSlashes,$n=hn.extend({create:null}),qn={init:function(){Object.assign(this,{version:"3.3.1",methods:["find","get","create","update","patch","remove"],mixins:[],services:{},providers:[],_setup:!1,settings:{}}),this.configure(An()),this.configure(mn())},get:function(e){return this.settings[e]},set:function(e,t){return this.settings[e]=t,this},disable:function(e){return this.settings[e]=!1,this},disabled:function(e){return!this.settings[e]},enable:function(e){return this.settings[e]=!0,this},enabled:function(e){return!!this.settings[e]},configure:function(e){return e.call(this,this),this},service:function(e,t){if(void 0!==t)throw new Error("Registering a new service with `app.service(path, service)` is no longer supported. Use `app.use(path, service)` instead.");var n=Un(e)||"/",r=this.services[n];return void 0===r&&"function"==typeof this.defaultService?this.use("/"+n,this.defaultService(n)).service(n):r},use:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw new Error("'"+e+"' is not a valid service path.");var o=Un(e)||"/",i="function"==typeof t.service&&t.services,a=this.methods.concat("setup").some(function(e){return t&&"function"==typeof t[e]});if(i){var s=t;return Object.keys(s.services).forEach(function(e){return n.use(o+"/"+e,s.service(e))}),this}if(!a)throw new Error("Invalid service object passed for path `"+o+"`");var c=$n.isPrototypeOf(t)?t:$n.extend(t);return Rn("Registering new service at `"+o+"`"),this.mixins.forEach(function(e){return e.call(n,c,o,r)}),"function"==typeof c._setup&&c._setup(this,o),this.providers.forEach(function(e){return e.call(n,c,o,r)}),this._isSetup&&"function"==typeof c.setup&&(Rn("Setting up service for `"+o+"`"),c.setup(this,o)),this.services[o]=c,this},setup:function(){var e=this;return Object.keys(this.services).forEach(function(t){var n=e.services[t];Rn("Setting up service for `"+t+"`"),"function"==typeof n.setup&&n.setup(e,t)}),this._isSetup=!0,this}},Bn={},Hn=Jt.hooks,zn=An.ACTIVATE_HOOKS,Yn=An.activateHooks,Vn=Object.create(null);function Wn(){var e=Object.create(Vn);return hn.mixin(qn,e),e.init(),e}Wn.version="3.3.1",Wn.SKIP=Hn.SKIP,Wn.ACTIVATE_HOOKS=zn,Wn.activateHooks=Yn,(Bn=Wn).default=Wn;var Gn=String.prototype.replace,Jn=/%20/g,Zn={default:"RFC3986",formatters:{RFC1738:function(e){return Gn.call(e,Jn,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn=Object.prototype.hasOwnProperty,Qn=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),er=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},tr={arrayToObject:er,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],l=i[c];"object"===(void 0===l?"undefined":Xn(l))&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:i,prop:c}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Array.isArray(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(hc){return r}},encode:function(e,t,n){if(0===e.length)return e;var r="string"==typeof e?e:String(e);if("iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",i=0;i<r.length;++i){var a=r.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=r.charAt(i):a<128?o+=Qn[a]:a<2048?o+=Qn[192|a>>6]+Qn[128|63&a]:a<55296||a>=57344?o+=Qn[224|a>>12]+Qn[128|a>>6&63]+Qn[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&r.charCodeAt(i)),o+=Qn[240|a>>18]+Qn[128|a>>12&63]+Qn[128|a>>6&63]+Qn[128|63&a])}return o},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==(void 0===n?"undefined":Xn(n))){if(Array.isArray(t))t.push(n);else{if("object"!==(void 0===t?"undefined":Xn(t)))return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!Kn.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==(void 0===t?"undefined":Xn(t)))return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=er(t,r)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,o){Kn.call(t,o)?t[o]&&"object"===Xn(t[o])?t[o]=e(t[o],n,r):t.push(n):t[o]=n}),t):Object.keys(n).reduce(function(t,o){var i=n[o];return Kn.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t},o)}},nr=(Object.prototype.hasOwnProperty,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),rr={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},or=Array.isArray,ir=Array.prototype.push,ar=function(e,t){ir.apply(e,or(t)?t:[t])},sr=Date.prototype.toISOString,cr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:tr.encode,encodeValuesOnly:!1,indices:!1,serializeDate:function(e){return sr.call(e)},skipNulls:!1,strictNullHandling:!1},lr=function e(t,n,r,o,i,a,s,c,l,u,f,d,h){var p=t;if("function"==typeof s?p=s(n,p):p instanceof Date&&(p=u(p)),null===p){if(o)return a&&!d?a(n,cr.encoder,h):n;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||tr.isBuffer(p))return a?[f(d?n:a(n,cr.encoder,h))+"="+f(a(p,cr.encoder,h))]:[f(n)+"="+f(String(p))];var m,b=[];if(void 0===p)return b;if(Array.isArray(s))m=s;else{var v=Object.keys(p);m=c?v.sort(c):v}for(var g=0;g<m.length;++g){var y=m[g];i&&null===p[y]||(Array.isArray(p)?ar(b,e(p[y],r(n,y),r,o,i,a,s,c,l,u,f,d,h)):ar(b,e(p[y],n+(l?"."+y:"["+y+"]"),r,o,i,a,s,c,l,u,f,d,h)))}return b},ur=function(e,t){var n=e,r=t?tr.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===r.delimiter?cr.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:cr.strictNullHandling,a="boolean"==typeof r.skipNulls?r.skipNulls:cr.skipNulls,s="boolean"==typeof r.encode?r.encode:cr.encode,c="function"==typeof r.encoder?r.encoder:cr.encoder,l="function"==typeof r.sort?r.sort:null,u=void 0===r.allowDots?cr.allowDots:!!r.allowDots,f="function"==typeof r.serializeDate?r.serializeDate:cr.serializeDate,d="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:cr.encodeValuesOnly,h=r.charset||cr.charset;if(void 0!==r.charset&&"utf-8"!==r.charset&&"iso-8859-1"!==r.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0===r.format)r.format=Zn.default;else if(!Object.prototype.hasOwnProperty.call(Zn.formatters,r.format))throw new TypeError("Unknown format option provided.");var p,m,b=Zn.formatters[r.format];"function"==typeof r.filter?n=(m=r.filter)("",n):Array.isArray(r.filter)&&(p=m=r.filter);var v,g=[];if("object"!==(void 0===n?"undefined":nr(n))||null===n)return"";v=r.arrayFormat in rr?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var y=rr[v];p||(p=Object.keys(n)),l&&p.sort(l);for(var w=0;w<p.length;++w){var A=p[w];a&&null===n[A]||ar(g,lr(n[A],A,y,i,a,s?c:null,m,l,u,f,b,d,h))}var k=g.join(o),E=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&(E+="iso-8859-1"===h?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),k.length>0?E+k:""},fr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dr=Ct.Unavailable,hr=Jt._,pr=Jt.stripSlashes,mr=Ct.convert;function br(e){if("ECONNREFUSED"===e.code)throw new dr(e.message,hr.pick(e,"address","port","config"));throw mr(e)}var vr=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.name=pr(t.name),this.options=t.options,this.connection=t.connection,this.base=t.base+"/"+this.name}return fr(e,[{key:"makeUrl",value:function(e,t){e=e||{};var n=this.base;return null!=t&&(n+="/"+encodeURIComponent(t)),0!==Object.keys(e).length&&(n+="?"+ur(e)),n}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request({url:this.makeUrl(e.query),method:"GET",headers:Object.assign({},e.headers)},e).catch(br)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?Promise.reject(new Error("id for 'get' can not be undefined")):this.request({url:this.makeUrl(t.query,e),method:"GET",headers:Object.assign({},t.headers)},t).catch(br)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({url:this.makeUrl(t.query),body:e,method:"POST",headers:Object.assign({"Content-Type":"application/json"},t.headers)},t).catch(br)}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===e?Promise.reject(new Error("id for 'update' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(n.query,e),body:t,method:"PUT",headers:Object.assign({"Content-Type":"application/json"},n.headers)},n).catch(br)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===e?Promise.reject(new Error("id for 'patch' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(n.query,e),body:t,method:"PATCH",headers:Object.assign({"Content-Type":"application/json"},n.headers)},n).catch(br)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?Promise.reject(new Error("id for 'remove' can not be undefined, only 'null' when removing multiple entries")):this.request({url:this.makeUrl(t.query,e),method:"DELETE",headers:Object.assign({},t.headers)},t).catch(br)}}]),e}(),gr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),yr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),gr(t,[{key:"request",value:function(e,t){var n=this.connection,r=this.options.HttpHeaders;if(!n||!r)throw new Error("Please pass angular's 'httpClient' (instance) and and object with 'HttpHeaders' (class) to feathers-rest");var o=e.url,i=t.connection,a=void 0===i?{}:i,s=new r(Object.assign({Accept:"application/json"},this.options.headers,e.headers,a.headers)),c=Object.assign({body:e.body},t.connection,{headers:s});return new Promise(function(t,r){n.request(e.method,o,c).subscribe(t,r)}).catch(function(e){var t=e.error;if(t)throw"string"==typeof t?JSON.parse(t):t;throw e})}}]),t}(),wr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ar=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),wr(t,[{key:"request",value:function(e,t){var n=this.connection,r=this.options.Headers;if(!n||!r)throw new Error("Please pass angular's 'http' (instance) and and object with 'Headers' (class) to feathers-rest");var o=e.url,i=t.connection,a=void 0===i?{}:i,s=new r(Object.assign({Accept:"application/json"},this.options.headers,e.headers,a.headers)),c=Object.assign({method:e.method,body:e.body},a,{headers:s});return new Promise(function(e,t){n.request(o,c).subscribe(e,t)}).then(function(e){return e.json()}).catch(function(e){var t=e.response||e;throw t instanceof Error?t:t.json()||t})}}]),t}(),kr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Er=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),kr(t,[{key:"request",value:function(e,t){var n=Object.assign({url:e.url,method:e.method,data:e.body,headers:Object.assign({Accept:"application/json"},this.options.headers,e.headers)},t.connection);return this.connection.request(n).then(function(e){return e.data}).catch(function(e){var t=e.response||e;throw t instanceof Error?t:t.data||t})}}]),t}(),_r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),_r(t,[{key:"request",value:function(e,t){var n=Object.assign({},e,t.connection);return n.headers=Object.assign({Accept:"application/json"},this.options.headers,n.headers),e.body&&(n.body=JSON.stringify(e.body)),(0,this.connection)(e.url,n).then(this.checkStatus).then(function(e){return 204===e.status?null:e.json()})}},{key:"checkStatus",value:function(e){return e.ok?e:e.json().then(function(t){throw t.response=e,t})}}]),t}(),xr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Sr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),xr(t,[{key:"request",value:function(e,t){var n=this,r=t.connection,o=void 0===r?{}:r,i=Object.assign({},e.headers,this.options.headers,o.headers),a=Object.assign({dataType:e.type||"json"},o,e,{headers:i});return e.body&&(a.data=JSON.stringify(e.body),a.contentType="application/json"),delete a.type,delete a.body,new Promise(function(e,t){n.connection.ajax(a).then(e,function(e){var n=e.responseText;try{n=JSON.parse(n)}catch(hc){n=new Error(e.responseText)}n.xhr=n.response=e,t(n)})})}}]),t}(),Or=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),jr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),Or(t,[{key:"request",value:function(e,t){var n=this;return new Promise(function(r,o){var i=t.connection,a=void 0===i?{}:i,s=Object.assign({},e.headers,a.headers);n.connection(Object.assign({json:!0},e,t.connection,{headers:s}),function(e,t,n){return e?o(e):!e&&t.statusCode>=400?"string"==typeof n?o(new Error(n)):(n.response=t,o(Object.assign(new Error(n.message),n))):void r(n)})})}}]),t}(),Tr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Fr={},Lr={jquery:Sr,superagent:function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vr),Tr(t,[{key:"request",value:function(e,t){var n=this.connection(e.method,e.url).set(this.options.headers||{}).set("Accept","application/json").set(t.connection||{}).set(e.headers||{}).type(e.type||"json");return new Promise(function(t,r){n.set(e.headers),e.body&&n.send(e.body),n.end(function(e,n){if(e){try{var o=e.response;(e=JSON.parse(e.response.text)).response=o}catch(hc){}return r(e)}t(n&&n.body)})})}}]),t}(),request:jr,fetch:Cr,axios:Er,angular:Ar,angularHttpClient:yr};function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={Base:vr};return Object.keys(Lr).forEach(function(n){var r=Lr[n];t[n]=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error(n+" has to be provided to feathers-rest");var i=function(n){return new r({base:e,name:n,connection:t,options:o})},a=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.rest=t,this.defaultService=i};return a.Service=r,a.service=i,a}}),t}(Fr=Pr).default=Pr;var Nr={},Ir=Fr("https://nautilist-public.herokuapp.com"),Dr=Bn().configure(Ir.fetch(window.fetch));Dr.configure(Mt({header:"Authorization",prefix:"",path:"/authentication",jwtStrategy:"jwt",entity:"user",service:"users",cookie:"feathers-jwt",storageKey:"feathers-jwt",storage:localStorage})),Nr=Dr;var Mr;function Rr(e,t){e.api={projects:Nr.service("/api/projects"),links:Nr.service("/api/links"),lists:Nr.service("/api/lists"),tracks:Nr.service("/api/tracks"),collections:Nr.service("/api/collections"),users:Nr.service("users"),authmanagement:Nr.service("authmanagement"),authenticate:function(e){return void 0!==e?Nr.authenticate(e):Nr.authenticate()},logout:function(){return Nr.logout()}}}Mr=Rr,Rr.storeName="api";var Ur;function $r(e,t){e.projects=[],e.selectedProject={},e.links=[],e.selectedLink={},e.lists=[],e.selectedList={},e.tracks=[],e.selectedTrack={},e.collections=[],e.selectedCollection={},e.users=[],e.selectedUser={profile:{},links:[],lists:[],tracks:[],collections:[],listsFollowing:[],following:[],followers:[]},t.on("DOMContentLoaded",function(){t.on("fetch-home",function(){var n={query:{$limit:16}};e.api.lists.find(n).then(function(t){return e.lists=t.data.reverse(),e.api.links.find(n)}).then(function(t){return e.links=t.data.reverse(),e.api.users.find(n)}).then(function(n){e.users=n.data.reverse(),t.emit("render")}).catch(function(e){alert(e)})}),t.on("fetch-navsearch",function(n){var r={query:{$text:{$search:n.searchTerm}}};e.api.lists.find(r).then(function(t){return e.lists=t.data.reverse(),e.api.tracks.find(r)}).then(function(t){return e.tracks=t.data.reverse(),e.api.collections.find(r)}).then(function(t){return e.collections=t.data.reverse(),e.api.users.find(r)}).then(function(t){return e.users=t.data.reverse(),e.api.links.find(r)}).then(function(n){e.links=n.data.reverse(),t.emit("pushState","/browse")}).catch(function(e){console.log(e),alert(e)})}),t.on("fetch-links",function(){e.api.links.find({}).then(function(n){e.links=n.data.reverse(),t.emit("render")}).catch(function(e){console.log("could not find links")})}),t.on("fetch-lists",function(){e.api.lists.find({}).then(function(n){e.lists=n.data.reverse(),t.emit("render")}).catch(function(e){console.log("could not find lists")})}),t.on("fetch-link",function(n){e.api.links.get(n).then(function(n){e.selectedLink=n,t.emit("render")}).catch(function(e){alert(e)})}),t.on("fetch-list",function(n){e.api.lists.get(n).then(function(n){e.selectedList=n,t.emit("render")}).catch(function(e){alert(e)})}),t.on("fetch-track",function(n){e.api.tracks.get(n).then(function(n){e.selectedTrack=n,t.emit("render")}).catch(function(e){alert(e)})}),t.on("fetch-projects",function(){e.api.projects.find({}).then(function(n){e.projects=n.data.reverse(),t.emit("render")}).catch(function(e){console.log("could not find projects")})}),t.on("fetch-collections",function(){e.api.collections.find({}).then(function(n){e.collections=n.data.reverse(),t.emit("render")}).catch(function(e){console.log("could not find collections")})}),t.on("fetch-collection",function(n){console.log(n),e.api.collections.get(n).then(function(n){e.selectedCollection=n,t.emit("render")}).catch(function(e){console.log(e,"could not find collection")})}),t.on("fetch-project",function(n){console.log(n),e.api.projects.get(n).then(function(n){e.selectedProject=n,t.emit("render")}).catch(function(e){console.log(e,"could not find project")})}),t.on("fetch-users",function(){e.api.users.find({}).then(function(n){e.users=n.data,t.emit("render")}).catch(function(e){console.log(e,"could not find project")})}),t.on("fetch-user",function(n){var r={query:{username:n}},o={query:{$or:[{owner:null},{collaborators:{$in:null}}],$sort:{updatedAt:-1}}},i={query:{followers:{$in:[]}}};e.api.users.find(r).then(function(t){return e.selectedUser.profile=t.data[0],o.query.$or[0].owner=e.selectedUser.profile._id,o.query.$or[1].collaborators.$in=[e.selectedUser.profile._id],e.api.links.find(o)}).then(function(t){return e.selectedUser.links=t.data,e.api.lists.find(o)}).then(function(t){return e.selectedUser.lists=t.data,i.query.followers.$in=[e.selectedUser.profile._id],e.api.lists.find(i)}).then(function(n){e.selectedUser.listsFollowing=n.data,t.emit("render")}).catch(function(e){alert(e)})})})}Ur=$r,$r.storeName="public";var qr;function Br(e,t){var n=new function(){this.signup=function(n){var r={username:n.get("username"),email:n.get("email"),password:n.get("password")};e.api.users.create(r).then(function(){alert("Sign up successful - you will receive an email from hello.nautilists@gmail.com to verify your account"),t.emit("pushState","/verify")}).catch(function(e){return alert("Something went wrong!",e),error})},this.checkLogin=function(n){e.api.authenticate().then(function(n){e.user.username=n.username,e.user.id=n.id,e.user.authenticated=!0,t.emit("render")}).catch(function(t){return console.log("Sorry, you're not logged in!"),e.user.authenticated=!1,t})},this.login=function(t){var n={username:t.get("username"),email:t.get("email"),password:t.get("password")},r=Object.assign({strategy:"local"},n);e.api.authenticate(r).then(function(t){e.user.authenticated=!0,e.user.username=t.username,e.user.id=t.id,alert("log in successful!"),window.location="/"}).catch(function(t){console.log("Authentication error",t),alert(t),e.user.authenticated=!1})},this.logout=function(){e.api.logout(),e.user.username=null,e.user.authenticated=!1,e.user.id=null,t.emit("pushState","/")},this.sendVerificationToken=function(t){var n={action:"verifySignupLong",value:e.query.token};e.api.authmanagement.create(n).then(function(e){}).catch(function(e){return e})},this.sendResetPassword=function(t){var n={action:"sendResetPwd",value:{email:t.get("email")}};e.api.authmanagement.create(n).then(function(e){alert("Sending reset password url to your email inbox - please check your email")}).catch(function(e){return e})},this.resetPassword=function(t){var n={action:"resetPwdLong",value:{token:e.query.token,password:t.get("password")}};e.api.authmanagement.create(n).then(function(e){window.location="/login"}).catch(function(e){return e})}};e.user={username:"",authenticated:"",id:""},e.events.user_signup="user:signup",e.events.user_login="user:login",e.events.user_logout="user:logout",e.events.user_resetPassword="user:resetPassword",e.events.user_sendResetPassword="user:sendResetPassword",e.events.user_sendVerificationToken="user:sendVerificationToken",n.checkLogin(),t.on(e.events.user_signup,n.signup),t.on(e.events.user_login,n.login),t.on(e.events.user_logout,n.logout),t.on(e.events.user_resetPassword,n.resetPassword),t.on(e.events.user_sendResetPassword,n.sendResetPassword),t.on(e.events.user_sendVerificationToken,n.sendVerificationToken)}qr=Br,Br.storeName="user";var Hr=/\n[\s]+$/,zr=/^\n[\s]+/,Yr=/[\s]+$/,Vr=/^[\s]+/,Wr=/[\n\s]+/g,Gr=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],Jr=["code","pre","textarea"],Zr=function e(t,n){if(Array.isArray(n))for(var r,o,i=t.nodeName.toLowerCase(),a=!1,s=0,c=n.length;s<c;s++){var l=n[s];if(Array.isArray(l))e(t,l);else{("number"==typeof l||"boolean"==typeof l||"function"==typeof l||l instanceof Date||l instanceof RegExp)&&(l=l.toString());var u=t.childNodes[t.childNodes.length-1];if("string"==typeof l)a=!0,u&&"#text"===u.nodeName?u.nodeValue+=l:(l=document.createTextNode(l),t.appendChild(l),u=l),s===c-1&&(a=!1,-1===Gr.indexOf(i)&&-1===Jr.indexOf(i)?""===(r=u.nodeValue.replace(zr,"").replace(Yr,"").replace(Hr,"").replace(Wr," "))?t.removeChild(u):u.nodeValue=r:-1===Jr.indexOf(i)&&(o=0===s?"":" ",r=u.nodeValue.replace(zr,o).replace(Vr," ").replace(Yr,"").replace(Hr,"").replace(Wr," "),u.nodeValue=r));else if(l&&l.nodeType){a&&(a=!1,-1===Gr.indexOf(i)&&-1===Jr.indexOf(i)?""===(r=u.nodeValue.replace(zr,"").replace(Hr,"").replace(Wr," "))?t.removeChild(u):u.nodeValue=r:-1===Jr.indexOf(i)&&(r=u.nodeValue.replace(Vr," ").replace(zr,"").replace(Hr,"").replace(Wr," "),u.nodeValue=r));var f=l.nodeName;f&&(i=f.toLowerCase()),t.appendChild(l)}}}},Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Kr(e,t){return function(){var e=document.createElement("li");e.setAttribute("data-db",arguments[5]),e.setAttribute("id",arguments[6]),e.setAttribute("class","item pa2 ba bw1 mb1 mt1 bg-white");var t=document.createElement("div");t.setAttribute("class","w-100 flex flex-row justify-between items-start");var n=document.createElement("a");n.setAttribute("data-name",arguments[0]),n.setAttribute("href",arguments[1]),n.setAttribute("class","link underline black f7 b"),Zr(n,[arguments[2]]),Zr(t,["\n      ",n,"\n    "]);var r=document.createElement("p");return r.setAttribute("data-description",arguments[3]),r.setAttribute("class","ma0 f7"),Zr(r,[arguments[4]]),Zr(e,["\n    ",t,"\n    ",r,"\n  "]),e}(t.name,t.url,t.name,t.description,t.description,t.featureType||"projects",t._id)}var Qr={removeFromTree:function e(t,n){var r=Object.assign({},t);return r.clientId==n?{type:"list",name:"",description:"",features:[{url:"#",name:"",description:""}]}:(r.hasOwnProperty("features")&&(r.features=r.features.filter(function(e){return e.clientId!==n}).map(function(t){return e(t,n)})),r)},removeClientId:function e(t){var n=Object.assign({},t);return n.hasOwnProperty("clientId")&&delete n.clientId,n.hasOwnProperty("features")&&(n.features=n.features.map(function(t){return e(t)})),n},updateFeature:function e(t,n,r){var o=Object.assign({},t);return o.clientId===n?(console.log(o.clientId," vs ",n),"list"!==o.type&&(o.url=r.url),o.name=r.name,o.description=r.description,o):(o.hasOwnProperty("features")&&(o.features=o.features.map(function(t){return e(t,n,r)})),o)},pushNewFeature:function e(t,n,r){var o=Object.assign({},t);return o.clientId===n?(r.depth=o.depth+1,r.hasOwnProperty("features")&&(r.features[0].depth=r.depth+1),o.features.push(r),o):(o.hasOwnProperty("features")&&(o.features=o.features.map(function(t){return e(t,n,r)})),o)},moveFeature:function e(t,n,r,o){var i,a,s,c,l=Object.assign({},t);if(l.clientId===n){var u=(i=l.features,a=r,s=o,(c=Array.from(i)).splice(s,0,c.splice(a,1)[0]),c);return l.features=u,l}return l.hasOwnProperty("features")&&(l.features=l.features.map(function(t){return e(t,n,r,o)})),l},findFeature:function e(t,n){var r=Object.assign({},t),o=void 0,i=void 0;if(r.clientId===n)return console.log("found",n),r;for(o in r)if(r.hasOwnProperty(o)&&"object"===Xr(r[o])&&(i=e(r[o],n)))return i;return i},createList:function e(t){return t?function(){var e=document.createElement("ul");return e.setAttribute("class","list pl0 list-container"),Zr(e,["\n    ",arguments[0],"\n  "]),e}(t.features.map(function(t){return t.hasOwnProperty("features")?function(){var e=document.createElement("li");e.setAttribute("data-db",arguments[5]),e.setAttribute("id",arguments[6]),e.setAttribute("class","item mt2 mb4");var t=document.createElement("fieldset");t.setAttribute("class","ba b bw1 bg-near-white b--black dropshadow");var n=document.createElement("legend");n.setAttribute("data-name",arguments[0]),n.setAttribute("class","bg-white ba bw1 b--black pl2 pr2"),Zr(n,[arguments[1]]);var r=document.createElement("p");return r.setAttribute("data-description",arguments[2]),r.setAttribute("class","ma0 pl2 mb3"),Zr(r,[arguments[3]]),Zr(t,["\n                ",n,"\n                ",r,"\n                ",arguments[4],"\n              "]),Zr(e,["\n              ",t,"\n            "]),e}(t.name,t.name,t.description,t.description,e(t),t.featureType||"projects",t._id):t.hasOwnProperty("json")?function(){var e=document.createElement("li");e.setAttribute("data-db",arguments[5]),e.setAttribute("id",arguments[6]),e.setAttribute("class","item mt2 mb4");var t=document.createElement("fieldset");t.setAttribute("class","ba b bw1 bg-near-white b--black dropshadow");var n=document.createElement("legend");n.setAttribute("data-name",arguments[0]),n.setAttribute("class","bg-white ba bw1 b--black pl2 pr2"),Zr(n,[arguments[1]]);var r=document.createElement("p");return r.setAttribute("data-description",arguments[2]),r.setAttribute("class","ma0 pl2 mb3"),Zr(r,[arguments[3]]),Zr(t,["\n              ",n,"\n              ",r,"\n              ",arguments[4],"\n            "]),Zr(e,["\n            ",t,"\n          "]),e}(t.name,t.name,t.description,t.description,e(t.json),t.featureType||"projects",t._id):Kr(0,t)})):""},createListItem:Kr,listToJson:function(e){var t=featureArray.slice(0),n=void 0;return n=e.childNodes,n=[].slice.call(n),t},removeIds:function e(t){var n=Object.assign({},t);for(var r in n)"_id"===r?delete n[r]:"object"===Xr(n[r])&&e(n[r]);return n}},eo={exports:{}};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="Expected a function",r=1,o=2,i=1/0,a=9007199254740991,s="[object Arguments]",c="[object Array]",l="[object Boolean]",u="[object Date]",f="[object Error]",d="[object Function]",h="[object GeneratorFunction]",p="[object Map]",m="[object Number]",b="[object Object]",v="[object RegExp]",g="[object Set]",y="[object String]",w="[object Symbol]",A="[object ArrayBuffer]",k="[object DataView]",E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/,C=/^\./,x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[s]=T[c]=T[A]=T[l]=T[k]=T[u]=T[f]=T[d]=T[p]=T[m]=T[b]=T[v]=T[g]=T[y]=T["[object WeakMap]"]=!1;var F="object"==(void 0===e?"undefined":t(e))&&e&&e.Object===Object&&e,L="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,P=F||L||Function("return this")(),N="object"==(void 0===eo.exports?"undefined":t(eo.exports))&&eo.exports&&!eo.exports.nodeType&&eo.exports,I=N&&"object"==t(eo)&&eo&&!eo.nodeType&&eo,D=I&&I.exports===N&&F.process,M=function(){try{return D&&D.binding("util")}catch(hc){}}(),R=M&&M.isTypedArray;function U(e,t,n,r){for(var o=-1,i=e?e.length:0;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function $(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function q(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(hc){}return t}function B(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var z,Y,V,W=Array.prototype,G=Function.prototype,J=Object.prototype,Z=P["__core-js_shared__"],X=(z=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",K=G.toString,Q=J.hasOwnProperty,ee=J.toString,te=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=P.Symbol,re=P.Uint8Array,oe=J.propertyIsEnumerable,ie=W.splice,ae=(Y=Object.keys,V=Object,function(e){return Y(V(e))}),se=Me(P,"DataView"),ce=Me(P,"Map"),le=Me(P,"Promise"),ue=Me(P,"Set"),fe=Me(P,"WeakMap"),de=Me(Object,"create"),he=Ye(se),pe=Ye(ce),me=Ye(le),be=Ye(ue),ve=Ye(fe),ge=ne?ne.prototype:void 0,ye=ge?ge.valueOf:void 0,we=ge?ge.toString:void 0;function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ee;++t<n;)this.add(e[t])}function Ce(e){this.__data__=new ke(e)}function xe(e,t){for(var n=e.length;n--;)if(Je(e[n][0],t))return n;return-1}function Se(e,t,n,r){return je(e,function(e,o,i){t(r,e,n(e),i)}),r}Ae.prototype.clear=function(){this.__data__=de?de(null):{}},Ae.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ae.prototype.get=function(e){var t=this.__data__;if(de){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Q.call(t,e)?t[e]:void 0},Ae.prototype.has=function(e){var t=this.__data__;return de?void 0!==t[e]:Q.call(t,e)},Ae.prototype.set=function(e,t){return this.__data__[e]=de&&void 0===t?"__lodash_hash_undefined__":t,this},ke.prototype.clear=function(){this.__data__=[]},ke.prototype.delete=function(e){var t=this.__data__,n=xe(t,e);return!(n<0||(n==t.length-1?t.pop():ie.call(t,n,1),0))},ke.prototype.get=function(e){var t=this.__data__,n=xe(t,e);return n<0?void 0:t[n][1]},ke.prototype.has=function(e){return xe(this.__data__,e)>-1},ke.prototype.set=function(e,t){var n=this.__data__,r=xe(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ee.prototype.clear=function(){this.__data__={hash:new Ae,map:new(ce||ke),string:new Ae}},Ee.prototype.delete=function(e){return De(this,e).delete(e)},Ee.prototype.get=function(e){return De(this,e).get(e)},Ee.prototype.has=function(e){return De(this,e).has(e)},Ee.prototype.set=function(e,t){return De(this,e).set(e,t),this},_e.prototype.add=_e.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},_e.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.clear=function(){this.__data__=new ke},Ce.prototype.delete=function(e){return this.__data__.delete(e)},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ke){var r=n.__data__;if(!ce||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ee(r)}return n.set(e,t),this};var Oe,je=(Oe=function(e,t){return e&&Te(e,t,it)},function(e,t){if(null==e)return e;if(!Ke(e))return Oe(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e}),Te=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e};function Fe(e,t){for(var n=0,r=(t=$e(t,e)?[t]:Ne(t)).length;null!=e&&n<r;)e=e[ze(t[n++])];return n&&n==r?e:void 0}function Le(e,t){return null!=e&&t in Object(e)}function Pe(e,t,n,i,a){return e===t||(null==e||null==t||!tt(e)&&!nt(t)?e!=e&&t!=t:function(e,t,n,i,a,d){var h=Xe(e),E=Xe(t),_=c,C=c;h||(_=(_=Re(e))==s?b:_),E||(C=(C=Re(t))==s?b:C);var x=_==b&&!q(e),S=C==b&&!q(t),O=_==C;if(O&&!x)return d||(d=new Ce),h||ot(e)?Ie(e,t,n,i,a,d):function(e,t,n,i,a,s,c){switch(_){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case A:return!(e.byteLength!=t.byteLength||!i(new re(e),new re(t)));case l:case u:case m:return Je(+e,+t);case f:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case p:var d=B;case g:var h=s&o;if(d||(d=H),e.size!=t.size&&!h)return!1;var b=c.get(e);if(b)return b==t;s|=r,c.set(e,t);var E=Ie(d(e),d(t),i,a,s,c);return c.delete(e),E;case w:if(ye)return ye.call(e)==ye.call(t)}return!1}(e,t,0,n,i,a,d);if(!(a&o)){var j=x&&Q.call(e,"__wrapped__"),T=S&&Q.call(t,"__wrapped__");if(j||T){var F=j?e.value():e,L=T?t.value():t;return d||(d=new Ce),n(F,L,i,a,d)}}return!!O&&(d||(d=new Ce),function(e,t,n,r,i,a){var s=i&o,c=it(e),l=c.length;if(l!=it(t).length&&!s)return!1;for(var u=l;u--;){var f=c[u];if(!(s?f in t:Q.call(t,f)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var h=!0;a.set(e,t),a.set(t,e);for(var p=s;++u<l;){var m=e[f=c[u]],b=t[f];if(r)var v=s?r(b,m,f,t,e,a):r(m,b,f,e,t,a);if(!(void 0===v?m===b||n(m,b,r,i,a):v)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,i,a,d))}(e,t,Pe,n,i,a))}function Ne(e){return Xe(e)?e:He(e)}function Ie(e,t,n,i,a,s){var c=a&o,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var f=s.get(e);if(f&&s.get(t))return f==t;var d=-1,h=!0,p=a&r?new _e:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var m=e[d],b=t[d];if(i)var v=c?i(b,m,d,t,e,s):i(m,b,d,e,t,s);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!$(t,function(e,t){if(!p.has(t)&&(m===e||n(m,e,i,a,s)))return p.add(t)})){h=!1;break}}else if(m!==b&&!n(m,b,i,a,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function De(e,n){var r,o,i=e.__data__;return("string"==(o=void 0===(r=n)?"undefined":t(r))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof n?"string":"hash"]:i.map}function Me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!tt(e)||(t=e,X&&X in t))&&(Qe(e)||q(e)?te:O).test(Ye(e));var t}(n)?n:void 0}var Re=function(e){return ee.call(e)};function Ue(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}function $e(e,n){if(Xe(e))return!1;var r=void 0===e?"undefined":t(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!rt(e))||_.test(e)||!E.test(e)||null!=n&&e in Object(n)}function qe(e){return e==e&&!tt(e)}function Be(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}(se&&Re(new se(new ArrayBuffer(1)))!=k||ce&&Re(new ce)!=p||le&&"[object Promise]"!=Re(le.resolve())||ue&&Re(new ue)!=g||fe&&"[object WeakMap]"!=Re(new fe))&&(Re=function(e){var t=ee.call(e),n=t==b?e.constructor:void 0,r=n?Ye(n):void 0;if(r)switch(r){case he:return k;case pe:return p;case me:return"[object Promise]";case be:return g;case ve:return"[object WeakMap]"}return t});var He=Ge(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(rt(e))return we?we.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t);var n=[];return C.test(e)&&n.push(""),e.replace(x,function(e,t,r,o){n.push(r?o.replace(S,"$1"):t||e)}),n});function ze(e){if("string"==typeof e||rt(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function Ye(e){if(null!=e){try{return K.call(e)}catch(hc){}try{return e+""}catch(hc){}}return""}var Ve,We=(Ve=function(e,t,n){e[n]=t},function(e,n){var i,a,s,c,l,u={};return(Xe(e)?U:Se)(e,Ve,"function"==typeof(i=n)?i:null==i?at:"object"==(void 0===i?"undefined":t(i))?Xe(i)?function(e,t){return $e(e)&&qe(t)?Be(ze(e),t):function(n){var i=function(e,t,n){var r=null==e?void 0:Fe(e,t);return void 0===r?void 0:r}(n,e);return void 0===i&&i===t?function(e,t){return null!=e&&function(e,t,n){for(var r,o=-1,i=(t=$e(t,e)?[t]:Ne(t)).length;++o<i;){var a=ze(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(i=e?e.length:0)&&et(i)&&Ue(a,i)&&(Xe(e)||Ze(e))}(e,t,Le)}(n,e):Pe(t,i,void 0,r|o)}}(i[0],i[1]):1==(s=function(e){for(var t=it(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,qe(o)]}return t}(a=i)).length&&s[0][2]?Be(s[0][0],s[0][1]):function(e){return e===a||function(e,t,n,i){var a=n.length,s=a;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var l=(c=n[a])[0],u=e[l],f=c[1];if(c[2]){if(void 0===u&&!(l in e))return!1}else{var d,h=new Ce;if(!(void 0===d?Pe(f,u,void 0,r|o,h):d))return!1}}return!0}(e,0,s)}:$e(c=i)?(l=ze(c),function(e){return null==e?void 0:e[l]}):function(e){return function(t){return Fe(t,e)}}(c),u)});function Ge(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return r.cache=new(Ge.Cache||Ee),r}function Je(e,t){return e===t||e!=e&&t!=t}function Ze(e){return function(e){return nt(e)&&Ke(e)}(e)&&Q.call(e,"callee")&&(!oe.call(e,"callee")||ee.call(e)==s)}Ge.Cache=Ee;var Xe=Array.isArray;function Ke(e){return null!=e&&et(e.length)&&!Qe(e)}function Qe(e){var t=tt(e)?ee.call(e):"";return t==d||t==h}function et(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function tt(e){var n=void 0===e?"undefined":t(e);return!!e&&("object"==n||"function"==n)}function nt(e){return!!e&&"object"==(void 0===e?"undefined":t(e))}function rt(e){return"symbol"==(void 0===e?"undefined":t(e))||nt(e)&&ee.call(e)==w}var ot=R?function(e){return function(t){return e(t)}}(R):function(e){return nt(e)&&et(e.length)&&!!T[ee.call(e)]};function it(e){return Ke(e)?function(e,t){var n=Xe(e)||Ze(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!Q.call(e,i)||o&&("length"==i||Ue(i,r))||n.push(i);return n}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||J))return ae(e);var t,n,r=[];for(var o in Object(e))Q.call(e,o)&&"constructor"!=o&&r.push(o);return r}(e)}function at(e){return e}eo.exports=We}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),eo=eo.exports;"function"==typeof Symbol&&Symbol.iterator;"function"==typeof Symbol&&Symbol.iterator;var to={exports:{}};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:b,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:b,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:b,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||A.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.tables?this.rules=n.tables:this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=d(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=d(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=d(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=d(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=d(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag",n._tag).getRegex(),n.blockquote=d(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=v({},n),n.gfm=v({},n.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=d(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=v({},n.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=v({},n.normal,{html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,o,i,a,s,c,l,u,f,d,h,p,m,b,v,w;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:y(i,"\n")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))&&(c={type:"table",header:g(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(i[0].length),h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=g(c.cells[h],c.header.length);this.tokens.push(c)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),l={type:"list_start",ordered:b=(a=i[2]).length>1,start:b?+a:"",loose:!1},this.tokens.push(l),u=[],r=!1,m=(i=i[0].match(this.rules.item)).length,h=0;h<m;h++)d=(c=i[h]).length,~(c=c.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+d+"}","gm"),"")),h!==m-1&&(s=n.bullet.exec(i[h+1])[0],(a.length>1?1===s.length:s.length>1||this.options.smartLists&&s!==a)&&(e=i.slice(h+1).join("\n")+e,h=m-1)),o=r||/\n\n(?!\s*$)/.test(c),h!==m-1&&(r="\n"===c.charAt(c.length-1),o||(o=r)),o&&(l.loose=!0),w=void 0,(v=/^\[[ xX]\] /.test(c))&&(w=" "!==c[1],c=c.replace(/^\[[ xX]\] +/,"")),f={type:"list_item_start",task:v,checked:w,loose:o},u.push(f),this.tokens.push(f),this.token(c,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(m=u.length,h=0;h<m;h++)u[h].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),p=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:i[2],title:i[3]});else if(t&&(i=this.rules.table.exec(e))&&(c={type:"table",header:g(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(i[0].length),h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=g(c.cells[h].replace(/^ *\| *| *\| *$/g,""),c.header.length);this.tokens.push(c)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var o={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:b,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:b,text:/^(`+|[^`])[\s\S]*?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function i(e,t){if(this.options=t||A.defaults,this.links=e,this.rules=o.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=o.pedantic:this.options.gfm&&(this.options.breaks?this.rules=o.breaks:this.rules=o.gfm)}function a(e){this.options=e||A.defaults}function s(){}function c(e){this.tokens=[],this.token=null,this.options=e||A.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new l}function l(){this.seen={}}function u(e,t){if(t){if(u.escapeTest.test(e))return e.replace(u.escapeReplace,function(e){return u.replacements[e]})}else if(u.escapeTestNoEncode.test(e))return e.replace(u.escapeReplaceNoEncode,function(e){return u.replacements[e]});return e}function f(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function d(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function h(e,t,n){if(e){try{var r=decodeURIComponent(f(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(hc){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!m.test(n)&&(n=function(e,t){return p[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?p[" "+e]=e+"/":p[" "+e]=y(e,"/",!0)),e=p[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(hc){return null}return n}o._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",o.em=d(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=d(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=d(o.tag).replace("comment",n._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,o._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=d(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=d(o.reflink).replace("label",o._label).getRegex(),o.normal=v({},o),o.pedantic=v({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=v({},o.normal,{escape:d(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:d(o.text).replace("]|","~]|").replace("|$","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|$").getRegex()}),o.gfm.url=d(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=v({},o.gfm,{br:d(o.br).replace("{2,}","*").getRegex(),text:d(o.gfm.text).replace("{2,}","*").getRegex()}),i.rules=o,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,r,o,a,s,c="";e;)if(a=this.rules.escape.exec(e))e=e.substring(a[0].length),c+=u(a[1]);else if(a=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(a[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(a[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.inRawBlock=!1),e=e.substring(a[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):u(a[0]):a[0];else if(a=this.rules.link.exec(e)){var l=w(a[2],"()");if(l>-1){var f=a[2].length-l;a[2]=a[2].substring(0,l),a[0]=a[0].substring(0,a[0].length-f)}e=e.substring(a[0].length),this.inLink=!0,r=a[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],o=t[3]):o="":o=a[3]?a[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(a,{href:i.escapes(r),title:i.escapes(o)}),this.inLink=!1}else if((a=this.rules.reflink.exec(e))||(a=this.rules.nolink.exec(e))){if(e=e.substring(a[0].length),t=(a[2]||a[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){c+=a[0].charAt(0),e=a[0].substring(1)+e;continue}this.inLink=!0,c+=this.outputLink(a,t),this.inLink=!1}else if(a=this.rules.strong.exec(e))e=e.substring(a[0].length),c+=this.renderer.strong(this.output(a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.em.exec(e))e=e.substring(a[0].length),c+=this.renderer.em(this.output(a[6]||a[5]||a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.code.exec(e))e=e.substring(a[0].length),c+=this.renderer.codespan(u(a[2].trim(),!0));else if(a=this.rules.br.exec(e))e=e.substring(a[0].length),c+=this.renderer.br();else if(a=this.rules.del.exec(e))e=e.substring(a[0].length),c+=this.renderer.del(this.output(a[1]));else if(a=this.rules.autolink.exec(e))e=e.substring(a[0].length),r="@"===a[2]?"mailto:"+(n=u(this.mangle(a[1]))):n=u(a[1]),c+=this.renderer.link(r,null,n);else if(this.inLink||!(a=this.rules.url.exec(e))){if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.inRawBlock?c+=this.renderer.text(a[0]):c+=this.renderer.text(u(this.smartypants(a[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===a[2])r="mailto:"+(n=u(a[0]));else{do{s=a[0],a[0]=this.rules._backpedal.exec(a[0])[0]}while(s!==a[0]);n=u(a[0]),r="www."===a[1]?"http://"+n:n}e=e.substring(a[0].length),c+=this.renderer.link(r,null,n)}return c},i.escapes=function(e){return e?e.replace(i.rules._escapes,"$1"):e},i.prototype.outputLink=function(e,t){var n=t.href,r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},a.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,r);null!=o&&o!==e&&(n=!0,e=o)}return r?'<pre><code class="'+this.options.langPrefix+u(r,!0)+'">'+(n?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,n){if(null===(e=h(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+u(e)+'"';return t&&(r+=' title="'+t+'"'),r+">"+n+"</a>"},a.prototype.image=function(e,t,n){if(null===(e=h(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")},a.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,v({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,f(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,o="",i="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(o,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var a=this.token.ordered,s=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,a,s);case"list_item_start":i="";var c=this.token.loose;for(this.token.task&&(i+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)i+=c||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(i);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var l='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(l);console.log(l)}},l.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var p={},m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function b(){}function v(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var o=e.charAt(e.length-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function w(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function A(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null);var o,i,a=(t=v({},A.defaults,t||{})).highlight,s=0;try{o=r.lex(e,t)}catch(hc){return n(hc)}i=o.length;var l=function(e){if(e)return t.highlight=a,n(e);var r;try{r=c.parse(o,t)}catch(hc){e=hc}return t.highlight=a,e?n(e):n(null,r)};if(!a||a.length<3)return l();if(delete t.highlight,!i)return l();for(;s<o.length;s++)!function(e){"code"!==e.type?--i||l():a(e.text,e.lang,function(t,n){return t?l(t):null==n||n===e.text?--i||l():(e.text=n,e.escaped=!0,void(--i||l()))})}(o[s])}else try{return t&&(t=v({},A.defaults,t)),c.parse(r.lex(e,t),t)}catch(hc){if(hc.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||A.defaults).silent)return"<p>An error occurred:</p><pre>"+u(hc.message+"",!0)+"</pre>";throw hc}}b.exec=b,A.options=A.setOptions=function(e){return v(A.defaults,e),A},A.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new a,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},A.defaults=A.getDefaults(),A.Parser=c,A.parser=c.parse,A.Renderer=a,A.TextRenderer=s,A.Lexer=r,A.lexer=r.lex,A.InlineLexer=i,A.inlineLexer=i.output,A.Slugger=l,A.parse=A,"object"===(void 0===to.exports?"undefined":t(to.exports))?to.exports=A:"function"==typeof define&&define.amd?define(function(){return A}):e.marked=A}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),to=to.exports;var no,ro,oo,io=1,ao={nextValue:function(){return(io=(9301*io+49297)%233280)/233280},seed:function(e){io=e}},so="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function co(){oo=!1}function lo(e){if(e){if(e!==no){if(e.length!==so.length)throw new Error("Custom alphabet for shortid must be "+so.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+so.length+" unique characters. These characters were not unique: "+t.join(", "));no=e,co()}}else no!==so&&(no=so,co())}function uo(){return oo||(oo=function(){no||lo(so);for(var e,t=no.split(""),n=[],r=ao.nextValue();t.length>0;)r=ao.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}var fo,ho,po={get:function(){return no||so},characters:function(e){return lo(e),no},seed:function(e){ao.seed(e),ro!==e&&(co(),ro=e)},lookup:function(e){return uo()[e]},shuffled:uo},mo=function(e,t,n){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,o=Math.ceil(1.6*r*n/t.length),i="";;)for(var a=e(o),s=0;s<o;s++){var c=a[s]&r;if(t[c]&&(i+=t[c]).length===n)return i}},bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo="object"===("undefined"==typeof window?"undefined":bo(window))&&(window.crypto||window.msCrypto);ho=vo&&vo.getRandomValues?function(e){return vo.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},fo=ho;var go,yo,wo=function(e){for(var t,n=0,r="";!t;)r+=mo(fo,po.get(),1),t=e<Math.pow(16,n+1),n++;return r},Ao=function(e){var t="",n=Math.floor(.001*(Date.now()-1459707606518));return n===yo?go++:(go=0,yo=n),t+=wo(6),t+=wo(e),go>0&&(t+=wo(go)),t+wo(n)},ko={},Eo=0;function _o(){return Ao(Eo)}(ko=_o).generate=_o,ko.seed=function(e){return po.seed(e),ko},ko.worker=function(e){return Eo=e,ko},ko.characters=function(e){return void 0!==e&&po.characters(e),po.shuffled()},ko.isValid=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+po.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))};"function"==typeof Symbol&&Symbol.iterator;var Co={},xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function So(e){return null==e}Co.isNothing=So,Co.isObject=function(e){return"object"===(void 0===e?"undefined":xo(e))&&null!==e},Co.toArray=function(e){return Array.isArray(e)?e:So(e)?[]:[e]},Co.repeat=function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},Co.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},Co.extend=function(e,t){var n,r,o,i;if(t)for(n=0,r=(i=Object.keys(t)).length;n<r;n+=1)e[o=i[n]]=t[o];return e};var Oo={};function jo(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}jo.prototype=Object.create(Error.prototype),jo.prototype.constructor=jo,jo.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},Oo=jo;var To=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],Fo=["scalar","sequence","mapping"],Lo=function(e,t){var n,r;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===To.indexOf(t))throw new Oo('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(n=t.styleAliases||null,r={},null!==n&&Object.keys(n).forEach(function(e){n[e].forEach(function(t){r[String(t)]=e})}),r),-1===Fo.indexOf(this.kind))throw new Oo('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')},Po={};function No(e,t,n){var r=[];return e.include.forEach(function(e){n=No(e,t,n)}),e[t].forEach(function(e){n.forEach(function(t,n){t.tag===e.tag&&t.kind===e.kind&&r.push(n)}),n.push(e)}),n.filter(function(e,t){return-1===r.indexOf(t)})}function Io(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new Oo("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=No(this,"implicit",[]),this.compiledExplicit=No(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{}};function r(e){n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(this.compiledImplicit,this.compiledExplicit)}Io.DEFAULT=null,Io.create=function(){var e,t;switch(arguments.length){case 1:e=Io.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new Oo("Wrong number of arguments for Schema.create function")}if(e=Co.toArray(e),t=Co.toArray(t),!e.every(function(e){return e instanceof Io}))throw new Oo("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof Lo}))throw new Oo("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Io({include:e,explicit:t})},Po=Io;var Do=new Lo("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),Mo=new Lo("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),Ro=new Po({explicit:[new Lo("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),Mo,Do]}),Uo=new Lo("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),$o=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),qo=/^[-+]?[0-9]+e/,Bo=new Lo("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!$o.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n,r,o;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){o.unshift(parseFloat(e,10))}),t=0,r=1,o.forEach(function(e){t+=e*r,r*=60}),n*t):n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||Co.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Co.isNegativeZero(e))return"-0.0";return n=e.toString(10),qo.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"});function Ho(e){return 48<=e&&e<=55}function zo(e){return 48<=e&&e<=57}var Yo,Vo=new Lo("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,o=0,i=!1;if(!r)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===r)return!0;if("b"===(t=e[++o])){for(o++;o<r;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;i=!0}return i&&"_"!==t}if("x"===t){for(o++;o<r;o++)if("_"!==(t=e[o])){if(!(48<=(n=e.charCodeAt(o))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;i=!0}return i&&"_"!==t}for(;o<r;o++)if("_"!==(t=e[o])){if(!Ho(e.charCodeAt(o)))return!1;i=!0}return i&&"_"!==t}if("_"===t)return!1;for(;o<r;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!zo(e.charCodeAt(o)))return!1;i=!0}return!(!i||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,n,r=e,o=1,i=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(t=r[0])&&"+"!==t||("-"===t&&(o=-1),t=(r=r.slice(1))[0]),"0"===r?0:"0"===t?"b"===r[1]?o*parseInt(r.slice(2),2):"x"===r[1]?o*parseInt(r,16):o*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach(function(e){i.unshift(parseInt(e,10))}),r=0,n=1,i.forEach(function(e){r+=e*n,n*=60}),o*r):o*parseInt(r,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!Co.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Wo=new Po({include:[Ro],implicit:[new Lo("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),Uo,Vo,Bo]}),Go=new Po({include:[Wo]});try{var Jo=require;Yo=Jo("buffer").Buffer}catch(mc){}var Zo,Xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Ko=new Lo("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,o=e.length,i=Xo;for(n=0;n<o;n++)if(!((t=i.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),o=r.length,i=Xo,a=0,s=[];for(t=0;t<o;t++)t%4==0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|i.indexOf(r.charAt(t));return 0==(n=o%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),Yo?Yo.from?Yo.from(s):new Yo(s):s},predicate:function(e){return Yo&&Yo.isBuffer(e)},represent:function(e){var t,n,r="",o=0,i=e.length,a=Xo;for(t=0;t<i;t++)t%3==0&&t&&(r+=a[o>>18&63],r+=a[o>>12&63],r+=a[o>>6&63],r+=a[63&o]),o=(o<<8)+e[t];return 0==(n=i%3)?(r+=a[o>>18&63],r+=a[o>>12&63],r+=a[o>>6&63],r+=a[63&o]):2===n?(r+=a[o>>10&63],r+=a[o>>4&63],r+=a[o<<2&63],r+=a[64]):1===n&&(r+=a[o>>2&63],r+=a[o<<4&63],r+=a[64],r+=a[64]),r}}),Qo=new Lo("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),ei=Object.prototype.hasOwnProperty,ti=Object.prototype.toString,ni=new Lo("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,o,i,a=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],i=!1,"[object Object]"!==ti.call(r))return!1;for(o in r)if(ei.call(r,o)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==a.indexOf(o))return!1;a.push(o)}return!0},construct:function(e){return null!==e?e:[]}}),ri=Object.prototype.toString,oi=new Lo("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,o,i,a=e;for(i=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==ri.call(r))return!1;if(1!==(o=Object.keys(r)).length)return!1;i[t]=[o[0],r[o[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,o,i,a=e;for(i=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],o=Object.keys(r),i[t]=[o[0],r[o[0]]];return i}}),ii=Object.prototype.hasOwnProperty,ai=new Lo("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(ii.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),si=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ci=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),li=new Po({include:[Go],implicit:[new Lo("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==si.exec(e)||null!==ci.exec(e))},construct:function(e){var t,n,r,o,i,a,s,c,l=0,u=null;if(null===(t=si.exec(e))&&(t=ci.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,r,o));if(i=+t[4],a=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(n,r,o,i,a,s,l)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}}),Qo],explicit:[Ko,ni,oi,ai]});try{var ui=require;Zo=ui("esprima")}catch(yn){"undefined"!=typeof window&&(Zo=window.esprima)}var fi=new Lo("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=Zo.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(pc){return!1}},construct:function(e){var t,n="("+e+")",r=Zo.parse(n,{range:!0}),o=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"ArrowFunctionExpression"!==r.body[0].expression.type&&"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(e){o.push(e.name)}),t=r.body[0].expression.body.range,"BlockStatement"===r.body[0].expression.body.type?new Function(o,n.slice(t[0]+1,t[1]-1)):new Function(o,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}}),di=new Lo("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),r="";if("/"===t[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==t[t.length-r.length-1])return!1}return!0},construct:function(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";return"/"===t[0]&&(n&&(r=n[1]),t=t.slice(1,t.length-r.length-1)),new RegExp(t,r)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}}),hi=new Lo("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}}),pi=Po.DEFAULT=new Po({include:[li],explicit:[hi,di,fi]}),mi={},bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi=Object.prototype.toString,gi=Object.prototype.hasOwnProperty,yi=9,wi=10,Ai=32,ki=33,Ei=34,_i=35,Ci=37,xi=38,Si=39,Oi=42,ji=44,Ti=45,Fi=58,Li=62,Pi=63,Ni=64,Ii=91,Di=93,Mi=96,Ri=123,Ui=124,$i=125,qi={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Bi=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function Hi(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new Oo("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+Co.repeat("0",r-t.length)+t}function zi(e){this.schema=e.schema||pi,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Co.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,o,i,a,s,c;if(null===t)return{};for(n={},o=0,i=(r=Object.keys(t)).length;o<i;o+=1)a=r[o],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(c=e.compiledTypeMap.fallback[a])&&gi.call(c.styleAliases,s)&&(s=c.styleAliases[s]),n[a]=s;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Yi(e,t){for(var n,r=Co.repeat(" ",t),o=0,i=-1,a="",s=e.length;o<s;)-1===(i=e.indexOf("\n",o))?(n=e.slice(o),o=s):(n=e.slice(o,i+1),o=i+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function Vi(e,t){return"\n"+Co.repeat(" ",e.indent*t)}function Wi(e){return e===Ai||e===yi}function Gi(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function Ji(e){return Gi(e)&&65279!==e&&e!==ji&&e!==Ii&&e!==Di&&e!==Ri&&e!==$i&&e!==Fi&&e!==_i}function Zi(e){return/^\n* /.test(e)}var Xi=1,Ki=2,Qi=3,ea=4,ta=5;function na(e,t,n,r){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==Bi.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,n),i=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;switch(function(e,t,n,r,o){var i,a,s,c=!1,l=!1,u=-1!==r,f=-1,d=Gi(s=e.charCodeAt(0))&&65279!==s&&!Wi(s)&&s!==Ti&&s!==Pi&&s!==Fi&&s!==ji&&s!==Ii&&s!==Di&&s!==Ri&&s!==$i&&s!==_i&&s!==xi&&s!==Oi&&s!==ki&&s!==Ui&&s!==Li&&s!==Si&&s!==Ei&&s!==Ci&&s!==Ni&&s!==Mi&&!Wi(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!Gi(a=e.charCodeAt(i)))return ta;d=d&&Ji(a)}else{for(i=0;i<e.length;i++){if((a=e.charCodeAt(i))===wi)c=!0,u&&(l=l||i-f-1>r&&" "!==e[f+1],f=i);else if(!Gi(a))return ta;d=d&&Ji(a)}l=l||u&&i-f-1>r&&" "!==e[f+1]}return c||l?n>9&&Zi(e)?ta:l?ea:Qi:d&&!o(e)?Xi:Ki}(t,a,e.indent,i,function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)})){case Xi:return t;case Ki:return"'"+t.replace(/'/g,"''")+"'";case Qi:return"|"+ra(t,e.indent)+oa(Yi(t,o));case ea:return">"+ra(t,e.indent)+oa(Yi(function(e,t){for(var n,r,o,i=/(\n+)([^\n]*)/g,a=(o=-1!==(o=e.indexOf("\n"))?o:e.length,i.lastIndex=o,ia(e.slice(0,o),t)),s="\n"===e[0]||" "===e[0];r=i.exec(e);){var c=r[1],l=r[2];n=" "===l[0],a+=c+(s||n||""===l?"":"\n")+ia(l,t),s=n}return a}(t,i),o));case ta:return'"'+function(e){for(var t,n,r,o="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(n=e.charCodeAt(i+1))>=56320&&n<=57343?(o+=Hi(1024*(t-55296)+n-56320+65536),i++):o+=!(r=qi[t])&&Gi(t)?e[i]:r||Hi(t);return o}(t)+'"';default:throw new Oo("impossible error: invalid scalar style")}}()}function ra(e,t){var n=Zi(e)?String(t):"",r="\n"===e[e.length-1];return n+(!r||"\n"!==e[e.length-2]&&"\n"!==e?r?"":"-":"+")+"\n"}function oa(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function ia(e,t){if(""===e||" "===e[0])return e;for(var n,r,o=/ [^ ]/g,i=0,a=0,s=0,c="";n=o.exec(e);)(s=n.index)-i>t&&(r=a>i?a:s,c+="\n"+e.slice(i,r),i=r+1),a=s;return c+="\n",e.length-i>t&&a>i?c+=e.slice(i,a)+"\n"+e.slice(a+1):c+=e.slice(i),c.slice(1)}function aa(e,t,n){var r,o,i,a,s,c;for(i=0,a=(o=n?e.explicitTypes:e.implicitTypes).length;i<a;i+=1)if(((s=o[i]).instanceOf||s.predicate)&&(!s.instanceOf||"object"===(void 0===t?"undefined":bi(t))&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(e.tag=n?s.tag:"?",s.represent){if(c=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===vi.call(s.represent))r=s.represent(t,c);else{if(!gi.call(s.represent,c))throw new Oo("!<"+s.tag+'> tag resolver accepts not "'+c+'" style');r=s.represent[c](t,c)}e.dump=r}return!0}return!1}function sa(e,t){var n=new zi(t=t||{});return n.noRefs||function(e,t){var n,r,o=[],i=[];for(function e(t,n,r){var o,i,a;if(null!==t&&"object"===(void 0===t?"undefined":bi(t)))if(-1!==(i=n.indexOf(t)))-1===r.indexOf(i)&&r.push(i);else if(n.push(t),Array.isArray(t))for(i=0,a=t.length;i<a;i+=1)e(t[i],n,r);else for(i=0,a=(o=Object.keys(t)).length;i<a;i+=1)e(t[o[i]],n,r)}(e,o,i),n=0,r=i.length;n<r;n+=1)t.duplicates.push(o[i[n]]);t.usedDuplicates=new Array(r)}(e,n),function e(t,n,r,o,i,a){t.tag=null,t.dump=r,aa(t,r,!1)||aa(t,r,!0);var s=vi.call(t.dump);o&&(o=t.flowLevel<0||t.flowLevel>n);var c,l,u="[object Object]"===s||"[object Array]"===s;if(u&&(l=-1!==(c=t.duplicates.indexOf(r))),(null!==t.tag&&"?"!==t.tag||l||2!==t.indent&&n>0)&&(i=!1),l&&t.usedDuplicates[c])t.dump="*ref_"+c;else{if(u&&l&&!t.usedDuplicates[c]&&(t.usedDuplicates[c]=!0),"[object Object]"===s)o&&0!==Object.keys(t.dump).length?(function(t,n,r,o){var i,a,s,c,l,u,f="",d=t.tag,h=Object.keys(r);if(!0===t.sortKeys)h.sort();else if("function"==typeof t.sortKeys)h.sort(t.sortKeys);else if(t.sortKeys)throw new Oo("sortKeys must be a boolean or a function");for(i=0,a=h.length;i<a;i+=1)u="",o&&0===i||(u+=Vi(t,n)),c=r[s=h[i]],e(t,n+1,s,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&wi===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,l&&(u+=Vi(t,n)),e(t,n+1,c,!0,l)&&(t.dump&&wi===t.dump.charCodeAt(0)?u+=":":u+=": ",f+=u+=t.dump));t.tag=d,t.dump=f||"{}"}(t,n,t.dump,i),l&&(t.dump="&ref_"+c+t.dump)):(function(t,n,r){var o,i,a,s,c,l="",u=t.tag,f=Object.keys(r);for(o=0,i=f.length;o<i;o+=1)c=t.condenseFlow?'"':"",0!==o&&(c+=", "),s=r[a=f[o]],e(t,n,a,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),e(t,n,s,!1,!1)&&(l+=c+=t.dump));t.tag=u,t.dump="{"+l+"}"}(t,n,t.dump),l&&(t.dump="&ref_"+c+" "+t.dump));else if("[object Array]"===s){var f=t.noArrayIndent?n-1:n;o&&0!==t.dump.length?(function(t,n,r,o){var i,a,s="",c=t.tag;for(i=0,a=r.length;i<a;i+=1)e(t,n+1,r[i],!0,!0)&&(o&&0===i||(s+=Vi(t,n)),t.dump&&wi===t.dump.charCodeAt(0)?s+="-":s+="- ",s+=t.dump);t.tag=c,t.dump=s||"[]"}(t,f,t.dump,i),l&&(t.dump="&ref_"+c+t.dump)):(function(t,n,r){var o,i,a="",s=t.tag;for(o=0,i=r.length;o<i;o+=1)e(t,n,r[o],!1,!1)&&(0!==o&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=s,t.dump="["+a+"]"}(t,f,t.dump),l&&(t.dump="&ref_"+c+" "+t.dump))}else{if("[object String]"!==s){if(t.skipInvalid)return!1;throw new Oo("unacceptable kind of an object to dump "+s)}"?"!==t.tag&&na(t,t.dump,n,a)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}(n,0,e,!0,!0)?n.dump+"\n":""}mi.dump=sa,mi.safeDump=function(e,t){return sa(e,Co.extend({schema:li},t))};var ca={};function la(e,t,n,r,o){this.name=e,this.buffer=t,this.position=n,this.line=r,this.column=o}la.prototype.getSnippet=function(e,t){var n,r,o,i,a;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(o="",i=this.position;i<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(i));)if((i+=1)-this.position>t/2-1){o=" ... ",i-=5;break}return a=this.buffer.slice(r,i),Co.repeat(" ",e)+n+a+o+"\n"+Co.repeat(" ",e+this.position-r+n.length)+"^"},la.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n},ca=la;var ua={},fa=Object.prototype.hasOwnProperty,da=1,ha=2,pa=3,ma=4,ba=1,va=2,ga=3,ya=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,wa=/[\x85\u2028\u2029]/,Aa=/[,\[\]\{\}]/,ka=/^(?:!|!!|![a-z\-]+!)$/i,Ea=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _a(e){return 10===e||13===e}function Ca(e){return 9===e||32===e}function xa(e){return 9===e||32===e||10===e||13===e}function Sa(e){return 44===e||91===e||93===e||123===e||125===e}function Oa(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function ja(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function Ta(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var Fa=new Array(256),La=new Array(256),Pa=0;Pa<256;Pa++)Fa[Pa]=ja(Pa)?1:0,La[Pa]=ja(Pa);function Na(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||pi,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Ia(e,t){return new Oo(t,new ca(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function Da(e,t){throw Ia(e,t)}function Ma(e,t){e.onWarning&&e.onWarning.call(null,Ia(e,t))}var Ra={YAML:function(e,t,n){var r,o,i;null!==e.version&&Da(e,"duplication of %YAML directive"),1!==n.length&&Da(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Da(e,"ill-formed argument of the YAML directive"),o=parseInt(r[1],10),i=parseInt(r[2],10),1!==o&&Da(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&Ma(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,o;2!==n.length&&Da(e,"TAG directive accepts exactly two arguments"),r=n[0],o=n[1],ka.test(r)||Da(e,"ill-formed tag handle (first argument) of the TAG directive"),fa.call(e.tagMap,r)&&Da(e,'there is a previously declared suffix for "'+r+'" tag handle'),Ea.test(o)||Da(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=o}};function Ua(e,t,n,r){var o,i,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(o=0,i=s.length;o<i;o+=1)9===(a=s.charCodeAt(o))||32<=a&&a<=1114111||Da(e,"expected valid JSON character");else ya.test(s)&&Da(e,"the stream contains non-printable characters");e.result+=s}}function $a(e,t,n,r){var o,i,a,s;for(Co.isObject(n)||Da(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(o=Object.keys(n)).length;a<s;a+=1)i=o[a],fa.call(t,i)||(t[i]=n[i],r[i]=!0)}function qa(e,t,n,r,o,i,a,s){var c,l;if(o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(i))for(c=0,l=i.length;c<l;c+=1)$a(e,t,i[c],n);else $a(e,t,i,n);else e.json||fa.call(n,o)||!fa.call(t,o)||(e.line=a||e.line,e.position=s||e.position,Da(e,"duplicated mapping key")),t[o]=i,delete n[o];return t}function Ba(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Da(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function Ha(e,t,n){for(var r=0,o=e.input.charCodeAt(e.position);0!==o;){for(;Ca(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!_a(o))break;for(Ba(e),o=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&Ma(e,"deficient indentation"),r}function za(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!xa(t)))}function Ya(e,t){1===t?e.result+=" ":t>1&&(e.result+=Co.repeat("\n",t-1))}function Va(e,t){var n,r,o=e.tag,i=e.anchor,a=[],s=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),r=e.input.charCodeAt(e.position);0!==r&&45===r&&xa(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,Ha(e,!0,-1)&&e.lineIndent<=t)a.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,Ja(e,t,pa,!1,!0),a.push(e.result),Ha(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)Da(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=o,e.anchor=i,e.kind="sequence",e.result=a,!0)}function Wa(e){var t,n,r,o,i=!1,a=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Da(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(i=!0,o=e.input.charCodeAt(++e.position)):33===o?(a=!0,n="!!",o=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(r=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):Da(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!xa(o);)33===o&&(a?Da(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ka.test(n)||Da(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),Aa.test(r)&&Da(e,"tag suffix cannot contain flow indicator characters")}return r&&!Ea.test(r)&&Da(e,"tag name cannot contain such characters: "+r),i?e.tag=r:fa.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:Da(e,'undeclared tag handle "'+n+'"'),!0}function Ga(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Da(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!xa(n)&&!Sa(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Da(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Ja(e,t,n,r,o){var i,a,s,c,l,u,f,d,h=1,p=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=a=s=ma===n||pa===n,r&&Ha(e,!0,-1)&&(p=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;Wa(e)||Ga(e);)Ha(e,!0,-1)?(p=!0,s=i,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):s=!1;if(s&&(s=p||o),1!==h&&ma!==n||(f=da===n||ha===n?t:t+1,d=e.position-e.lineStart,1===h?s&&(Va(e,d)||function(e,t,n){var r,o,i,a,s,c=e.tag,l=e.anchor,u={},f={},d=null,h=null,p=null,m=!1,b=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=u),s=e.input.charCodeAt(e.position);0!==s;){if(r=e.input.charCodeAt(e.position+1),i=e.line,a=e.position,63!==s&&58!==s||!xa(r)){if(!Ja(e,n,ha,!1,!0))break;if(e.line===i){for(s=e.input.charCodeAt(e.position);Ca(s);)s=e.input.charCodeAt(++e.position);if(58===s)xa(s=e.input.charCodeAt(++e.position))||Da(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(qa(e,u,f,d,h,null),d=h=p=null),b=!0,m=!1,o=!1,d=e.tag,h=e.result;else{if(!b)return e.tag=c,e.anchor=l,!0;Da(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=c,e.anchor=l,!0;Da(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(m&&(qa(e,u,f,d,h,null),d=h=p=null),b=!0,m=!0,o=!0):m?(m=!1,o=!0):Da(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=r;if((e.line===i||e.lineIndent>t)&&(Ja(e,t,ma,!0,o)&&(m?h=e.result:p=e.result),m||(qa(e,u,f,d,h,p,i,a),d=h=p=null),Ha(e,!0,-1),s=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==s)Da(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&qa(e,u,f,d,h,null),b&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=u),b}(e,d,f))||function(e,t){var n,r,o,i,a,s,c,l,u,f,d=!0,h=e.tag,p=e.anchor,m={};if(91===(f=e.input.charCodeAt(e.position)))o=93,s=!1,r=[];else{if(123!==f)return!1;o=125,s=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),f=e.input.charCodeAt(++e.position);0!==f;){if(Ha(e,!0,t),(f=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=h,e.anchor=p,e.kind=s?"mapping":"sequence",e.result=r,!0;d||Da(e,"missed comma between flow collection entries"),u=null,i=a=!1,63===f&&xa(e.input.charCodeAt(e.position+1))&&(i=a=!0,e.position++,Ha(e,!0,t)),n=e.line,Ja(e,t,da,!1,!0),l=e.tag,c=e.result,Ha(e,!0,t),f=e.input.charCodeAt(e.position),!a&&e.line!==n||58!==f||(i=!0,f=e.input.charCodeAt(++e.position),Ha(e,!0,t),Ja(e,t,da,!1,!0),u=e.result),s?qa(e,r,m,l,c,u):i?r.push(qa(e,null,m,l,c,u)):r.push(c),Ha(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(d=!0,f=e.input.charCodeAt(++e.position)):d=!1}Da(e,"unexpected end of the stream within a flow collection")}(e,f)?m=!0:(a&&function(e,t){var n,r,o,i,a,s=ba,c=!1,l=!1,u=t,f=0,d=!1;if(124===(i=e.input.charCodeAt(e.position)))r=!1;else{if(62!==i)return!1;r=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)ba===s?s=43===i?ga:va:Da(e,"repeat of a chomping mode identifier");else{if(!((o=48<=(a=i)&&a<=57?a-48:-1)>=0))break;0===o?Da(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Da(e,"repeat of an indentation width identifier"):(u=t+o-1,l=!0)}if(Ca(i)){do{i=e.input.charCodeAt(++e.position)}while(Ca(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!_a(i)&&0!==i)}for(;0!==i;){for(Ba(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!l||e.lineIndent<u)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>u&&(u=e.lineIndent),_a(i))f++;else{if(e.lineIndent<u){s===ga?e.result+=Co.repeat("\n",c?1+f:f):s===ba&&c&&(e.result+="\n");break}for(r?Ca(i)?(d=!0,e.result+=Co.repeat("\n",c?1+f:f)):d?(d=!1,e.result+=Co.repeat("\n",f+1)):0===f?c&&(e.result+=" "):e.result+=Co.repeat("\n",f):e.result+=Co.repeat("\n",c?1+f:f),c=!0,l=!0,f=0,n=e.position;!_a(i)&&0!==i;)i=e.input.charCodeAt(++e.position);Ua(e,n,e.position,!1)}}return!0}(e,f)||function(e,t){var n,r,o;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=o=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Ua(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,o=e.position}else _a(n)?(Ua(e,r,o,!0),Ya(e,Ha(e,!1,t)),r=o=e.position):e.position===e.lineStart&&za(e)?Da(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);Da(e,"unexpected end of the stream within a single quoted scalar")}(e,f)||function(e,t){var n,r,o,i,a,s,c;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return Ua(e,n,e.position,!0),e.position++,!0;if(92===s){if(Ua(e,n,e.position,!0),_a(s=e.input.charCodeAt(++e.position)))Ha(e,!1,t);else if(s<256&&Fa[s])e.result+=La[s],e.position++;else if((a=120===(c=s)?2:117===c?4:85===c?8:0)>0){for(o=a,i=0;o>0;o--)(a=Oa(s=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+a:Da(e,"expected hexadecimal character");e.result+=Ta(i),e.position++}else Da(e,"unknown escape sequence");n=r=e.position}else _a(s)?(Ua(e,n,r,!0),Ya(e,Ha(e,!1,t)),n=r=e.position):e.position===e.lineStart&&za(e)?Da(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Da(e,"unexpected end of the stream within a double quoted scalar")}(e,f)?m=!0:function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!xa(r)&&!Sa(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Da(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||Da(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Ha(e,!0,-1),!0}(e)?(m=!0,null===e.tag&&null===e.anchor||Da(e,"alias node should not have any properties")):function(e,t,n){var r,o,i,a,s,c,l,u,f=e.kind,d=e.result;if(xa(u=e.input.charCodeAt(e.position))||Sa(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(xa(r=e.input.charCodeAt(e.position+1))||n&&Sa(r)))return!1;for(e.kind="scalar",e.result="",o=i=e.position,a=!1;0!==u;){if(58===u){if(xa(r=e.input.charCodeAt(e.position+1))||n&&Sa(r))break}else if(35===u){if(xa(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&za(e)||n&&Sa(u))break;if(_a(u)){if(s=e.line,c=e.lineStart,l=e.lineIndent,Ha(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=i,e.line=s,e.lineStart=c,e.lineIndent=l;break}}a&&(Ua(e,o,i,!1),Ya(e,e.line-s),o=i=e.position,a=!1),Ca(u)||(i=e.position+1),u=e.input.charCodeAt(++e.position)}return Ua(e,o,i,!1),!!e.result||(e.kind=f,e.result=d,!1)}(e,f,da===n)&&(m=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(m=s&&Va(e,d))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(c=0,l=e.implicitTypes.length;c<l;c+=1)if((u=e.implicitTypes[c]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else fa.call(e.typeMap[e.kind||"fallback"],e.tag)?(u=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&u.kind!==e.kind&&Da(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result)?(e.result=u.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Da(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):Da(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function Za(e){var t,n,r,o,i=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(Ha(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(a=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!xa(o);)o=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&Da(e,"directive name must not be less than one character in length");0!==o;){for(;Ca(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!_a(o));break}if(_a(o))break;for(t=e.position;0!==o&&!xa(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==o&&Ba(e),fa.call(Ra,n)?Ra[n](e,n,r):Ma(e,'unknown document directive "'+n+'"')}Ha(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Ha(e,!0,-1)):a&&Da(e,"directives end mark is expected"),Ja(e,e.lineIndent-1,ma,!1,!0),Ha(e,!0,-1),e.checkLineBreaks&&wa.test(e.input.slice(i,e.position))&&Ma(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&za(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Ha(e,!0,-1)):e.position<e.length-1&&Da(e,"end of the stream or a document separator is expected")}function Xa(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new Na(e,t);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Za(n);return n.documents}function Ka(e,t,n){var r,o,i=Xa(e,n);if("function"!=typeof t)return i;for(r=0,o=i.length;r<o;r+=1)t(i[r])}function Qa(e,t){var n=Xa(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new Oo("expected a single document in the stream, but found more")}}ua.loadAll=Ka,ua.load=Qa,ua.safeLoadAll=function(e,t,n){if("function"!=typeof t)return Ka(e,Co.extend({schema:li},n));Ka(e,t,Co.extend({schema:li},n))},ua.safeLoad=function(e,t){return Qa(e,Co.extend({schema:li},t))};var es={};function ts(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}es.Type=Lo,es.Schema=Po,es.FAILSAFE_SCHEMA=Ro,es.JSON_SCHEMA=Wo,es.CORE_SCHEMA=Go,es.DEFAULT_SAFE_SCHEMA=li,es.DEFAULT_FULL_SCHEMA=pi,es.load=ua.load,es.loadAll=ua.loadAll,es.safeLoad=ua.safeLoad,es.safeLoadAll=ua.safeLoadAll,es.dump=mi.dump,es.safeDump=mi.safeDump,es.YAMLException=Oo,es.MINIMAL_SCHEMA=Ro,es.SAFE_SCHEMA=li,es.DEFAULT_SCHEMA=pi,es.scan=ts("scan"),es.parse=ts("parse"),es.compose=ts("compose"),es.addConstructor=ts("addConstructor");var ns,rs={},os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};ns=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xa2":"cent","\xa3":"pound","\xa4":"currency","\xa5":"yen","\xa9":"(c)","\xaa":"a","\xae":"(r)","\xba":"o","\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"AE","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xde":"TH","\xdf":"ss","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xfe":"th","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010c":"C","\u010d":"c","\u010e":"D","\u010f":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011a":"E","\u011b":"e","\u011e":"G","\u011f":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012a":"i","\u012b":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015a":"S","\u015b":"s","\u015e":"S","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016a":"u","\u016b":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01c8":"LJ","\u01c9":"lj","\u01cb":"NJ","\u01cc":"nj","\u0218":"S","\u0219":"s","\u021a":"T","\u021b":"t","\u02da":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038a":"I","\u038c":"O","\u038e":"Y","\u038f":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039a":"K","\u039b":"L","\u039c":"M","\u039d":"N","\u039e":"3","\u039f":"O","\u03a0":"P","\u03a1":"R","\u03a3":"S","\u03a4":"T","\u03a5":"Y","\u03a6":"F","\u03a7":"X","\u03a8":"PS","\u03a9":"W","\u03aa":"I","\u03ab":"Y","\u03ac":"a","\u03ad":"e","\u03ae":"h","\u03af":"i","\u03b0":"y","\u03b1":"a","\u03b2":"b","\u03b3":"g","\u03b4":"d","\u03b5":"e","\u03b6":"z","\u03b7":"h","\u03b8":"8","\u03b9":"i","\u03ba":"k","\u03bb":"l","\u03bc":"m","\u03bd":"n","\u03be":"3","\u03bf":"o","\u03c0":"p","\u03c1":"r","\u03c2":"s","\u03c3":"s","\u03c4":"t","\u03c5":"y","\u03c6":"f","\u03c7":"x","\u03c8":"ps","\u03c9":"w","\u03ca":"i","\u03cb":"y","\u03cc":"o","\u03cd":"y","\u03ce":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040a":"NJ","\u040b":"C","\u040f":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042a":"U","\u042b":"Y","\u042c":"","\u042d":"E","\u042e":"Yu","\u042f":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044a":"u","\u044b":"y","\u044c":"","\u044d":"e","\u044e":"yu","\u044f":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045a":"nj","\u045b":"c","\u045f":"dz","\u0490":"G","\u0491":"g","\u0e3f":"baht","\u10d0":"a","\u10d1":"b","\u10d2":"g","\u10d3":"d","\u10d4":"e","\u10d5":"v","\u10d6":"z","\u10d7":"t","\u10d8":"i","\u10d9":"k","\u10da":"l","\u10db":"m","\u10dc":"n","\u10dd":"o","\u10de":"p","\u10df":"zh","\u10e0":"r","\u10e1":"s","\u10e2":"t","\u10e3":"u","\u10e4":"f","\u10e5":"k","\u10e6":"gh","\u10e7":"q","\u10e8":"sh","\u10e9":"ch","\u10ea":"ts","\u10eb":"dz","\u10ec":"ts","\u10ed":"ch","\u10ee":"kh","\u10ef":"j","\u10f0":"h","\u1e9e":"SS","\u1ea0":"A","\u1ea1":"a","\u1ea2":"A","\u1ea3":"a","\u1ea4":"A","\u1ea5":"a","\u1ea6":"A","\u1ea7":"a","\u1ea8":"A","\u1ea9":"a","\u1eaa":"A","\u1eab":"a","\u1eac":"A","\u1ead":"a","\u1eae":"A","\u1eaf":"a","\u1eb0":"A","\u1eb1":"a","\u1eb2":"A","\u1eb3":"a","\u1eb4":"A","\u1eb5":"a","\u1eb6":"A","\u1eb7":"a","\u1eb8":"E","\u1eb9":"e","\u1eba":"E","\u1ebb":"e","\u1ebc":"E","\u1ebd":"e","\u1ebe":"E","\u1ebf":"e","\u1ec0":"E","\u1ec1":"e","\u1ec2":"E","\u1ec3":"e","\u1ec4":"E","\u1ec5":"e","\u1ec6":"E","\u1ec7":"e","\u1ec8":"I","\u1ec9":"i","\u1eca":"I","\u1ecb":"i","\u1ecc":"O","\u1ecd":"o","\u1ece":"O","\u1ecf":"o","\u1ed0":"O","\u1ed1":"o","\u1ed2":"O","\u1ed3":"o","\u1ed4":"O","\u1ed5":"o","\u1ed6":"O","\u1ed7":"o","\u1ed8":"O","\u1ed9":"o","\u1eda":"O","\u1edb":"o","\u1edc":"O","\u1edd":"o","\u1ede":"O","\u1edf":"o","\u1ee0":"O","\u1ee1":"o","\u1ee2":"O","\u1ee3":"o","\u1ee4":"U","\u1ee5":"u","\u1ee6":"U","\u1ee7":"u","\u1ee8":"U","\u1ee9":"u","\u1eea":"U","\u1eeb":"u","\u1eec":"U","\u1eed":"u","\u1eee":"U","\u1eef":"u","\u1ef0":"U","\u1ef1":"u","\u1ef2":"Y","\u1ef3":"y","\u1ef4":"Y","\u1ef5":"y","\u1ef6":"Y","\u1ef7":"y","\u1ef8":"Y","\u1ef9":"y","\u2018":"\'","\u2019":"\'","\u201c":"\\"","\u201d":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20a0":"ecu","\u20a2":"cruzeiro","\u20a3":"french franc","\u20a4":"lira","\u20a5":"mill","\u20a6":"naira","\u20a7":"peseta","\u20a8":"rupee","\u20a9":"won","\u20aa":"new shequel","\u20ab":"dong","\u20ac":"euro","\u20ad":"kip","\u20ae":"tugrik","\u20af":"drachma","\u20b0":"penny","\u20b1":"peso","\u20b2":"guarani","\u20b3":"austral","\u20b4":"hryvnia","\u20b5":"cedi","\u20b9":"indian rupee","\u20bd":"russian ruble","\u20bf":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221e":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\ufdfc":"rial"}');function t(t,n){if("string"!=typeof t)throw new Error("slugify: string argument expected");n="string"==typeof n?{replacement:n}:n||{};var r=t.split("").reduce(function(t,r){return t+(e[r]||r).replace(n.remove||/[^\w\s$*_+~.()'"!\-:@]/g,"")},"").trim().replace(/[-\s]+/g,n.replacement||"-");return n.lower?r.toLowerCase():r}return t.extend=function(t){for(var n in t)e[n]=t[n]},t},"object"===(void 0===rs?"undefined":os(rs))?(rs=ns()).default=ns():"function"==typeof define&&define.amd?define(ns):this.slugify=ns();var is;function as(e,t){e.workspace={},t.on("remix",function(t){var n=t.id,r=t.db;e.api[r].get(n).then(function(t){var n=Qr.removeIds(t);return e.api[r].create(n)}).then(function(e){alert("feature copied!")}).catch(function(e){alert(e)})}),t.on("patch-list",function(e){})}is=as,as.storeName="workspace";var ss="src - route not found",cs={},ls={};(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{};"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=cs),ls=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var us={};(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},us=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var fs,ds=Object.create(null),hs="onloadid"+(new Date%9e6).toString(36),ps="data-"+hs,ms=0;if(us&&us.MutationObserver){var bs=new MutationObserver(function(e){if(!(Object.keys(ds).length<1))for(var t=0;t<e.length;t++)e[t].attributeName!==ps?(ws(e[t].removedNodes,ys),ws(e[t].addedNodes,gs)):(n=e[t],r=gs,o=ys,i=void 0,i=n.target.getAttribute(ps),function(e,t){return!(!e||!t)&&ds[e][3]===ds[t][3]}(n.oldValue,i)?ds[i]=ds[n.oldValue]:(ds[n.oldValue]&&o(n.oldValue,n.target),ds[i]&&r(i,n.target)));var n,r,o,i});ls.body?vs(bs):ls.addEventListener("DOMContentLoaded",function(e){vs(bs)})}function vs(e){e.observe(ls.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[ps]})}function gs(e,t){ds[e][0]&&0===ds[e][2]&&(ds[e][0](t),ds[e][2]=1)}function ys(e,t){ds[e][1]&&1===ds[e][2]&&(ds[e][1](t),ds[e][2]=0)}function ws(e,t){for(var n=Object.keys(ds),r=0;r<e.length;r++){if(e[r]&&e[r].getAttribute&&e[r].getAttribute(ps)){var o=e[r].getAttribute(ps);n.forEach(function(n){o===n&&t(n,e[r])})}e[r].childNodes.length>0&&ws(e[r].childNodes,t)}}(fs=function e(t,n,r,o){return n=n||function(){},r=r||function(){},t.setAttribute(ps,"o"+ms),ds["o"+ms]=[n,r,0,o||e.caller],ms+=1,t}).KEY_ATTR=ps;var As,ks=fs.KEY_ID=hs,Es=fs.KEY_ATTR;function _s(e){this._hasWindow="undefined"!=typeof window,this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=e||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];var t=this;Object.defineProperty(this,"element",{get:function(){var e=ls.getElementById(t._id);if(e)return e.dataset.nanocomponent===t._ncID?e:void 0}})}As=_s,_s.prototype.render=function(){for(var e,t=ie(this._name+".render"),n=new Array(arguments.length),r=0;r<arguments.length;r++)n[r]=arguments[r];if(this._hasWindow){if(this.element){e=this.element;var o=ie(this._name+".update"),i=this._rerender||this.update.apply(this,n);if(o(),this._rerender&&(this._rerender=!1),i){var a=this._handleRender(n),s=ie(this._name+".morph");we(e,a),s(),this.afterupdate&&this.afterupdate(e)}return this._proxy||(this._proxy=this._createProxy()),t(),this._proxy}return this._reset(),e=this._handleRender(n),this.beforerender&&this.beforerender(e),(this.load||this.unload||this.afterreorder)&&(fs(e,this._handleLoad,this._handleUnload,this._ncID),this._olID=e.dataset[ks]),t(),e}var c=ie(this._name+".create");return e=this.createElement.apply(this,n),c(),t(),e},_s.prototype.rerender=function(){this._rerender=!0,this.render.apply(this,this._arguments)},_s.prototype._handleRender=function(e){var t=ie(this._name+".createElement"),n=this.createElement.apply(this,e);return t(),this._rootNodeName||(this._rootNodeName=n.nodeName),this._arguments=e,this._brandNode(this._ensureID(n))},_s.prototype._createProxy=function(){var e=ls.createElement(this._rootNodeName),t=this;return this._brandNode(e),e.id=this._id,e.setAttribute("data-proxy",""),e.isSameNode=function(e){return e&&e.dataset.nanocomponent===t._ncID},e},_s.prototype._reset=function(){this._ncID="ncid-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null},_s.prototype._brandNode=function(e){return e.setAttribute("data-nanocomponent",this._ncID),this._olID&&e.setAttribute(Es,this._olID),e},_s.prototype._ensureID=function(e){return e.id?this._id=e.id:e.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),e},_s.prototype._handleLoad=function(e){this._loaded?this.afterreorder&&this.afterreorder(e):(this._loaded=!0,this.load&&this.load(e))},_s.prototype._handleUnload=function(e){this.element||(this._loaded=!1,this.unload&&this.unload(e))},_s.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")},_s.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};var Cs=As,xs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ss=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={popup:"dn"},o.toggleButton=o.toggleButton.bind(o),o.triggerModal=o.triggerModal.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),xs(t,[{key:"toggleButton",value:function(e){"dn"==this.local.popup?(this.local.popup="flex",this.rerender()):(this.local.popup="dn",this.rerender())}},{key:"triggerModal",value:function(e){var t=this;return function(n){t.state.components.AddFeatureModal.featureType=e,t.state.components.AddFeatureModal.open()}}},{key:"createElement",value:function(){return function(){var e=document.createElement("div");e.setAttribute("class","fixed bottom-0 right-0 max-z mr3 mb3");var t=document.createElement("div");t.setAttribute("style","bottom:56px; right:0px;"),t.setAttribute("class","absolute "+arguments[4]);var n=document.createElement("ul");n.setAttribute("class","list pl0 w4 tr dropshadow");var r=document.createElement("li"),o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","button-reset w-100 tc grow ba bw1 bg-light-green b--white pa1");var i=document.createElement("p");i.setAttribute("class","w-100 h1");var a=document.createElement("img");a.setAttribute("src","/assets/1F517.png"),a.setAttribute("class","h1"),Zr(i,[a," link"]),Zr(o,[" ",i,"\n              "]),Zr(r,["\n              ",o,"\n            "]);var s=document.createElement("li"),c=document.createElement("button");c.onclick=arguments[1],c.setAttribute("class","button-reset w-100 tc grow ba bw1 bg-yellow b--white pa1");var l=document.createElement("p");l.setAttribute("class","w-100 h1");var u=document.createElement("img");u.setAttribute("src","/assets/1F4A5.png"),u.setAttribute("class","h1"),Zr(l,[u," list"]),Zr(c,[" ",l,"\n              "]),Zr(s,["\n              ",c,"\n            "]);var f=document.createElement("li");f.setAttribute("class","dn");var d=document.createElement("button");d.onclick=arguments[2],d.setAttribute("class","button-reset bg-near-white w-100 tr grow ba bw1 b--white pa1"),Zr(d,["track\n              "]),Zr(f,["\n              ",d,"\n            "]);var h=document.createElement("li");h.setAttribute("class","dn");var p=document.createElement("button");p.onclick=arguments[3],p.setAttribute("class","button-reset bg-near-white w-100 tr grow ba bw1 b--white pa1"),Zr(p,["collection\n              "]),Zr(h,["\n              ",p,"\n            "]),Zr(n,["\n            ",r,"\n            ",s,"\n            ",f,"\n            ",h,"\n          "]),Zr(t,["\n          ",n,"\n        "]);var m=document.createElement("button");return m.onclick=arguments[5],m.setAttribute("class","absolute bottom-0 right-0 bn w3 h3 br-100 bg-light-pink shadow-5"),Zr(m,["+"]),Zr(e,["\n        ",t,"\n        ",m,"\n      "]),e}(this.triggerModal("links"),this.triggerModal("lists"),this.triggerModal("tracks"),this.triggerModal("collections"),this.local.popup,this.toggleButton)}},{key:"update",value:function(){return!0}}]),t}(),Os=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),js=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.local=n.components[e]={displayed:"dn",featureType:null,open:o.open.bind(o)},o.state=n,o.emit=r,o.rerender=o.rerender.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Os(t,[{key:"open",value:function(){console.log("opening!"),this.local.displayed="flex",this.rerender()}},{key:"close",value:function(){var e=this;return function(t){console.log("closing!"),e.local.displayed="dn",e.rerender()}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.local.featureType,r=new FormData(e.currentTarget),o={url:r.get("url"),name:r.get("name"),description:r.get("description"),tags:r.get("tags").split(",")};"links"!==n&&delete o.url,this.state.api[n].create(o).then(function(e){t.state.params.hasOwnProperty("username")?t.emit("fetch-user",t.state.params.username):t.emit("fetch-"+n),alert("feature added!"),t.close().call()}).catch(function(e){alert(e)})}},{key:"createElement",value:function(){var e=this.local.featureType;return function(){var e=document.createElement("div");e.setAttribute("id","addFeatureModal"),e.setAttribute("style","background:rgba(232, 253, 245, 0.9)"),e.setAttribute("class","w-100 h-100 flex-column justify-center items-center "+arguments[5]+" fixed top-0 left-0 max-z pa4");var t=document.createElement("div");t.setAttribute("class","w-100 h-auto mw7 pa4 ba dropshadow br2 bg-white overflow-y-scroll max-z");var n=document.createElement("header");n.setAttribute("class","flex flex-row items-center justify-between");var r=document.createElement("h2");Zr(r,["Add Feature:",arguments[0]]);var o=document.createElement("button");o.onclick=arguments[1],o.setAttribute("class","bn bg-navy yellow bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(n,["\n          ",r,"\n          ",o,"\n        "]);var i=document.createComment(" Add feature "),a=document.createElement("section");a.setAttribute("class","w-100 mt2 mb2");var s=document.createElement("form");s.setAttribute("id","addFeatureForm"),s.setAttribute("name","addFeatureForm"),s.onsubmit=arguments[3];var c=document.createComment(" URL "),l=document.createElement("fieldset");l.setAttribute("class","w-100 ba bw1 b--black "+arguments[2]);var u=document.createElement("legend");Zr(u,["URL"]);var f=document.createElement("input");f.setAttribute("type","text"),f.setAttribute("name","url"),f.setAttribute("placeholder","url"),f.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(l,["\n          ",u,"\n          ",f,"\n        "]);var d=document.createComment(" NAME "),h=document.createElement("fieldset");h.setAttribute("class","w-100 ba bw1 b--black");var p=document.createElement("legend");Zr(p,["Name"]);var m=document.createElement("input");m.setAttribute("type","text"),m.setAttribute("name","name"),m.setAttribute("placeholder","name"),m.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(h,["\n          ",p,"\n          ",m,"\n        "]);var b=document.createComment(" DESCRIPTION "),v=document.createElement("fieldset");v.setAttribute("class","w-100 ba bw1 b--black");var g=document.createElement("legend");Zr(g,["Description"]);var y=document.createElement("textarea");y.setAttribute("type","text"),y.setAttribute("name","description"),y.setAttribute("placeholder","description"),y.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(v,["\n          ",g,"\n          ",y,"\n        "]);var w=document.createElement("fieldset");w.setAttribute("class","w-100 ba bw1 b--black");var A=document.createElement("legend");Zr(A,["Tags"]);var k=document.createElement("input");k.setAttribute("type","text"),k.setAttribute("name","tags"),k.setAttribute("placeholder","tags, separated, by, comma"),k.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(w,["\n          ",A,"\n          ",k,"\n        "]);var E=document.createElement("input");E.setAttribute("type","submit"),E.setAttribute("value","add"),E.setAttribute("class","w-100 h3 bn bg-navy washed-green pa2 mt3 mb3 pointer tc"),Zr(s,["\n          ",c,"\n          ",l,"\n        ",d,"\n        ",h,"\n        ",b,"\n        ",v,"\n        ",w,"\n        ",E,"\n       "]),Zr(a,["\n        ",s,"\n        "]),Zr(t,["\n        ",n,"\n        ",i,"\n        ",a,"\n      "]);var _=document.createComment(" invisible div under the modal to capture out of modal click to close "),C=document.createElement("div");return C.onclick=arguments[4],C.setAttribute("class","w-100 h-100 fixed top-0 left-0"),Zr(e,["\n      ",t,"\n      ",_,"\n      ",C,"\n    "]),e}(e,this.close(),"links"==e?"fl":"dn",this.handleSubmit,this.close(),this.local.displayed)}},{key:"update",value:function(){return!1}}]),t}(),Ts=function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100");var t=document.createElement("button");t.onclick=arguments[0],t.setAttribute("class","bn black f6");var n=document.createElement("span");return n.setAttribute("class","underline"),Zr(n,["Go Back"]),Zr(t,["\u2190 ",n," "]),Zr(e,["\n            ",t,"\n        "]),e}(function(e){history.back()})},Fs=function(){return function(){var e=document.createElement("footer");e.setAttribute("style","min-height:300px"),e.setAttribute("class","w-100 bg-navy hot-pink pa4 flex flex-column flex-row-ns");var t=document.createElement("ul");t.setAttribute("class","list pl0 w-third-ns w-100");var n=document.createElement("li");Zr(n,["Imprint"]);var r=document.createElement("li");Zr(r,["License"]);var o=document.createElement("li"),i=document.createElement("a");i.setAttribute("href","https://github.com/nautilist"),i.setAttribute("target","_blank"),i.setAttribute("class","link hot-pink"),Zr(i,["Contribute"]),Zr(o,[i]);var a=document.createElement("li"),s=document.createElement("a");s.setAttribute("href","https://github.com/nautilist/nautilist-editor"),s.setAttribute("target","_blank"),s.setAttribute("class","link hot-pink"),Zr(s,["Issues/Reporting"]),Zr(a,[s]),Zr(t,["\n        ",n,"\n        ",r,"\n        ",o,"\n        ",a,"\n      "]);var c=document.createElement("ul");c.setAttribute("class","list pl0 w-two-thirds-ns w-100");var l=document.createElement("li");Zr(l,["\xa9 2019 NAUTILIST IS AN OPEN EDUCATIONAL INITIATIVE BY ITP."]);var u=document.createElement("li");return Zr(u,["Contact: hello.nautilist at gmail dot com"]),Zr(c,["\n        ",l,"\n        ",u,"\n      "]),Zr(e,["\n      ",t,"\n\n      ",c,"\n      \n    "]),e}()},Ls=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ps=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={searchTerm:""},o.handleSubmit=o.handleSubmit.bind(o),o.handleChange=o.handleChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Ls(t,[{key:"handleChange",value:function(e){this.local.searchTerm=e.target.value}},{key:"handleSubmit",value:function(e,t){var n=this;return function(e){e.preventDefault();var r={searchTerm:n.local.searchTerm};t("fetch-navsearch",r)}}},{key:"createElement",value:function(){return function(){var e=document.createElement("form");e.onsubmit=arguments[2],e.setAttribute("class","w-100 h-100 flex flex-row items-center");var t=document.createElement("img");t.setAttribute("src","/assets/1F50E.png"),t.setAttribute("class"," dropshadow bl bb bt bw1 b--dark-pink w2 h2");var n=document.createElement("input");return n.setAttribute("type","search"),n.setAttribute("value",arguments[0]),n.onchange=arguments[1],n.setAttribute("placeholder","search: terms, users, etc"),n.setAttribute("class"," dropshadow w-100 ma0 h2 input-reset br bb bt bw1 b--dark-pink pa1 f7 i ba"),Zr(e,["\n        ",t,"\n        ",n,"\n      "]),e}(this.local.searchTerm,this.handleChange,this.handleSubmit(this.state,this.emit))}},{key:"update",value:function(){return!0}}]),t}(),Ns=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Is=(function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={selectedValue:""},o.handleSelectChange=o.handleSelectChange.bind(o),o.handleRouteUpdate=o.handleRouteUpdate.bind(o),o}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,Cs),Ns(t,[{key:"handleRouteUpdate",value:function(){this.local.selectedValue="/"+this.state.route}},{key:"handleSelectChange",value:function(e){console.log(),this.emit("pushState",e.currentTarget.value)}},{key:"createElement",value:function(){return function(){var e=document.createElement("select");e.setAttribute("id","selectChange"),e.onchange=arguments[0],e.setAttribute("class","input-reset bn pl1 pr1 h2 f5 underline");var t=document.createElement("option");t.setAttribute("name","projects"),t.setAttribute("value","/projects"),Zr(t,["Projects"]);var n=document.createElement("option");n.setAttribute("name","collections"),n.setAttribute("value","/collections"),Zr(n,["Collections"]);var r=document.createElement("option");return r.setAttribute("name","users"),r.setAttribute("value","/users"),Zr(r,["Users"]),Zr(e,["\n      ",t,"\n      ",n,"\n      ",r,"\n    "]),e}(this.handleSelectChange)}},{key:"update",value:function(){return this.handleRouteUpdate(),!0}},{key:"afterupdate",value:function(e){e.value="/"+this.state.route,e.childNodes.forEach(function(t,n){t.value==e.value&&(e.selectedIndex=n)})}},{key:"load",value:function(e){e.value="/"+this.state.route}}])}(),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ds=Ps,Ms=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={mobileMenuToggled:"dn",navSelectDisplayed:"dn"},o.toggleMobileMenu=o.toggleMobileMenu.bind(o),o.showNavSelect=o.showNavSelect.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Is(t,[{key:"toggleMobileMenu",value:function(e){console.log("clicked!");var t=this.local.mobileMenuToggled;"dn"==t&&(this.local.mobileMenuToggled="flex"),"flex"==t&&(this.local.mobileMenuToggled="dn"),this.rerender()}},{key:"showNavSelect",value:function(){["projects","users","collections","users/:id","projects/:id","collections/:id"].includes(this.state.route),this.local.navSelectDisplayed="flex",this.rerender()}},{key:"createElement",value:function(){return function(){var e=document.createElement("nav");e.setAttribute("class","w-100 h-auto bb bw1 b--near-white navy flex flex-row flex-wrap justify-between items-center");var t=document.createComment(" NAVBAR LEFT "),n=document.createElement("ul");n.setAttribute("class","ma0 list pl0 pt2 pa0-ns h-100 w-100 w-two-thirds-ns flex flex-column flex-row-ns items-center");var r=document.createElement("li");r.setAttribute("class","ml2 f2 lh-title h-100 w3 bg-white flex flex-column justify-center tc");var o=document.createElement("a");o.setAttribute("href","/"),o.setAttribute("class","link black");var i=document.createElement("img");i.setAttribute("src","/assets/logo-wow.png"),Zr(o,[i]),Zr(r,[o]);var a=document.createElement("li");a.setAttribute("class","h-100 ml4-ns pa3 w5-ns w-100"),Zr(a,[" ",arguments[0]]);var s=document.createElement("li");s.setAttribute("class","f6 ml3-ns w-100 w-auto-ns tc");var c=document.createElement("a");c.setAttribute("href","/browse"),c.setAttribute("class","link navy"),Zr(c,["browse"]),Zr(s,[c]),Zr(n,["\n          ",r,"\n          ",a,"\n          ",s,"\n        "]);var l=document.createComment(" NAVBAR RIGHT "),u=document.createElement("ul");u.setAttribute("class","ma0 pt3 pt0-ns list pl0 h-100 w-100 w-third-ns flex flex-column flex-row-ns items-center justify-end-ns");var f=document.createElement("li");return f.setAttribute("class","f6 pr2"),Zr(f,[arguments[1]]),Zr(u,["\n          ",f,"\n        "]),Zr(e,["\n        ",t,"\n        ",n,"\n        \n        ",l,"\n        ",u,"\n      "]),e}(this.state.cache(Ds,"NavSearchbar",this.state,this.emit).render(),function(e,t){if(!0===e.user.authenticated){var n=e.user;return function(){var e=document.createElement("span"),t=document.createElement("a");t.setAttribute("href","/users/"+arguments[0]),t.setAttribute("class","link black b pr1"),Zr(t,[arguments[1]]);var n=document.createElement("span");return n.onclick=arguments[2],Zr(n,["log out"]),Zr(e,["Hello ",t," \xb7 ",n," "]),e}(n.username,n.username,function(e,t){return function(n){t(e.events.user_logout)}}(e,t))}return function(){var e=document.createElement("span"),t=document.createElement("a");t.setAttribute("href","/login"),t.setAttribute("class","link black b pr1"),Zr(t,["log in"]);var n=document.createElement("a");return n.setAttribute("href","/signup"),n.setAttribute("class","pl1 pr2 link black b"),Zr(n,["sign up"]),Zr(e,[t," or ",n]),e}()}(this.state,this.emit))}},{key:"update",value:function(){return this.showNavSelect(),!0}}]),t}(),Rs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Us=function(e){function t(e,n,r,o,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=n,a.emit=r,a.apiUrl=o,a.collectionName=i,a.local=n.components[e]={searchTerm:""},a.onSubmit=a.onSubmit.bind(a),a.onChange=a.onChange.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Rs(t,[{key:"onSubmit",value:function(){var e,t=this;e="links"==this.state.route||"lists"==this.state.route?"/api/"+this.state.route:"/"+this.state.route;var n=this.state.route;return function(r){r.preventDefault();var o;o=""!=t.local.searchTerm?{query:{$text:{$search:t.local.searchTerm}}}:{},Nr.service(e).find(o).then(function(e){e.data.length>0?(t.state[n]=e.data,t.emit("render")):alert("We couldn't find anything that matches your query - try perhaps some more specific keywords :) ")}).catch(function(r){alert("Something went wrong, returning the latest entries"),Nr.service(e).find({}).then(function(e){t.state[n]=e.data,t.emit("render")}).catch(function(e){alert(e)})})}}},{key:"onChange",value:function(e){e.preventDefault(),this.local.searchTerm=e.currentTarget.value}},{key:"createElement",value:function(){return function(){var e=document.createElement("section");e.setAttribute("class","w-100 pa4 flex flex-column items-center");var t=document.createElement("form");t.onsubmit=arguments[2],t.setAttribute("class","w-100 h-100 mw6 flex flex-row items-center dropshadow");var n=document.createElement("img");n.setAttribute("src","/assets/1F50E.png"),n.setAttribute("class","bl bb bt bw1 b--dark-pink w3 h3");var r=document.createElement("input");return r.setAttribute("type","search"),r.setAttribute("value",arguments[0]),r.onkeyup=arguments[1],r.setAttribute("placeholder","search: terms, users, etc"),r.setAttribute("class","w-100 ma0 h3 input-reset br bb bt bw1 b--dark-pink pa1 f4 i ba"),Zr(t,["\n          ",n,"\n          ",r,"\n        "]),Zr(e,["\n        ",t,"\n      "]),e}(this.local.searchTerm,this.onChange,this.onSubmit())}},{key:"update",value:function(){return!0}}]),t}(),$s=function(e){return e.map(function(e){return function(e){var t=e.name,n=e.url,r=e.description,o=e._id,i=e.selectedColor,a=e.colors,s=e.ownerDetails,c=n||"#";return function(){var e=document.createElement("a");e.setAttribute("href",arguments[8]),e.setAttribute("target","_blank"),e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("data-type","links"),t.setAttribute("data-id",arguments[6]),t.onclick=arguments[7],t.setAttribute("class","h-100 dropshadow bg-near-white ma2 flex flex-column justify-between");var n=document.createElement("div");n.setAttribute("class","flex flex-column w-100");var r=document.createElement("button");r.setAttribute("class","w-100 dn f7 bn bg-navy dark-pink"),Zr(r,["save for later"]);var o=document.createElement("button");o.setAttribute("style","background-color:"+arguments[0]+";"),o.setAttribute("class","bn f7 w-100 h2 br--top");var i=document.createElement("div");i.setAttribute("class","hide-child");var a=document.createElement("section");a.setAttribute("class","pa2");var s=document.createElement("h3");s.setAttribute("style","max-height:4rem"),s.setAttribute("class","ma0 overflow-y-scroll"),Zr(s,[arguments[1]]);var c=document.createElement("small");c.setAttribute("class","ma0");var l=document.createElement("a");l.setAttribute("href","/users/"+arguments[2]),l.setAttribute("class","link black underline"),Zr(l,[arguments[3]]),Zr(c,["by ",l]),Zr(a,["\n                  ",s,"\n                  ",c,"\n                "]);var u=document.createElement("p");u.setAttribute("style","max-height:4rem"),u.setAttribute("class","ma0 pa2 f7 overflow-y-scroll"),Zr(u,[arguments[4]]),Zr(i,["\n                ",a,"\n                ",u,"\n              "]),Zr(n,["\n              ",r,"\n              ",o,"\n              ",i,"\n          "]);var f=document.createElement("div");f.setAttribute("class","w-100 pa2 flex flex-row justify-end");var d=document.createElement("button");return d.onclick=arguments[5],d.setAttribute("class","dn h2 w2 br-100 f7 bn bg-moon-gray white grow"),Zr(d,["+"]),Zr(f,["\n            ",d,"\n          "]),Zr(t,["\n          ",n,"\n          ",f,"\n      "]),Zr(e,["\n      ",t,"\n    "]),e}(a[i],t,s.username,function(e){return e.hasOwnProperty("owner")?""+e.ownerDetails.username:"\ud83e\udd16"}(e),r,function(e){alert("save link modal")},o,function(e){var t=e.currentTarget.dataset,n=t.id,r=t.type;console.log("go to selected list!",n,r),emit("fetch-link",n)},c)}(e)})},qs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Bs=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.local=n.components[e]={searchResults:[],open:o.open.bind(o),displayed:"dn"},o.state=n,o.emit=r,o.rerender=o.rerender.bind(o),o.addByUrl=o.addByUrl.bind(o),o.searchByName=o.searchByName.bind(o),o.searchResults=o.searchResults.bind(o),o.selectAndAdd=o.selectAndAdd.bind(o),o.showCurrentCollaborators=o.showCurrentCollaborators.bind(o),o.removeCollaborator=o.removeCollaborator.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),qs(t,[{key:"open",value:function(){console.log("opening!"),this.local.displayed="flex",this.rerender()}},{key:"close",value:function(){var e=this;return function(t){console.log("closing!"),e.local.displayed="dn",e.rerender()}}},{key:"addByUrl",value:function(e){var t=this;e.preventDefault();var n=this.state.selectedList._id,r=new FormData(e.currentTarget).get("url").split("/").slice(-1).pop();this.state.api.users.find({query:{username:r}}).then(function(e){if(!(!e.data.length>0)){var r={$push:{collaborators:e.data[0]._id}};return t.state.api.lists.patch(n,r)}alert("user not found!")}).then(function(e){alert("added collaborator!"),t.emit("fetch-list",""+n),t.local.open()}).catch(function(e){return alert(e),e})}},{key:"searchByName",value:function(e){var t=this;e.preventDefault();var n={query:{$search:new FormData(e.currentTarget).get("username")}};this.state.api.users.find(n).then(function(e){t.local.searchResults=e.data,t.rerender()}).catch(function(e){return alert(e),e})}},{key:"selectAndAdd",value:function(e){var t=this;console.log("clicked!");var n=e.currentTarget.dataset.userid,r=this.state.selectedList._id,o={$push:{collaborators:n}};this.state.api.lists.patch(r,o,{}).then(function(e){return alert("user added as collaborator!"),t.state.api.lists.get(e._id)}).then(function(e){t.state.selectedList=e,t.showCurrentCollaborators(),t.rerender()}).catch(function(e){alert(e)})}},{key:"searchResults",value:function(){var e=this;return this.local.searchResults.length>0?this.local.searchResults.map(function(t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 bn bg-light-gray flex flex-column mb2");var t=document.createElement("div");t.setAttribute("class","w-100 pa3 flex flex-row items-center");var n=document.createElement("div");n.setAttribute("class","w-two-thirds");var r=document.createElement("p");r.setAttribute("class"," w-100 ma0 b"),Zr(r,[arguments[0]]),Zr(n,["\n              ",r,"\n              "]);var o=document.createElement("div");o.setAttribute("class","w-third tr");var i=document.createElement("button");return i.setAttribute("data-userid",arguments[1]),i.onclick=arguments[2],i.setAttribute("class","dropshadow pa2 bg-dark-pink white bn"),Zr(i,["Select"]),Zr(o,["\n              ",i,"\n              "]),Zr(t,["\n              ",n,"\n              ",o,"\n            "]),Zr(e,["\n            ",t,"\n          "]),e}(t.username,t._id,e.selectAndAdd)}):""}},{key:"removeCollaborator",value:function(e){var t=this;return function(n){var r={$pull:{collaborators:n.currentTarget.dataset.userid}};!0===confirm("do you really want to remove this collaborator?")&&t.state.api.lists.patch(e,r,{}).then(function(e){t.state.selectedList=e,t.rerender()}).catch(function(e){return alert("error removing collaborator",e),e})}}},{key:"showCurrentCollaborators",value:function(){var e=this,t=this.state.selectedList._id;return this.state.selectedList.hasOwnProperty("collaboratorDetails")&&this.state.selectedList.collaboratorDetails.length>0?this.state.selectedList.collaboratorDetails.map(function(n){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 bn bg-light-gray flex flex-column mb2");var t=document.createElement("div");t.setAttribute("class","w-100 pa3 flex flex-row items-center");var n=document.createElement("div");n.setAttribute("class","w-two-thirds");var r=document.createElement("p");r.setAttribute("class"," w-100 ma0 b"),Zr(r,[arguments[0]]),Zr(n,["\n          ",r,"\n          "]);var o=document.createElement("div");o.setAttribute("class","w-third tr");var i=document.createElement("button");return i.setAttribute("data-userid",arguments[1]),i.onclick=arguments[2],i.setAttribute("class","dropshadow pa2 bg-near-white red bn"),Zr(i,["Remove"]),Zr(o,["\n          ",i,"\n          "]),Zr(t,["\n          ",n,"\n          ",o,"\n        "]),Zr(e,["\n        ",t,"\n      "]),e}(n.username,n._id,e.removeCollaborator(t))}):"no collaborators yet"}},{key:"createElement",value:function(){return function(){var e=document.createElement("div");e.setAttribute("id","addCollaboratorModal"),e.setAttribute("style","background:rgba(232, 253, 245, 0.9)"),e.setAttribute("class","w-100 h-100 flex-column justify-center items-center "+arguments[6]+" fixed top-0 left-0 max-z pa4");var t=document.createElement("div");t.setAttribute("class","w-100 h-auto mw7 pa4 ba dropshadow br2 bg-white overflow-y-scroll max-z");var n=document.createElement("header");n.setAttribute("class","flex flex-row items-center justify-between");var r=document.createElement("h2");Zr(r,["Add Collaborator"]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn bg-navy washed-green bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(n,["\n          ",r,"\n          ",o,"\n        "]);var i=document.createComment(" Current Collaborators "),a=document.createElement("section");a.setAttribute("class","w-100 mt2 mb2");var s=document.createElement("h3");Zr(s,["Current Collaborators"]),Zr(a,["\n          ",s,"\n          ",arguments[1],"\n        "]);var c=document.createComment(" By URL section "),l=document.createElement("section");l.setAttribute("class","w-100 mt2 mb2");var u=document.createElement("h3");Zr(u,["Add Collaborator by their profile URL"]);var f=document.createElement("form");f.setAttribute("id","addByUrlForm-collaborator"),f.setAttribute("name","addByUrlForm-collaborator"),f.onsubmit=arguments[2];var d=document.createComment(" url input "),h=document.createElement("fieldset");h.setAttribute("class","w-100 ba bw1 b--black");var p=document.createElement("legend");Zr(p,["URL"]);var m=document.createElement("div");m.setAttribute("class","w-100 flex flex-row-ns flex-column items-center");var b=document.createElement("input");b.setAttribute("type","text"),b.setAttribute("name","url"),b.setAttribute("placeholder","https://www.nautilists.com/users/shiffman"),b.setAttribute("class","w-100 b--moon-grey w-two-thirds-ns pl2 pr2 ba bw1 bg-light-gray h3 f6");var v=document.createElement("input");v.setAttribute("form","addByUrlForm-collaborator"),v.setAttribute("type","submit"),v.setAttribute("value","add collaborator"),v.setAttribute("class","w-100 w-third-ns h3 pa2 bg-light-pink navy dropshadow bn mt2 ma0-ns"),Zr(m,["\n          ",b,"\n          ",v,"\n          "]),Zr(h,["\n          ",p,"\n          ",m,"\n          "]),Zr(f,["\n          ",d,"\n          ",h,"\n        "]);var g=document.createComment(" Search section "),y=document.createElement("section");y.setAttribute("class","w-100 mt2 mb2");var w=document.createElement("h3");Zr(w,["Add Collaborator by searching for their username"]);var A=document.createComment(" Search bar "),k=document.createElement("form");k.setAttribute("id","searchByName-collaborator"),k.setAttribute("name","searchByName"),k.onsubmit=arguments[3];var E=document.createElement("fieldset");E.setAttribute("class","w-100 ba bw1 b--black");var _=document.createElement("legend");Zr(_,["Search"]);var C=document.createElement("div");C.setAttribute("class","w-100 flex flex-row-ns flex-column items-center");var x=document.createElement("input");x.setAttribute("type","search"),x.setAttribute("name","username"),x.setAttribute("placeholder","e.g. shiffman"),x.setAttribute("class","w-100 b--moon-grey w-two-thirds-ns pl2 pr2 ba bw1 bg-light-gray h3 f6");var S=document.createElement("input");S.setAttribute("form","searchByName-collaborator"),S.setAttribute("type","submit"),S.setAttribute("value","search"),S.setAttribute("class","w-100 w-third-ns h3 pa2 bg-light-pink navy dropshadow bn bw2 mt2 ma0-ns"),Zr(C,["\n          ",x,"\n          ",S,"\n          "]),Zr(E,["\n          ",_,"\n          ",C,"\n          "]),Zr(k,["\n          ",E,"\n          "]);var O=document.createComment(" Search results "),j=document.createElement("section");j.setAttribute("id","searchResults-collaborator"),j.setAttribute("class","pa3 flex flex-column h5 overflow-y-scroll bg-white");var T=document.createElement("p");Zr(T,["Search Results"]),Zr(j,["\n            ",T,"\n           ",arguments[4],"\n          "]),Zr(y,["\n          ",w,"\n          ",A,"\n          ",k,"\n          ",O,"\n          ",j,"\n        "]),Zr(l,["\n          ",u,"\n          ",f,"\n        \n        ",g,"\n        ",y,"\n      "]);var F=document.createComment(" invisible div under the modal to capture out of modal click to close "),L=document.createElement("div");return L.onclick=arguments[5],L.setAttribute("class","dn w-100 h-100 fixed top-0 left-0"),Zr(t,["\n        ",n,"\n\n        ",i,"\n        ",a,"\n\n        ",c,"\n        ",l,"\n      ",F,"\n      ",L,"\n    "]),Zr(e,["\n      ",t,"\n    "]),e}(this.close(),this.showCurrentCollaborators(),this.addByUrl,this.searchByName,this.searchResults(),this.close(),this.local.displayed)}},{key:"update",value:function(){return!1}}]),t}(),Hs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),zs=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={displayed:"dn",name:"",description:"",url:"",selectedSection:"",selectedLinks:[],open:o.open.bind(o)},o.close=o.close.bind(o),o.showSections=o.showSections.bind(o),o.setSelectedSection=o.setSelectedSection.bind(o),o.setSelectedLinks=o.setSelectedLinks.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o.handleChange=o.handleChange.bind(o),o.linkDetailsForm=o.linkDetailsForm.bind(o),o.clearLocal=o.clearLocal.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Hs(t,[{key:"open",value:function(e){console.log("opening!"),this.local.displayed="flex",this.rerender()}},{key:"clearLocal",value:function(){this.local.selectedSection="",this.local.selectedLinks=[],this.local.name="",this.local.description="",this.local.url=""}},{key:"close",value:function(e){console.log("closing!"),this.local.displayed="dn",this.clearLocal(),this.rerender()}},{key:"setSelectedSection",value:function(e){var t=this;return function(n){t.local.selectedSection===e?t.local.selectedSection="":t.local.selectedSection=e,t.rerender()}}},{key:"setSelectedLinks",value:function(e){var t=this;return function(n){t.local.selectedLinks.includes(e)?t.local.selectedLinks=t.local.selectedLinks.filter(function(t){return t!==e}):t.local.selectedLinks.push(e),t.rerender()}}},{key:"showSections",value:function(e){var t=this;return function(){var e=document.createElement("section");e.setAttribute("class","w-100 mw7 mt3 h-auto overflow-hidden");var t=document.createElement("fieldset");t.setAttribute("class","w-100 h-100 ma0 pa2 ba bw1 b--black");var n=document.createElement("legend");n.setAttribute("class","pl2 pr2"),Zr(n,["Choose a section for your link to go into - required"]);var r=document.createElement("div");return r.setAttribute("class","mw7 h-100 pa2 flex flex-row overflow-x-scroll"),Zr(r,["\n          ",arguments[0],"\n          "]),Zr(t,["\n        ",n,"\n          ",r,"\n        "]),Zr(e,["\n        ",t,"\n      "]),e}(e.map(function(e){var n=e._id===t.local.selectedSection?"bg-yellow dark-pink":"bg-white navy";return function(){var e=document.createElement("div");e.onclick=arguments[1],e.setAttribute("data-id",arguments[2]),e.setAttribute("style","min-width:180px"),e.setAttribute("class","mr2 h3 overflow-y-scroll dropshadow b--black fl pa2 ba bw1 grow "+arguments[3]);var t=document.createElement("p");return t.setAttribute("class","w-100 tc ma0 f7"),Zr(t,[arguments[0]]),Zr(e,["\n          ",t,"\n        "]),e}(""===e.name?"default":e.name,t.setSelectedSection(e._id),e._id,n)}))}},{key:"showLinks",value:function(e){var t=this;return function(){var e=document.createElement("section");e.setAttribute("class","w-100 mw7 mt3 h-auto overflow-hidden");var t=document.createElement("fieldset");t.setAttribute("class","w-100 h-100 ma0 pa2 ba bw1 b--near-grey");var n=document.createElement("legend");n.setAttribute("class","pl2 pr2"),Zr(n,["Add additional links from the collection - optional"]);var r=document.createElement("div");return r.setAttribute("class","mw7 h-100 pa2 flex flex-row overflow-x-scroll"),Zr(r,["\n          ",arguments[0],"\n          "]),Zr(t,["\n          ",n,"\n          ",r,"\n        "]),Zr(e,["\n        ",t,"\n      "]),e}(e.map(function(e){var n=t.local.selectedLinks.includes(e._id)?"bg-light-green navy":"bg-white navy";return function(){var e=document.createElement("div");e.onclick=arguments[1],e.setAttribute("data-id",arguments[2]),e.setAttribute("style","min-width:180px"),e.setAttribute("class","mr2 h3 overflow-y-scroll dropshadow b--black fl pa2 ba bw1 "+arguments[3]);var t=document.createElement("p");return t.setAttribute("class","w-100 tc ma0 f7"),Zr(t,[arguments[0]]),Zr(e,["\n            ",t,"\n          "]),e}(""===e.name?"default":e.name,t.setSelectedLinks(e._id),e._id,n)}))}},{key:"handleChange",value:function(e){this.local[e.target.name]=e.target.value}},{key:"linkDetailsForm",value:function(){return function(){var e=document.createElement("form");e.onsubmit=arguments[6],e.setAttribute("class","w-100 mt3");var t=document.createElement("fieldset");t.setAttribute("class","w-100 ba bw1 dropshadow b--black mt1");var n=document.createElement("legend");n.setAttribute("class","pl2 pr2"),Zr(n,["URL"]);var r=document.createElement("input");r.onkeyup=arguments[0],r.setAttribute("name","url"),r.setAttribute("value",arguments[1]),r.setAttribute("placeholder","https://yourawesomelink.com"),r.setAttribute("class","w-100 bn pa2 f4 bg-near-white"),Zr(t,["\n          ",n,"\n          ",r,"\n        "]);var o=document.createElement("fieldset");o.setAttribute("class","w-100 ba bw1 dropshadow b--black mt1");var i=document.createElement("legend");i.setAttribute("class","pl2 pr2"),Zr(i,["name"]);var a=document.createElement("input");a.onkeyup=arguments[2],a.setAttribute("name","name"),a.setAttribute("value",arguments[3]),a.setAttribute("placeholder","Your super cool link name"),a.setAttribute("class","w-100 bn pa2 f4 bg-near-white"),Zr(o,["\n          ",i,"\n          ",a,"\n        "]);var s=document.createElement("fieldset");s.setAttribute("class","w-100 ba bw1 dropshadow b--black mt1");var c=document.createElement("legend");c.setAttribute("class","pl2 pr2"),Zr(c,["description"]);var l=document.createElement("input");return l.onkeyup=arguments[4],l.setAttribute("name","description"),l.setAttribute("value",arguments[5]),l.setAttribute("placeholder","A super sweet description of your new link"),l.setAttribute("class","w-100 bn pa2 f4 bg-near-white"),Zr(s,["\n          ",c,"\n          ",l,"\n        "]),Zr(e,["\n        ",t,"\n        ",o,"\n        ",s,"\n      "]),e}(this.handleChange,this.local.url,this.handleChange,this.local.name,this.handleChange,this.local.description,this.handleSubmit)}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""!==this.local.selectedSection){var n={query:{"sections._id":this.local.selectedSection}},r={$push:{"sections.$.links":this.local.selectedLinks}};if(""!==this.local.url){var o={name:this.local.name,description:this.local.description,url:this.local.url};this.state.api.links.create(o).then(function(e){return t.local.selectedLinks.push(e._id),t.state.api.lists.patch(t.state.selectedList._id,r,n)}).then(function(e){t.state.selectedList=e,t.close(),t.emit("render")}).catch(function(e){alert(""+e)})}else this.state.api.lists.patch(this.state.selectedList._id,r,n).then(function(e){t.state.selectedList=e,t.local.selectedLinks=[],t.close(),t.emit("render")}).catch(function(e){alert(e)})}else alert("Make sure to selected a section to add your link to. If there are no sections in your list, make a section, then add your link")}},{key:"createElement",value:function(){var e,t,n=this.state,r=n.selectedList,o=n.links;if(Object.keys(r).length<=0||o.length<=0)return e=Zr,(t=document.createElement("div")).setAttribute("class","dn"),e(t,["no sections to show "]),t;var i=r.sections;return function(){var e=document.createElement("div");e.setAttribute("id","addLinkToSectionModal"),e.setAttribute("style","background:rgba(232, 253, 245, 0.9)"),e.setAttribute("class","w-100 h-100 flex-column justify-center items-center "+arguments[6]+" fixed top-0 left-0 max-z pa4");var t=document.createElement("div");t.setAttribute("class","w-100 h-auto mw7 pa4 ba dropshadow br2 bg-white overflow-y-scroll max-z");var n=document.createElement("header");n.setAttribute("class","flex flex-row items-center justify-between");var r=document.createElement("h2");Zr(r,["Add a link"]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn bg-navy washed-green bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(n,["\n            ",r,"\n            ",o,"\n          "]);var i=document.createElement("h2");Zr(i,["Step 1 - add/select link(s)"]);var a=document.createElement("h3");Zr(a,["Add a new link..."]);var s=document.createElement("h3");Zr(s,["...or select existing ones"]);var c=document.createElement("h2");Zr(c,["Step 2 - select a section"]);var l=document.createElement("h2");Zr(l,["Step 3 - submit"]);var u=document.createElement("section");u.setAttribute("class","h3 w-100 mt4 mb4");var f=document.createElement("button");f.onclick=arguments[1],f.setAttribute("class","h-100 bg-navy pink pl3 pr3 dropshadow bn br0pa2"),Zr(f,["Submit!"]),Zr(u,["\n          ",f,"\n          "]),Zr(t,["\n          ",n,"\n\n          ",i,"\n          ",a,"\n          ",arguments[2],"\n          ",s,"\n          ",arguments[3],"\n\n          ",c,"\n          ",arguments[4],"\n          \n          ",l,"\n          ",u,"\n        "]);var d=document.createComment(" invisible div under the modal to capture out of modal click to close "),h=document.createElement("div");return h.onclick=arguments[5],h.setAttribute("class","dn w-100 h-100 fixed top-0 left-0"),Zr(e,["\n        ",t,"\n        ",d,"\n        ",h,"\n      "]),e}(this.close,this.handleSubmit,this.linkDetailsForm(),this.showLinks(o),this.showSections(i),this.close,this.local.displayed)}},{key:"update",value:function(){return!1}}]),t}(),Ys=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Vs=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={displayed:"dn",selectedLinks:[],open:o.open.bind(o),name:"New friendly section name",description:"A super nice section description."},o.close=o.close.bind(o),o.setSelectedLinks=o.setSelectedLinks.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o.handleChange=o.handleChange.bind(o),o.sectionDetailsForm=o.sectionDetailsForm.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Ys(t,[{key:"open",value:function(e){console.log("opening!"),this.local.displayed="flex",this.rerender()}},{key:"close",value:function(){var e=this;return function(t){console.log("closing!"),e.local.displayed="dn",e.local.name="New friendly section name",e.local.description="A super nice section description.",e.local.selectedLinks=[],e.rerender()}}},{key:"setSelectedLinks",value:function(e){var t=this;return function(n){t.local.selectedLinks.includes(e)?t.local.selectedLinks=t.local.selectedLinks.filter(function(t){return t!==e}):t.local.selectedLinks.push(e),t.rerender()}}},{key:"showLinks",value:function(e){var t=this;return function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt3 mw7 h-auto ma0 overflow-hidden");var t=document.createElement("fieldset");t.setAttribute("class","w-100 h-100 ma0 h4 ba bw1 b--moon-grey");var n=document.createElement("legend");Zr(n,["Choose some links - optional"]);var r=document.createElement("div");return r.setAttribute("class","mw7 h-100 pa0 flex flex-row overflow-x-scroll"),Zr(r,["\n        ",arguments[0],"\n        "]),Zr(t,["\n      ",n,"\n        ",r,"\n      "]),Zr(e,["\n      ",t,"\n    "]),e}(e.map(function(e){var n=t.local.selectedLinks.includes(e._id)?"bg-light-green navy":"bg-white navy";return function(){var e=document.createElement("div");e.onclick=arguments[1],e.setAttribute("data-id",arguments[2]),e.setAttribute("style","min-width:180px"),e.setAttribute("class","mr2 h3 overflow-scroll-y dropshadow b--black fl pa2 ba bw1 grow "+arguments[3]);var t=document.createElement("p");return t.setAttribute("class","w-100 tc ma0 f7"),Zr(t,[arguments[0]]),Zr(e,["\n            ",t,"\n          "]),e}(""===e.name?"default":e.name,t.setSelectedLinks(e._id),e._id,n)}))}},{key:"handleChange",value:function(e){this.local[e.target.name]=e.target.value}},{key:"sectionDetailsForm",value:function(){return function(){var e=document.createElement("form");e.onsubmit=arguments[4],e.setAttribute("class","w-100 mt3");var t=document.createElement("fieldset");t.setAttribute("class","w-100 ba bw1 dropshadow b--black mt1");var n=document.createElement("legend");n.setAttribute("class","pl2 pr2"),Zr(n,["name - required"]);var r=document.createElement("input");r.onkeyup=arguments[0],r.setAttribute("name","name"),r.setAttribute("placeholder",arguments[1]),r.setAttribute("class","w-100 bn pa2 f3 bg-near-white"),Zr(t,["\n          ",n,"\n          ",r,"\n        "]);var o=document.createElement("fieldset");o.setAttribute("class","w-100 ba bw1 dropshadow b--black mt3");var i=document.createElement("legend");i.setAttribute("class","pl2 pr2"),Zr(i,["description - required"]);var a=document.createElement("input");return a.onkeyup=arguments[2],a.setAttribute("name","description"),a.setAttribute("placeholder",arguments[3]),a.setAttribute("class","w-100 bn pa2 f3 bg-near-white"),Zr(o,["\n          ",i,"\n          ",a,"\n        "]),Zr(e,["\n        ",t,"\n        ",o,"\n      "]),e}(this.handleChange,this.local.name,this.handleChange,this.local.description,this.handleSubmit)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.selectedList,r={$push:{sections:{name:this.local.name,description:this.local.description,links:this.local.selectedLinks}}};this.state.api.lists.patch(n._id,r).then(function(e){t.state.selectedList=e,t.close().call(),t.emit("render")}).catch(function(e){alert(e)})}},{key:"createElement",value:function(){var e,t,n=this.state,r=n.selectedList,o=n.links;return Object.keys(r).length<=0||o.length<=0?(e=Zr,(t=document.createElement("div")).setAttribute("class","dn"),e(t,["no sections to show "]),t):function(){var e=document.createElement("div");e.setAttribute("id","addSectionToListModal"),e.setAttribute("style","background:rgba(232, 253, 245, 0.9)"),e.setAttribute("class","w-100 h-100 flex-column justify-center items-center "+arguments[5]+" fixed top-0 left-0 max-z pa4");var t=document.createElement("div");t.setAttribute("class","w-100 h-auto mw7 pa4 ba dropshadow br2 bg-white overflow-y-scroll max-z");var n=document.createElement("header");n.setAttribute("class","flex flex-row items-center justify-between");var r=document.createElement("h2");Zr(r,["Add Section to List"]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn bg-navy washed-green bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(n,["\n            ",r,"\n            ",o,"\n          "]);var i=document.createElement("h2");Zr(i,["Section details"]);var a=document.createElement("button");a.onclick=arguments[1],a.setAttribute("class","bg-navy pink h3 pa2 mt4 dropshadow bn br0pa2"),Zr(a,["Submit!"]),Zr(t,["\n          ",n,"\n          ",i,"\n          ",arguments[2],"\n          ",arguments[3],"\n          ",a,"\n        "]);var s=document.createComment(" invisible div under the modal to capture out of modal click to close "),c=document.createElement("div");return c.onclick=arguments[4],c.setAttribute("class","dn w-100 h-100 fixed top-0 left-0"),Zr(e,["\n        ",t,"\n        ",s,"\n        ",c,"\n      "]),e}(this.close(),this.handleSubmit,this.sectionDetailsForm(),this.showLinks(o),this.close(),this.local.displayed)}},{key:"update",value:function(){return!1}}]),t}(),Ws=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Gs=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={displayed:"dn",featureType:"sections",tags:"",parentid:null,featureid:null,name:"",description:"",url:"",open:o.open.bind(o)},o.close=o.close.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o.handleChange=o.handleChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Ws(t,[{key:"open",value:function(){console.log("opening!"),this.local.displayed="flex",this.rerender()}},{key:"close",value:function(e){console.log("closing!"),this.local.displayed="dn",this.local.name="",this.local.description="",this.local.url="",this.rerender()}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.local.featureType,r=(new FormData(e.currentTarget),{url:this.local.url,name:this.local.name,description:this.local.description,tags:this.local.tags.split(",")});if("links"!==n&&delete r.url,"links"===n&&this.state.api.links.patch(this.local.featureid,r,{}).then(function(e){t.state.selectedLink=e,t.emit("pushState","/lists/"+t.state.selectedList._id),t.close()}).catch(function(e){alert(e)}),"sections"===n){var o={query:{"sections._id":this.local.featureid}},i={$set:{"sections.$.name":this.local.name,"sections.$.description":this.local.description},$push:{"sections.$.tags":this.local.tags}};this.state.api.lists.patch(this.local.parentid,i,o).then(function(e){t.state.selectedList=e,t.emit("render"),t.close()}).catch(function(e){alert(e)})}}},{key:"handleChange",value:function(e){this.local[e.target.name]=e.target.value}},{key:"createElement",value:function(){return function(){var e=document.createElement("div");e.setAttribute("id","EditFeatureModal"),e.setAttribute("style","background:rgba(232, 253, 245, 0.9)"),e.setAttribute("class","w-100 h-100 flex-column justify-center items-center "+arguments[11]+" fixed top-0 left-0 max-z pa4");var t=document.createElement("div");t.setAttribute("class","w-100 h-auto mw7 pa4 ba dropshadow br2 bg-white overflow-y-scroll max-z");var n=document.createElement("header");n.setAttribute("class","flex flex-row items-center justify-between");var r=document.createElement("h2");Zr(r,["Edit Feature"]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn bg-navy washed-green bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(n,["\n            ",r,"\n            ",o,"\n          "]);var i=document.createComment(" Add feature "),a=document.createElement("section");a.setAttribute("class","w-100 mt2 mb2");var s=document.createElement("form");s.setAttribute("id","editFeatureForm"),s.setAttribute("name","editFeatureForm"),s.onsubmit=arguments[9];var c=document.createComment(" URL "),l=document.createElement("fieldset");l.setAttribute("class","w-100 ba bw1 b--black "+arguments[3]);var u=document.createElement("legend");Zr(u,["URL"]);var f=document.createElement("input");f.setAttribute("type","text"),f.setAttribute("name","url"),f.setAttribute("placeholder","url"),f.setAttribute("value",arguments[1]),f.onkeyup=arguments[2],f.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(l,["\n            ",u,"\n            ",f,"\n          "]);var d=document.createComment(" NAME "),h=document.createElement("fieldset");h.setAttribute("class","w-100 ba bw1 b--black");var p=document.createElement("legend");Zr(p,["Name"]);var m=document.createElement("input");m.setAttribute("type","text"),m.setAttribute("name","name"),m.setAttribute("placeholder","name"),m.setAttribute("value",arguments[4]),m.onkeyup=arguments[5],m.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(h,["\n            ",p,"\n            ",m,"\n          "]);var b=document.createComment(" DESCRIPTION "),v=document.createElement("fieldset");v.setAttribute("class","w-100 ba bw1 b--black");var g=document.createElement("legend");Zr(g,["Description"]);var y=document.createElement("textarea");y.setAttribute("type","text"),y.setAttribute("name","description"),y.setAttribute("placeholder","description"),y.onkeyup=arguments[6],y.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(y,[arguments[7]]),Zr(v,["\n            ",g,"\n            ",y,"\n          "]);var w=document.createElement("fieldset");w.setAttribute("class","w-100 ba bw1 b--black");var A=document.createElement("legend");Zr(A,["Tags"]);var k=document.createElement("input");k.setAttribute("type","text"),k.setAttribute("name","tags"),k.onkeyup=arguments[8],k.setAttribute("placeholder","tags, separated, by, comma"),k.setAttribute("class","w-100 pa2 ba bw1 bg-light-gray h3 f6"),Zr(w,["\n            ",A,"\n            ",k,"\n          "]);var E=document.createElement("input");E.setAttribute("type","submit"),E.setAttribute("value","Submit Changes"),E.setAttribute("class","w-100 h3 bn bg-navy washed-green pa2 mt3 mb3 pointer tc"),Zr(s,["\n            ",c,"\n            ",l,"\n          ",d,"\n          ",h,"\n          ",b,"\n          ",v,"\n          ",w,"\n          ",E,"\n        "]),Zr(a,["\n          ",s,"\n          "]),Zr(t,["\n          ",n,"\n\n          ",i,"\n          ",a,"\n        "]);var _=document.createComment(" invisible div under the modal to capture out of modal click to close "),C=document.createElement("div");return C.onclick=arguments[10],C.setAttribute("class","dn w-100 h-100 fixed top-0 left-0"),Zr(e,["\n        ",t,"\n        ",_,"\n        ",C,"\n      "]),e}(this.close,this.local.url,this.handleChange,"links"==this.local.featureType?"fl":"dn",this.local.name,this.handleChange,this.handleChange,this.local.description,this.handleChange,this.handleSubmit,this.close,this.local.displayed)}},{key:"update",value:function(){return!1}}]),t}(),Js={exports:{}},Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";"function"==typeof define&&define.amd?define(e):void 0!==Js.exports?Js.exports=e():window.Sortable=e()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,r,o,i,a,s,c,l,u,f,d,h,p,m,b,v,g,y,w,A,k,E,_,C=[],x=!1,S=!1,O=!1,j=[],T=!1,F=!1,L=/\s+/g,P="Sortable"+(new Date).getTime(),N=window,I=N.document,D=N.parseInt,M=N.setTimeout,R=N.jQuery||N.Zepto,U=N.Polymer,$={capture:!1,passive:!1},q=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),B=!!navigator.userAgent.match(/Edge/i),H=B||q?"cssFloat":"float",z="draggable"in I.createElement("div"),Y=function(){if(q)return!1;var e=I.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),V=!1,W=!1,G=Math.abs,J=Math.min,Z=[],X=function(e,t){var n=me(e),r=D(n.width),o=ke(e,0,t),i=ke(e,1,t),a=o&&me(o),s=i&&me(i),c=a&&D(a.marginLeft)+D(a.marginRight)+Le(o).width,l=s&&D(s.marginLeft)+D(s.marginRight)+Le(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if(o&&"none"!==a.float){var u="left"===a.float?"left":"right";return!i||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||c>=r&&"none"===n[H]||i&&"none"===n[H]&&c+l>r)?"vertical":"horizontal"},K=function(e,t){if(!e||!e.getBoundingClientRect)return N;var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=me(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n||!n.getBoundingClientRect||n===I.body)return N;if(r||t)return n;r=!0}}}while(n=n.parentNode);return N},Q=Se(function(e,t,n,r){if(t.scroll){var o=n?n[P]:window,i=t.scrollSensitivity,a=t.scrollSpeed,u=e.clientX,f=e.clientY,d=(window.innerWidth,window.innerHeight,!1);c!==n&&(ee(),s=t.scroll,l=t.scrollFn,!0===s&&(s=K(n,!0),c=s));var h=0,p=s;do{var m,b,v,y,w,A,k,E,_,S=p,O=Le(S),j=O.top,T=O.bottom,F=O.left,L=O.right,D=O.width,M=O.height;if(S!==N?(m=S.scrollWidth,b=S.scrollHeight,v=me(S),A=D<m&&("auto"===v.overflowX||"scroll"===v.overflowX),k=M<b&&("auto"===v.overflowY||"scroll"===v.overflowY),E=S.scrollLeft,_=S.scrollTop):(m=I.documentElement.scrollWidth,b=I.documentElement.scrollHeight,v=me(I.documentElement),A=D<m&&("auto"===v.overflowX||"scroll"===v.overflowX||"visible"===v.overflowX),k=M<b&&("auto"===v.overflowY||"scroll"===v.overflowY||"visible"===v.overflowY),E=I.documentElement.scrollLeft,_=I.documentElement.scrollTop),y=A&&(G(L-u)<=i&&E+D<m)-(G(F-u)<=i&&!!E),w=k&&(G(T-f)<=i&&_+M<b)-(G(j-f)<=i&&!!_),!C[h])for(var R=0;R<=h;R++)C[R]||(C[R]={});C[h].vx==y&&C[h].vy==w&&C[h].el===S||(C[h].el=S,C[h].vx=y,C[h].vy=w,clearInterval(C[h].pid),!S||0==y&&0==w||(d=!0,C[h].pid=setInterval(function(){r&&0===this.layer&&le.active._emulateDragOver(!0);var t=C[this.layer].vy?C[this.layer].vy*a:0,n=C[this.layer].vx?C[this.layer].vx*a:0;"function"==typeof l&&"continue"!==l.call(o,n,t,e,g,C[this.layer].el)||(C[this.layer].el===N?N.scrollTo(N.pageXOffset+n,N.pageYOffset+t):(C[this.layer].el.scrollTop+=t,C[this.layer].el.scrollLeft+=n))}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&p!==N&&(p=K(p,!1)));x=d}},30),ee=function(){C.forEach(function(e){clearInterval(e.pid)}),C=[]},te=function(e){function t(e,n){return function(r,o,i,a){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,o,i,a),n)(r,o,i,a);var c=(n?r:o).options.group.name;return!0===e||"string"==typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var n={},r=e.group;r&&"object"==(void 0===r?"undefined":Zs(r))||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},ne=function(t){e&&e.parentNode&&e.parentNode[P]&&e.parentNode[P]._computeIsAligned(t)},re=function(e,t){for(var n=t;!n[P];)n=n.parentNode;return e===n},oe=function(e,t,n){for(var r=e.parentNode;r&&!r[P];)r=r.parentNode;r&&r[P][n](Oe(t,{artificialBubble:!0}))},ie=function(){!Y&&n&&me(n,"display","none")},ae=function(){!Y&&n&&me(n,"display","")};I.addEventListener("click",function(e){if(O)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),O=!1,!1},!0);var se,ce=function(t){if(t=t.touches?t.touches[0]:t,e){var n=function(e,t){for(var n=0;n<j.length;n++)if(!j[n].children.length){var r=Le(j[n]),o=j[n][P].options.emptyInsertThreshold,i=e>=r.left-o&&e<=r.right+o,a=t>=r.top-o&&t<=r.bottom+o;if(i&&a)return j[n]}}(t.clientX,t.clientY);n&&n[P]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:n,rootEl:n})}};function le(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Oe({},t),e[P]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return X(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:D(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==le.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var r in n)!(r in t)&&(t[r]=n[r]);for(var o in te(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&z,t.supportPointer?de(e,"pointerdown",this._onTapStart):(de(e,"mousedown",this._onTapStart),de(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(de(e,"dragover",this),de(e,"dragenter",this)),j.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function ue(e,t,n,r){if(e){n=n||I;do{if(null!=t&&(">"===t[0]&&e.parentNode===n&&xe(e,t.substring(1))||xe(e,t))||r&&e===n)return e;if(e===n)break}while(e=fe(e))}return null}function fe(e){return e.host&&e!==I&&e.host.nodeType?e.host:e.parentNode}function de(e,t,n){e.addEventListener(t,n,$)}function he(e,t,n){e.removeEventListener(t,n,$)}function pe(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(L," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(L," ")}}function me(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return I.defaultView&&I.defaultView.getComputedStyle?n=I.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function be(e){var t="";do{var n=me(e,"transform");n&&"none"!==n&&(t=n+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function ve(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function ge(e,t,n,o,i,a,s,c,l){var u,f=(e=e||t[P]).options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||q||B?(u=I.createEvent("Event")).initEvent(n,!0,!0):u=new CustomEvent(n,{bubbles:!0,cancelable:!0}),u.to=i||t,u.from=a||t,u.item=o||t,u.clone=r,u.oldIndex=s,u.newIndex=c,u.originalEvent=l,t&&t.dispatchEvent(u),f[d]&&f[d].call(e,u)}function ye(e,t,n,r,o,i,a,s){var c,l,u=e[P],f=u.options.onMove;return!window.CustomEvent||q||B?(c=I.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=o||t,c.relatedRect=i||Le(t),c.willInsertAfter=s,c.originalEvent=a,e.dispatchEvent(c),f&&(l=f.call(u,c,a)),l}function we(e){e.draggable=!1}function Ae(){V=!1}function ke(t,r,o){for(var i=0,a=0,s=t.children;a<s.length;){if("none"!==s[a].style.display&&s[a]!==n&&s[a]!==e&&ue(s[a],o.draggable,t,!1)){if(i===r)return s[a];i++}a++}return null}function Ee(e){for(var t=e.lastElementChild;(t===n||"none"===t.style.display)&&(t=t.previousElementSibling););return t||null}function _e(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Ce(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==r&&n++;return n}function xe(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(yn){return!1}return!1}function Se(e,t){return function(){if(!se){var n=arguments,r=this;se=M(function(){1===n.length?e.call(r,n[0]):e.apply(r,n),se=void 0},t)}}}function Oe(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function je(e){return U&&U.dom?U.dom(e).cloneNode(!0):R?R(e).clone(!0)[0]:e.cloneNode(!0)}function Te(e){return M(e,0)}function Fe(e){return clearTimeout(e)}function Le(e,t,n){if(e.getBoundingClientRect||e===N){var r,o,i,a,s,c,l;if(e!==N?(o=(r=e.getBoundingClientRect()).top,i=r.left,a=r.bottom,s=r.right,c=r.height,l=r.width):(o=0,i=0,a=window.innerHeight,s=window.innerWidth,c=window.innerHeight,l=window.innerWidth),n&&e!==N){if(t=t||e.parentNode,!q)do{if(t&&t.getBoundingClientRect&&"none"!==me(t,"transform")){var u=t.getBoundingClientRect();o-=u.top+D(me(t,"border-top-width")),i-=u.left+D(me(t,"border-left-width")),a=o+r.height,s=i+r.width;break}}while(t=t.parentNode);var f=be(e),d=f&&f.a,h=f&&f.d;f&&(a=(o/=h)+(c/=h),s=(i/=d)+(l/=d))}return{top:o,left:i,bottom:a,right:s,width:l,height:c}}}return de(I,"dragover",ce),de(I,"mousemove",ce),de(I,"touchmove",ce),le.prototype={constructor:le,_computeIsAligned:function(t){var r;if(n&&!Y?(ie(),r=I.elementFromPoint(t.clientX,t.clientY),ae()):r=t.target,r=ue(r,this.options.draggable,this.el,!1),!W&&e&&e.parentNode===this.el){for(var o,i,a,s,c,l,u,f,d=this.el.children,h=0;h<d.length;h++)ue(d[h],this.options.draggable,this.el,!1)&&d[h]!==r&&(d[h].sortableMouseAligned=(o=t.clientX,i=t.clientY,a=d[h],s=this._getDirection(t,null),this.options,void 0,void 0,void 0,void 0,c=Le(a),l="vertical"===s?c.left:c.top,u="vertical"===s?c.right:c.bottom,l<(f="vertical"===s?o:i)&&f<u));ue(r,this.options.draggable,this.el,!0)||(w=null),W=!0,M(function(){W=!1},30)}},_getDirection:function(t,n){return"function"==typeof this.options.direction?this.options.direction.call(this,t,n,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n,r=this,o=this.el,i=this.options,s=i.preventOnFilter,c=t.type,l=t.touches&&t.touches[0],u=(l||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,d=i.filter;if(function(e){Z.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Z.push(r)}}(o),(!q||t.artificialBubble||re(o,u))&&!e&&!(/mousedown|pointerdown/.test(c)&&0!==t.button||i.disabled||f.isContentEditable))if(u=ue(u,i.draggable,o,!1)){if(a!==u){if(n=Ce(u,i.draggable),"function"==typeof d){if(d.call(this,t,u,this))return ge(r,f,"filter",u,o,o,n),void(s&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some(function(e){if(e=ue(f,e.trim(),o,!1))return ge(r,e,"filter",u,o,o,n),!0})))return void(s&&t.cancelable&&t.preventDefault());i.handle&&!ue(f,i.handle,o,!1)||this._prepareDragStart(t,l,u,n)}}else q&&oe(o,t,"_onTapStart")}},_handleAutoScroll:function(t,n){if(e&&this.options.scroll){var r=t.clientX,o=t.clientY,i=I.elementFromPoint(r,o),a=this;if(n||B||q){Q(t,a.options,i,n);var s=K(i,!0);!x||p&&r===m&&o===b||(p&&clearInterval(p),p=setInterval(function(){if(e){var i=K(I.elementFromPoint(r,o),!0);i!==s&&(s=i,ee(),Q(t,a.options,s,n))}},10),m=r,b=o)}else{if(!a.options.bubbleScroll||K(i,!0)===window)return void ee();Q(t,a.options,K(i,!1),!1)}}},_prepareDragStart:function(n,r,s,c){var l,f=this,h=f.el,p=f.options,m=h.ownerDocument;s&&!e&&s.parentNode===h&&(o=h,t=(e=s).parentNode,i=e.nextSibling,a=s,d=p.group,u=c,v={target:e,clientX:(r||n).clientX,clientY:(r||n).clientY},this._lastX=(r||n).clientX,this._lastY=(r||n).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",l=function(){f._disableDelayedDrag(),e.draggable=f.nativeDraggable,f._triggerDragStart(n,r),ge(f,o,"choose",e,o,o,u),pe(e,p.chosenClass,!0)},p.ignore.split(",").forEach(function(t){ve(e,t.trim(),we)}),p.supportPointer?de(m,"pointerup",f._onDrop):(de(m,"mouseup",f._onDrop),de(m,"touchend",f._onDrop),de(m,"touchcancel",f._onDrop)),p.delay?(de(m,"mouseup",f._disableDelayedDrag),de(m,"touchend",f._disableDelayedDrag),de(m,"touchcancel",f._disableDelayedDrag),de(m,"mousemove",f._delayedDragTouchMoveHandler),de(m,"touchmove",f._delayedDragTouchMoveHandler),p.supportPointer&&de(m,"pointermove",f._delayedDragTouchMoveHandler),f._dragStartTimer=M(l,p.delay)):l())},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;J(G(t.clientX-this._lastX),G(t.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),he(e,"mouseup",this._disableDelayedDrag),he(e,"touchend",this._disableDelayedDrag),he(e,"touchcancel",this._disableDelayedDrag),he(e,"mousemove",this._delayedDragTouchMoveHandler),he(e,"touchmove",this._delayedDragTouchMoveHandler),he(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||("touch"==t.pointerType?t:null),!this.nativeDraggable||n?this.options.supportPointer?de(I,"pointermove",this._onTouchMove):de(I,n?"touchmove":"mousemove",this._onTouchMove):(de(e,"dragend",this),de(o,"dragstart",this._onDragStart));try{I.selection?Te(function(){I.selection.empty()}):window.getSelection().removeAllRanges()}catch(pc){}},_dragStarted:function(t){if(S=!1,o&&e){this.nativeDraggable&&(de(I,"dragover",this._handleAutoScroll),de(I,"dragover",ne));var n=this.options;!t&&pe(e,n.dragClass,!1),pe(e,n.ghostClass,!0),me(e,"transform",""),le.active=this,t&&this._appendGhost(),ge(this,o,"start",e,o,o,u)}else this._nulling()},_emulateDragOver:function(t){if(g){if(this._lastX===g.clientX&&this._lastY===g.clientY&&!t)return;this._lastX=g.clientX,this._lastY=g.clientY,ie();for(var n=I.elementFromPoint(g.clientX,g.clientY),r=n;n&&n.shadowRoot;)r=n=n.shadowRoot.elementFromPoint(g.clientX,g.clientY);if(r)do{if(r[P]&&r[P]._onDragOver({clientX:g.clientX,clientY:g.clientY,target:n,rootEl:r})&&!this.options.dragoverBubble)break;n=r}while(r=r.parentNode);e.parentNode[P]._computeIsAligned(g),ae()}},_onTouchMove:function(e){if(v){var t=this.options,r=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=n&&be(n),s=n&&a&&a.a,c=n&&a&&a.d,l=(i.clientX-v.clientX+o.x)/(s||1),u=(i.clientY-v.clientY+o.y)/(c||1),f=e.touches?"translate3d("+l+"px,"+u+"px,0)":"translate("+l+"px,"+u+"px)";if(!le.active&&!S){if(r&&J(G(i.clientX-this._lastX),G(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}this._handleAutoScroll(i,!0),y=!0,g=i,me(n,"webkitTransform",f),me(n,"mozTransform",f),me(n,"msTransform",f),me(n,"transform",f),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!n){var t=Le(e,this.options.fallbackOnBody?I.body:o,!0),r=(me(e),this.options);pe(n=e.cloneNode(!0),r.ghostClass,!1),pe(n,r.fallbackClass,!0),pe(n,r.dragClass,!0),me(n,"box-sizing","border-box"),me(n,"margin",0),me(n,"top",t.top),me(n,"left",t.left),me(n,"width",t.width),me(n,"height",t.height),me(n,"opacity","0.8"),me(n,"position","fixed"),me(n,"zIndex","100000"),me(n,"pointerEvents","none"),r.fallbackOnBody&&I.body.appendChild(n)||o.appendChild(n)}},_onDragStart:function(t,n){var i=this,a=t.dataTransfer,s=i.options;(r=je(e)).draggable=!1,r.style["will-change"]="",this._hideClone(),pe(r,i.options.chosenClass,!1),i._cloneId=Te(function(){i.options.removeCloneOnHide||o.insertBefore(r,e),ge(i,o,"clone",e)}),!n&&pe(e,s.dragClass,!0),n?(O=!0,i._loopId=setInterval(i._emulateDragOver,50)):(he(I,"mouseup",i._onDrop),he(I,"touchend",i._onDrop),he(I,"touchcancel",i._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(i,a,e)),de(I,"drop",i),me(e,"transform","translateZ(0)")),S=!0,i._dragStartId=Te(i._dragStarted.bind(i,n)),de(I,"selectstart",i)},_onDragOver:function(r){var a,s,c,l=this.el,f=r.target,p=this.options,m=p.group,b=le.active,v=d===m,g=p.sort,C=this;if(!V&&(!q||r.rootEl||r.artificialBubble||re(l,f))){if(void 0!==r.preventDefault&&r.cancelable&&r.preventDefault(),y=!0,f=ue(f,p.draggable,l,!0),ue(r.target,null,e,!0)||f.animated)return z();if(f!==e&&(O=!1),b&&!p.disabled&&(v?g||(c=!o.contains(e)):h===this||(this.lastPutMode=d.checkPull(this,b,e,r))&&m.checkPut(this,b,e,r))){var S=this._getDirection(r,f);if(a=Le(e),c)return this._hideClone(),t=o,i?o.insertBefore(e,i):o.appendChild(e),z();if(0===l.children.length||l.children[0]===n||function(e,t,n){var r=Le(Ee(n)),o="vertical"===t?e.clientY:e.clientX,i="vertical"===t?e.clientX:e.clientY,a="vertical"===t?r.bottom:r.right,s="vertical"===t?r.left:r.top,c="vertical"===t?r.right:r.bottom;return"vertical"===t?i>c+10||i<=c&&o>a&&i>=s:o>a&&i>s||o<=a&&i>c+10}(r,S,l)&&!e.animated){if(0!==l.children.length&&l.children[0]!==n&&l===r.target&&(f=Ee(l)),f&&(s=Le(f)),v?b._hideClone():b._showClone(this),!1!==ye(o,l,e,a,f,s,r,!!f))return l.appendChild(e),t=l,_=null,Y(),this._animate(a,e),f&&this._animate(s,f),z()}else if(f&&f!==e&&f.parentNode===l){var j,L=0,D=f.sortableMouseAligned,R=e.parentNode!==l,U=function(e,t){for(var n=K(n,!0),r=Le(e)[t];n;){var o=Le(n)[t];if(!("top"===t||"left"===t?r>=o:r<=o))return!0;if(n===N)break;n=K(n,!1)}return!1}(f,"vertical"===S?"top":"left");if(w!==f&&(k=null,j=Le(f)["vertical"===S?"top":"left"],T=!1),function(t,n,r){var o=e===e&&_||Le(e),i=n===e&&_||Le(n),a="vertical"===r?o.left:o.top,s="vertical"===r?o.right:o.bottom,c="vertical"===r?o.width:o.height,l="vertical"===r?i.left:i.top,u="vertical"===r?i.right:i.bottom,f="vertical"===r?i.width:i.height;return a===l||s===u||a+c/2===l+f/2}(0,f,S)&&D||R||U||p.invertSwap||"insert"===k||"swap"===k?("swap"!==k&&(F=p.invertSwap||R||x||U),L=function(t,n,r,o,i,a,s){var c=Le(n),l="vertical"===r?t.clientY:t.clientX,u="vertical"===r?c.height:c.width,f="vertical"===r?c.top:c.left,d="vertical"===r?c.bottom:c.right,h=Le(e),p=!1;if(!a)if(s&&E<u*o){if(!T&&(1===A?l>f+u*i/2:l<d-u*i/2)&&(T=!0),T)p=!0;else if("vertical"===r?h.top:h.left,"vertical"===r?h.bottom:h.right,1===A?l<f+E:l>d-E)return-1*A}else if(l>f+u*(1-o)/2&&l<d-u*(1-o)/2)return l>f+u/2?-1:1;return(p=p||a)&&(l<f+u*i/2||l>d-u*i/2)?l>f+u/2?1:-1:0}(r,f,S,p.swapThreshold,null==p.invertedSwapThreshold?p.swapThreshold:p.invertedSwapThreshold,F,w===f),k="swap"):(L=function(t,n){return Ce(e,n.draggable)<Ce(t,n.draggable)?1:-1}(f,p),k="insert"),0===L)return z();_=null,w=f,A=L,s=Le(f);var $=f.nextElementSibling,B=!1,H=ye(o,l,e,a,f,s,r,B=1===L);if(!1!==H)return 1!==H&&-1!==H||(B=1===H),V=!0,M(Ae,30),v?b._hideClone():b._showClone(this),B&&!$?l.appendChild(e):f.parentNode.insertBefore(e,B?$:f),t=e.parentNode,void 0===j||F||(E=G(j-Le(f)["vertical"===S?"top":"left"])),Y(),!R&&this._animate(s,f),this._animate(a,e),z()}if(l.contains(e))return z()}return q&&!r.rootEl&&oe(l,r,"_onDragOver"),!1}function z(){return b&&(pe(e,h?h.options.ghostClass:b.options.ghostClass,!1),pe(e,p.ghostClass,!0)),h!==C&&C!==le.active?h=C:C===le.active&&(h=null),(f===e&&!e.animated||f===l&&!f.animated)&&(w=null),p.dragoverBubble||r.rootEl||f===I||(C._handleAutoScroll(r),e.parentNode[P]._computeIsAligned(r)),!p.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),!0}function Y(){ge(C,o,"change",f,l,o,u,Ce(e,p.draggable),r)}},_animate:function(t,n){var r=this.options.animation;if(r){var o=Le(n);if(n===e&&(_=o),1===t.nodeType&&(t=Le(t)),t.left+t.width/2!==o.left+o.width/2||t.top+t.height/2!==o.top+o.height/2){var i=be(this.el),a=i&&i.a,s=i&&i.d;me(n,"transition","none"),me(n,"transform","translate3d("+(t.left-o.left)/(a||1)+"px,"+(t.top-o.top)/(s||1)+"px,0)"),n.offsetWidth,me(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),me(n,"transform","translate3d(0,0,0)")}"number"==typeof n.animated&&clearTimeout(n.animated),n.animated=M(function(){me(n,"transition",""),me(n,"transform",""),n.animated=!1},r)}},_offUpEvents:function(){var e=this.el.ownerDocument;he(I,"touchmove",this._onTouchMove),he(I,"pointermove",this._onTouchMove),he(e,"mouseup",this._onDrop),he(e,"touchend",this._onDrop),he(e,"pointerup",this._onDrop),he(e,"touchcancel",this._onDrop),he(I,"selectstart",this)},_onDrop:function(a){var s=this.el,c=this.options;S=!1,x=!1,F=!1,T=!1,clearInterval(this._loopId),clearInterval(p),ee(),clearTimeout(se),se=void 0,clearTimeout(this._dragStartTimer),Fe(this._cloneId),Fe(this._dragStartId),he(I,"mousemove",this._onTouchMove),this.nativeDraggable&&(he(I,"drop",this),he(s,"dragstart",this._onDragStart),he(I,"dragover",this._handleAutoScroll),he(I,"dragover",ne)),this._offUpEvents(),a&&(y&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),(o===t||h&&"clone"!==h.lastPutMode)&&r&&r.parentNode&&r.parentNode.removeChild(r),e&&(this.nativeDraggable&&he(e,"dragend",this),we(e),e.style["will-change"]="",pe(e,h?h.options.ghostClass:this.options.ghostClass,!1),pe(e,this.options.chosenClass,!1),ge(this,o,"unchoose",e,t,o,u,null,a),o!==t?((f=Ce(e,c.draggable))>=0&&(ge(null,t,"add",e,t,o,u,f,a),ge(this,o,"remove",e,t,o,u,f,a),ge(null,t,"sort",e,t,o,u,f,a),ge(this,o,"sort",e,t,o,u,f,a)),h&&h.save()):e.nextSibling!==i&&(f=Ce(e,c.draggable))>=0&&(ge(this,o,"update",e,t,o,u,f,a),ge(this,o,"sort",e,t,o,u,f,a)),le.active&&(null!=f&&-1!==f||(f=u),ge(this,o,"end",e,t,o,u,f,a),this.save()))),this._nulling()},_nulling:function(){o=e=t=n=i=r=a=s=c=C.length=p=m=b=v=g=y=f=u=w=A=_=h=d=le.active=null,Z.forEach(function(e){e.checked=!0}),Z.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,i=this.options;r<o;r++)ue(e=n[r],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||_e(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var o=n.children[r];ue(o,this.options.draggable,n,!1)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ue(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&te(n)},destroy:function(){var e=this.el;e[P]=null,he(e,"mousedown",this._onTapStart),he(e,"touchstart",this._onTapStart),he(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(he(e,"dragover",this),he(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),j.splice(j.indexOf(this.el),1),this.el=e=null},_hideClone:function(){r.cloneHidden||(me(r,"display","none"),r.cloneHidden=!0,r.parentNode&&this.options.removeCloneOnHide&&r.parentNode.removeChild(r))},_showClone:function(t){"clone"===t.lastPutMode?r.cloneHidden&&(o.contains(e)&&!this.options.group.revertClone?o.insertBefore(r,e):i?o.insertBefore(r,i):o.appendChild(r),this.options.group.revertClone&&this._animate(e,r),me(r,"display",""),r.cloneHidden=!1):this._hideClone()}},de(I,"touchmove",function(e){(le.active||S)&&e.cancelable&&e.preventDefault()}),le.utils={on:de,off:he,css:me,find:ve,is:function(e,t){return!!ue(e,t,e,!1)},extend:Oe,throttle:Se,closest:ue,toggleClass:pe,clone:je,index:Ce,nextTick:Te,cancelNextTick:Fe,detectDirection:X,getChild:ke},le.create=function(e,t){return new le(e,t)},le.version="1.8.3",le}),Js=Js.exports;var Xs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ks=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={editable:!1,toggleEditable:o.toggleEditable.bind(o),sortable:null,sortables:[]},o.makeSortable=o.makeSortable.bind(o),o.handleSorting=o.handleSorting.bind(o),o.CreateLinkList=o.CreateLinkList.bind(o),o.CreateSectionList=o.CreateSectionList.bind(o),o.handleRemove=o.handleRemove.bind(o),o.removeBtn=o.removeBtn.bind(o),o.editBtn=o.editBtn.bind(o),o.handleEdit=o.handleEdit.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),Xs(t,[{key:"handleEdit",value:function(e,t){var n=this;return function(r){if("links"===e)n.state.api.links.get(t).then(function(e){var r=e;n.state.components.EditFeatureModal.featureType="links",n.state.components.EditFeatureModal.name=r.name,n.state.components.EditFeatureModal.description=r.description,n.state.components.EditFeatureModal.featureid=t,n.state.components.EditFeatureModal.url=r.url,n.state.components.EditFeatureModal.open()}).catch(function(e){alert(e)});else if("sections"===e){var o={query:{"sections._id":t}};n.state.api.lists.find(o).then(function(e){var r=e.data[0],o=r.sections.find(function(e){return e._id===t});n.state.components.EditFeatureModal.featureType="sections",n.state.components.EditFeatureModal.parentid=r._id,n.state.components.EditFeatureModal.name=o.name,n.state.components.EditFeatureModal.description=o.description,n.state.components.EditFeatureModal.featureid=o._id,n.state.components.EditFeatureModal.open()}).catch(function(e){alert(e)})}}}},{key:"editBtn",value:function(e,t){var n=!0===this.local.editable?"fl":"dn";return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class",arguments[1]+" f7 bn bg-light-green navy mr2"),Zr(e,["edit"]),e}(this.handleEdit(e,t),n)}},{key:"handleRemove",value:function(e,t,n){var r=this;return function(o){if(!0===confirm("are you sure you want to remove "+n+" at "+t+" of "+e+"?")){var i=void 0,a=void 0;"links"===e?(i={query:{"sections._id":t}},a={$pull:{"sections.$.links":n}}):"sections"===e&&(i=null,a={$pull:{sections:{_id:n}}}),r.state.api.lists.patch(r.state.selectedList._id,a,i).then(function(e){r.state.selectedList=e,r.emit("render")}).catch(function(e){alert(e)})}}}},{key:"removeBtn",value:function(e,t,n){var r=!0===this.local.editable?"fl":"dn";return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class",arguments[1]+" f7 bn bg-near-white red"),Zr(e,["remove"]),e}(this.handleRemove(e,t,n),r)}},{key:"CreateSectionList",value:function(e,t){var n=this;if(e&&e.length<=0)return" no sections! ";var r=this.state.selectedList._id;return e.map(function(e){return function(){var e=document.createElement("li");e.setAttribute("data-id",arguments[6]),e.setAttribute("class","mt4 pa3-ns pa2 bg-washed-blue dropshadow ba bw1 b--black");var t=document.createElement("p");t.setAttribute("class","ma0 w-100 flex flex-row justify-end"),Zr(t,[arguments[0]," ",arguments[1]]);var n=document.createElement("h2");n.setAttribute("class","f3 lh-title ma0"),Zr(n,[arguments[2]]);var r=document.createElement("p");r.setAttribute("class","ma0 f4 mt1"),Zr(r,[arguments[3]]);var o=document.createElement("ul");return o.setAttribute("data-sectionid",arguments[4]),o.setAttribute("class","list nested-sortable pl0 w-100"),Zr(o,["\n            ",arguments[5],"\n          "]),Zr(e,["\n          ",t,"\n          ",n,"\n          ",r,"\n          ",o,"\n        "]),e}(n.editBtn("sections",e._id),n.removeBtn("sections",r,e._id),e.name,e.description,e._id,n.CreateLinkList(e.links,t,e),e._id)})}},{key:"CreateLinkList",value:function(e,t,n){var r=this;return e&&e.length<=0?" no links! ":e.map(function(e){var o=t.find(function(t){return t._id==e}),i=o.url?o.url:"#";return function(){var e=document.createElement("li");e.setAttribute("data-id",arguments[7]),e.setAttribute("class","mt2 dropshadow pt2 pl3 pr3 pb4 ba bg-washed-red ");var t=document.createElement("p");t.setAttribute("class","ma0 w-100 flex flex-row justify-end"),Zr(t,[arguments[0]," ",arguments[1]]);var n=document.createElement("a");n.setAttribute("href",arguments[6]),n.setAttribute("target","_blank"),n.setAttribute("class","link black");var r=document.createElement("small");r.setAttribute("class","ma0 font-tiny b");var o=document.createElement("a");o.setAttribute("href",arguments[2]),o.setAttribute("target","blank"),o.setAttribute("class","link black"),Zr(o,[arguments[3]]),Zr(r,[o]);var i=document.createElement("h3");i.setAttribute("class","ma0"),Zr(i,[arguments[4]]);var a=document.createElement("p");return a.setAttribute("class","ma0"),Zr(a,[arguments[5]]),Zr(n,["\n          ",r,"\n          ",i,"\n          ",a,"\n          "]),Zr(e,["\n          ",t,"\n          ",n,"\n        "]),e}(r.editBtn("links",o._id),r.removeBtn("links",n._id,o._id),i,i,o.name,o.description,i,o._id)})}},{key:"toggleEditable",value:function(e){this.local.editable=!this.local.editable,this.rerender()}},{key:"makeSortable",value:function(e){var t=this;this.local.sortables=[];var n=[].slice.call(e.querySelectorAll(".nested-sortable")),r={animation:150,direction:"vertical",onMove:function(e){return 0!=t.local.editable},onSort:this.handleSorting()};n.forEach(function(e){t.local.sortables.push(new Js(e,r))}),this.local.sortable=new Js(e,r)}},{key:"handleSorting",value:function(e){var t=this;return function(e){var n=t.local.sortables.map(function(e){return{id:e.el.dataset.sectionid,links:e.toArray()}}),r={sections:t.local.sortable.toArray().map(function(e){var r=t.state.selectedList.sections.find(function(t){return t._id===e});return r.links=n.find(function(t){return t.id===e}).links,r})},o=t.state.selectedList._id;t.state.api.lists.patch(o,r,{}).then(function(e){console.log("patched:",e.links),e.linksDetails,e.links,t.state.selectedList=e}).catch(function(e){alert(e)})}}},{key:"createElement",value:function(){var e=this.state.selectedList;if(Object.keys(e).length<=0)return document.createElement("ul");e.linksDetails,e.links;var t=e.sections,n=e.sectionsDetails;return function(){var e=document.createElement("ul");return e.setAttribute("class","list pl0 mt4 w-100 pt2 pb5 flex-grow-1"),Zr(e,["\n        ",arguments[0],"\n      "]),e}(this.CreateSectionList(t,n))}},{key:"update",value:function(){return!0}},{key:"load",value:function(e){this.makeSortable(e)}},{key:"afterupdate",value:function(e){this.makeSortable(e)}}]),t}(),Qs=function(e){return e.length<=0?"":function(){var e=document.createElement("p");return e.setAttribute("class","ma0 pa0 f6"),Zr(e,["Together with ",arguments[0]]),e}(e.map(function(t,n){return function(){var e=document.createElement("a");e.setAttribute("href","/users/"+arguments[1]),e.setAttribute("class","pa0 ma0 link black");var t=document.createElement("span");return t.setAttribute("class","underline"),Zr(t,[arguments[0]]),Zr(e,[t,arguments[2]]),e}(t.username,t.username,n<e.length-1?" \xb7 ":"")}))},ec=function(e,t,n){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","ma0 pa0 bn  bg-white f6"),Zr(e,[arguments[1]," Followers"]),e}(function(t){e.components.ShowFollowersModal.open()},n.length)},tc=function(e){return function(){var e=document.createElement("p");e.setAttribute("class","f6 mt1 ma0");var t=document.createElement("a");return t.setAttribute("href","/users/"+arguments[0]),t.setAttribute("class","link black underline"),Zr(t,[arguments[1]]),Zr(e,["By ",t]),e}(e.username,e.username)},nc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),rc=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={editable:!1,name:"",description:"",toggleEditable:o.toggleEditable.bind(o),handleSubmit:o.handleSubmit.bind(o)},o.handleChange=o.handleChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),nc(t,[{key:"toggleEditable",value:function(e){this.local.editable=!this.local.editable,!1===this.local.editable&&this.local.handleSubmit(this.state,this.emit).call(),this.rerender()}},{key:"handleChange",value:function(e){this.local[e.target.name]=e.target.value}},{key:"handleSubmit",value:function(e,t){var n=this;return function(t){var r={name:n.local.name,description:n.local.description};e.api.lists.patch(e.selectedList._id,r,{}).then(function(t){e.selectedList=t,n.rerender()}).catch(function(e){alert(e)})}}},{key:"createElement",value:function(){var e,t,n=this.state.selectedList;if(Object.keys(n).length<=0)return e=Zr,(t=document.createElement("section")).setAttribute("class","tc w-100"),e(t,["no details"]),t;var r=n.name,o=n.description,i=n.ownerDetails,a=n.collaboratorDetails,s=n.followersDetails;return this.local.name=r,this.local.description=o,!0===this.local.editable?function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("p");t.setAttribute("class","mb2 pa0 f6"),Zr(t,[arguments[0]]);var n=document.createElement("form");n.onsubmit=arguments[5],n.setAttribute("class","w-100 flex flex-column");var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("value",arguments[1]),r.setAttribute("name","name"),r.onkeyup=arguments[2],r.setAttribute("class","bn f2 lh-title outline");var o=document.createElement("input");return o.setAttribute("type","text"),o.setAttribute("value",arguments[3]),o.setAttribute("name","description"),o.onkeyup=arguments[4],o.setAttribute("class","bn f4 lh-title outline"),Zr(n,["\n          ",r,"\n          ",arguments[6],"\n          ",arguments[7],"\n          ",o,"\n        "]),Zr(e,["\n        ",t,"\n        ",n,"\n      "]),e}(ec(this.state,this.emit,s),r,this.handleChange,o,this.handleChange,this.local.handleSubmit(this.state,this.emit),tc(i),Qs(a)):function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("p");t.setAttribute("class","mb2 pa0 f6"),Zr(t,[arguments[0]]);var n=document.createElement("h2");n.setAttribute("class","f2 lh-title ma0"),Zr(n,[arguments[1]]);var r=document.createElement("h4");return r.setAttribute("class","f4 mt2"),Zr(r,[arguments[2]]),Zr(e,["\n        ",t,"\n        ",n,"\n        ",arguments[3],"\n        ",arguments[4],"\n        ",r,"\n      "]),e}(ec(this.state,this.emit,s),r,o,tc(i),Qs(a))}},{key:"update",value:function(){return!0}}]),t}(),oc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ic=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.local=n.components[e]={open:o.open.bind(o),displayed:"dn"},o.state=n,o.emit=r,o.rerender=o.rerender.bind(o),o.showCurrentFollowers=o.showCurrentFollowers.bind(o),o.removeFollower=o.removeFollower.bind(o),o.showRemoveButton=o.showRemoveButton.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),oc(t,[{key:"open",value:function(){console.log("opening!"),this.local.displayed="flex",this.rerender()}},{key:"close",value:function(){var e=this;return function(t){console.log("closing!"),e.local.displayed="dn",e.rerender()}}},{key:"removeFollower",value:function(e){var t=this;return function(n){var r={$pull:{followers:n.currentTarget.dataset.userid}};!0===confirm("do you really want to stop following this list?")&&t.state.api.lists.patch(e,r,{}).then(function(e){t.state.selectedList=e,t.rerender()}).catch(function(e){return alert("error removing follower",e),e})}}},{key:"showRemoveButton",value:function(e){var t=this.state.selectedList._id;if(this.state.user.authenticated&&this.state.user.id===e)return function(){var e=document.createElement("button");return e.setAttribute("data-userid",arguments[0]),e.onclick=arguments[1],e.setAttribute("class","dropshadow pa2 bg-near-white red bn"),Zr(e,["Remove"]),e}(e,this.removeFollower(t))}},{key:"showCurrentFollowers",value:function(){var e=this;return this.state.selectedList._id,this.state.selectedList.hasOwnProperty("followersDetails")&&this.state.selectedList.followersDetails.length>0?this.state.selectedList.followersDetails.map(function(t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 bn bg-light-gray flex flex-column mb2");var t=document.createElement("div");t.setAttribute("class","w-100 pa3 flex flex-row items-center");var n=document.createElement("div");n.setAttribute("class","w-two-thirds");var r=document.createElement("a");r.setAttribute("href","/users/"+arguments[0]),r.setAttribute("class","link black w-100 ma0 b"),Zr(r,[arguments[1]]),Zr(n,["\n          ",r,"\n          "]);var o=document.createElement("div");return o.setAttribute("class","w-third tr"),Zr(o,["\n          ",arguments[2],"\n          "]),Zr(t,["\n          ",n,"\n          ",o,"\n        "]),Zr(e,["\n        ",t,"\n      "]),e}(t.username,t.username,e.showRemoveButton(t._id))}):"no followers yet"}},{key:"createElement",value:function(){return function(){var e=document.createElement("div");e.setAttribute("id","ShowFollowersModal"),e.setAttribute("style","background:rgba(232, 253, 245, 0.9)"),e.setAttribute("class","w-100 h-100 flex-column justify-center items-center "+arguments[3]+" fixed top-0 left-0 max-z pa4");var t=document.createElement("div");t.setAttribute("class","w-100 h-auto mw7 pa4 ba dropshadow br2 bg-white overflow-y-scroll max-z");var n=document.createElement("header");n.setAttribute("class","flex flex-row items-center justify-between");var r=document.createElement("h2");Zr(r,["People following this list"]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn bg-navy washed-green bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(n,["\n          ",r,"\n          ",o,"\n        "]);var i=document.createComment(" Current Collaborators "),a=document.createElement("section");a.setAttribute("class","w-100 mt2 mb2"),Zr(a,["\n          ",arguments[1],"\n        "]),Zr(t,["\n        ",n,"\n\n        ",i,"\n        ",a,"\n        \n      "]);var s=document.createComment(" invisible div under the modal to capture out of modal click to close "),c=document.createElement("div");return c.onclick=arguments[2],c.setAttribute("class","dn w-100 h-100 fixed top-0 left-0"),Zr(e,["\n      ",t,"\n      ",s,"\n      ",c,"\n    "]),e}(this.close(),this.showCurrentFollowers(),this.close(),this.local.displayed)}},{key:"update",value:function(){return!1}}]),t}(),ac=function(e){return e.map(function(e){return function(e){var t=e.name,n=e.description,r=e._id,o=e.selectedColor;return function(){var e=document.createElement("a");e.setAttribute("href","/lists/"+arguments[7]),e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("data-type","lists"),t.setAttribute("data-id",arguments[6]),t.setAttribute("class","h-100 dropshadow bg-near-white ma2");var n=document.createElement("header");n.setAttribute("style","background-color:"+arguments[0]+";"),n.setAttribute("class","w-100 h2  br--top");var r=document.createElement("div");r.setAttribute("class","hide-child");var o=document.createElement("section");o.setAttribute("class","pa2");var i=document.createElement("h3");i.setAttribute("style","max-height:4rem"),i.setAttribute("class","ma0 overflow-y-scroll"),Zr(i,[arguments[1]]);var a=document.createElement("small");a.setAttribute("class","ma0");var s=document.createElement("a");s.setAttribute("href","/users/"+arguments[2]),s.setAttribute("class","link black underline"),Zr(s,[arguments[3]]),Zr(a,["by ",s," ",arguments[4]]),Zr(o,["\n              ",i,"\n              ",a,"\n            "]);var c=document.createElement("p");return c.setAttribute("style","max-height:4rem"),c.setAttribute("class","ma0 pa2  f7 overflow-y-scroll"),Zr(c,[arguments[5]]),Zr(r,["\n            ",o,"\n            ",c,"\n        "]),Zr(t,["\n        ",n,"\n        ",r,"\n      "]),Zr(e,["\n      ",t,"\n    "]),e}(e.colors[o],t,e.ownerDetails.username,function(e){return e.hasOwnProperty("owner")?""+e.ownerDetails.username:"\ud83e\udd16"}(e),function(e){if(e.collaboratorDetails.length>0)return"+ "+e.collaboratorDetails.length+" collaborators"}(e),n,r,r)}(e)})},sc=function(e){return e.map(function(e){return function(e){return function(){var e=document.createElement("a");e.setAttribute("href","/users/"+arguments[3]),e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("class","h-100 dropshadow bg-near-white ma2 tc pa3");var n=document.createElement("img");n.setAttribute("src",arguments[0]+arguments[1]),n.setAttribute("class","br-100 h4 w4 dib pa2");var r=document.createElement("h1");return r.setAttribute("class","f3 mb2"),Zr(r,[arguments[2]]),Zr(t,["\n                ",n,"\n                ",r,"\n            "]),Zr(e,["\n            ",t,"\n        "]),e}("https://nautilist-public.herokuapp.com/images/user_placeholders/",e.emojis[e.selectedEmoji],e.username,e.username)}(e)})},cc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),lc=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={selectedTab:"lists"},o.handleSelect=o.handleSelect.bind(o),o.showSelectedTab=o.showSelectedTab.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),cc(t,[{key:"showSelectedTab",value:function(e){return e==this.local.selectedTab?"bg-dark-pink white":"bg-near-white dark-pink"}},{key:"handleSelect",value:function(e){var t=this;return function(n){t.local.selectedTab=e,t.state.components.UserContributions.setSelectedTab(e),t.rerender()}}},{key:"createElement",value:function(){return function(){var e=document.createElement("menu");e.setAttribute("class","pa0 mt2 reset-input w-100 flex flex-column");var t=document.createElement("ul");t.setAttribute("class","list flex flex-row pa0");var n=document.createElement("li");n.setAttribute("class","mr2");var r=document.createElement("button");r.onclick=arguments[0],r.setAttribute("class",arguments[1]+" bn pa2 dropshadow"),Zr(r,["links\n          "]),Zr(n,["\n          ",r,"\n        "]);var o=document.createElement("li");o.setAttribute("class","mr2");var i=document.createElement("button");i.onclick=arguments[2],i.setAttribute("class",arguments[3]+" bn pa2 dropshadow"),Zr(i,["lists\n            "]),Zr(o,["\n          ",i,"\n          "]);var a=document.createElement("li");a.setAttribute("class","mr2");var s=document.createElement("button");s.onclick=arguments[4],s.setAttribute("class",arguments[5]+" bn pa2 dropshadow"),Zr(s,["Lists I follow\n            "]),Zr(a,["\n          ",s,"\n          "]);var c=document.createElement("li");c.setAttribute("class","dn mr2");var l=document.createElement("button");l.onclick=arguments[6],l.setAttribute("class",arguments[7]+" bn pa2 dropshadow"),Zr(l,["tracks\n          "]),Zr(c,["\n          ",l,"\n        "]);var u=document.createElement("li");u.setAttribute("class","dn mr2");var f=document.createElement("button");return f.onclick=arguments[8],f.setAttribute("class",arguments[9]+" bn pa2 dropshadow"),Zr(f,["collections\n          "]),Zr(u,["\n          ",f,"\n        "]),Zr(t,["\n        ",n,"\n        ",o,"\n        ",a,"\n        ",c,"\n        ",u,"\n      "]),Zr(e,["\n      ",t,"\n    "]),e}(this.handleSelect("links"),this.showSelectedTab("links"),this.handleSelect("lists"),this.showSelectedTab("lists"),this.handleSelect("listsFollowing"),this.showSelectedTab("listsFollowing"),this.handleSelect("tracks"),this.showSelectedTab("tracks"),this.handleSelect("collections"),this.showSelectedTab("collections"))}},{key:"update",value:function(){return!0}}]),t}(),uc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fc=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=n,o.emit=r,o.local=n.components[e]={setSelectedTab:o.setSelectedTab.bind(o),currentTab:"lists"},o.showCurrentSelection=o.showCurrentSelection.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Cs),uc(t,[{key:"showCurrentSelection",value:function(){var e,t,n=this.local.currentTab,r=this.state.selectedUser[n];return e=n,(t=r).length<=0?"none":function(){var e=document.createElement("ul");return e.setAttribute("class","list w-100 pl0 mt4"),Zr(e,["\n      ",arguments[0],"\n    "]),e}(t.map(function(t){return function(e,t){var n=t._id,r=t.name,o=t.description;return"listsFollowing"===e&&(e="lists"),function(){var e=document.createElement("li");e.setAttribute("class","w-100 dropshadow mb3");var t=document.createElement("a");t.setAttribute("href","/"+arguments[3]+"/"+arguments[4]),t.setAttribute("class","link black");var n=document.createElement("div");n.setAttribute("class","flex pa3-ns pa1 bg-light-gray flex flex-row-ns flex-column items-center");var r=document.createElement("div");r.setAttribute("style","background-color:"+arguments[0]),r.setAttribute("class","h1 w-100 h2-ns w2-ns mr4-ns mr0");var o=document.createElement("div");o.setAttribute("class","flex flex-column w-80-ns w-100");var i=document.createElement("h3");i.setAttribute("class","ma0"),Zr(i,[arguments[1]]);var a=document.createElement("p");return a.setAttribute("class","ma0 truncate f6"),Zr(a,[arguments[2]]),Zr(o,["\n              ",i,"\n              ",a,"\n            "]),Zr(n,["\n            ",r,"\n            ",o,"\n          "]),Zr(t,["\n          ",n,"\n        "]),Zr(e,["\n        ",t,"\n        "]),e}(t.colors[t.selectedColor],r,o,e,n)}(e,t)}))}},{key:"setSelectedTab",value:function(e){switch(e){case"links":this.local.currentTab=e,console.log("links"),this.rerender();break;case"lists":this.local.currentTab=e,console.log("lists"),this.rerender();break;case"listsFollowing":this.local.currentTab=e,console.log("listsFollowing"),this.rerender();break;case"tracks":this.local.currentTab=e,console.log("tracks"),this.rerender();break;case"collections":this.local.currentTab=e,console.log("collect"),this.rerender()}}},{key:"createElement",value:function(){return function(){var e=document.createElement("section");return e.setAttribute("class","w-100 pa2 pa0-ns"),Zr(e,["\n      ",arguments[0]," \n      ",arguments[1],"\n    "]),e}(this.state.cache(lc,"UserContributionsMenu",this.state,this.emit).render(),this.showCurrentSelection())}},{key:"update",value:function(){return!0}}]),t}(),dc=Re();dc.use(Y()),dc.use(Mr),dc.use(is),dc.use(Ur),dc.use(qr),dc.route("/",function(e,t){return"Nautilists Home"!==e.title&&t(e.events.DOMTITLECHANGE,"Nautilists Home"),function(){var e=document.createElement("body");e.onload=arguments[4],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createComment(" nav bar "),n=document.createComment(" main "),r=document.createElement("main");return r.setAttribute("class","w-100 h-100 pa4 flex flex-column"),Zr(r,["\n        ",arguments[0],"\n        ",arguments[1],"\n        ",arguments[2],"\n        ",arguments[3],"\n      "]),Zr(e,["\n      ",t,"  \n      ",arguments[5],"\n      ",arguments[6],"\n      ",n,"\n      ",r,"\n      ",arguments[7],"\n      ",arguments[8],"\n      ",arguments[9],"\n    "]),e}(function(e,t){var n,r,o=e.lists,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no lists yet"]),i=r):i=ac(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Recently Contributed Lists"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),Zr(n,["\n    ",arguments[0],"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n  "]),e}(i)}(e),function(e,t){var n,r,o=e.links,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no links yet"]),i=r):i=$s(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Recently Contributed Links"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),Zr(n,["\n    ",arguments[0],"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n  "]),e}(i)}(e),function(e,t){var n,r,o=e.users,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no users yet"]),i=r):i=sc(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Our Wonderful Contributors"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100 overflow-scroll-x"),Zr(n,["\n      ",arguments[0],"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n  "]),e}(i)}(e),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4 flex flex-column items-center");var t=document.createElement("h2");t.setAttribute("class","w-100 tc f3 lh-title"),Zr(t,["Acknowledgements"]);var n=document.createElement("div");n.setAttribute("class","w-100 tl mw7");var r=document.createElement("p"),o=document.createElement("a");o.setAttribute("href","https://jk-lee.com"),o.setAttribute("target","_blank"),o.setAttribute("class","link black underline"),Zr(o,["Joey Lee"]);var i=document.createElement("a");i.setAttribute("href","https://tisch.nyu.edu/itp/itp-people/faculty/somethings-in-residence-sirs"),i.setAttribute("target","_blank"),i.setAttribute("class","link black underline"),Zr(i,["Something in Residence Program"]),Zr(r,["Nautilist is supported and maintained by NYU's Intertelecommunications Program. The project was materialized by ",o," through ITP's ",i," under the supervision of Shawn Van Every, Dan Shiffman, and Dan O'Sullivan."]);var a=document.createElement("p"),s=document.createElement("a");s.setAttribute("href","http://openmoji.org/index.html"),s.setAttribute("target","_blank"),s.setAttribute("class","link black underline"),Zr(s,["OpenMoji Project"]);var c=document.createElement("a");c.setAttribute("href","http://openmoji.org/about.html"),c.setAttribute("target","_blank"),c.setAttribute("class","link black underline"),Zr(c,["Hfg Schw\xe4bisch Gm\xfcnd"]),Zr(a,["Emojis via the ",s," by the clever folks at ",c,"."]);var l=document.createElement("p"),u=document.createElement("a");u.setAttribute("href","https://choo.io/"),u.setAttribute("target","_blank"),u.setAttribute("class","link black underline"),Zr(u,["Choo.js"]);var f=document.createElement("a");f.setAttribute("href","https://feathersjs.com/"),f.setAttribute("target","_blank"),f.setAttribute("class","link black underline"),Zr(f,["Feathers.js"]),Zr(l,["Built with ",u," & ",f]);var d=document.createElement("p"),h=document.createElement("a");h.setAttribute("href","https://subdex.co/"),h.setAttribute("target","_blank"),h.setAttribute("class","link black underline"),Zr(h,["subdex.co"]);var p=document.createElement("a");p.setAttribute("href","https://www.instructables.com/"),p.setAttribute("target","_blank"),p.setAttribute("class","link black underline"),Zr(p,["instructables"]),Zr(d,["Other really cool projects worth exploring: \n      ",h," & \n      ",p,"  \n    "]),Zr(n,["\n    ",r,"\n    ",a,"\n    ",l,"\n    ",d,"\n    "]);var m=document.createElement("div");return m.setAttribute("class","w-100 tc mt4"),Zr(m,["\n      \n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n    ",m,"\n  "]),e}(),function(){return t("fetch-home")},e.cache(Ms,"NavbarTop",e,t).render(),function(){var e=document.createElement("section");e.setAttribute("class","w-100 h-auto flex flex-column items-center mt0 pt5 pb5 bg-washed-red");var t=document.createElement("header");t.setAttribute("class","w-100  mw8-ns flex flex-row-ns flex-column items-center");var n=document.createElement("section");n.setAttribute("class","w-third-ns w-100 flex flex-column h-100 justify-center pa2 pb5 pb0-ns");var r=document.createElement("h2");r.setAttribute("class","tl-ns tc b f2-ns f4 ma0");var o=document.createElement("span");o.setAttribute("class","dark-pink"),Zr(o,["Nautilists"]),Zr(r,["Welcome to ",o]);var i=document.createElement("h3");i.setAttribute("class","tl-ns tc f3-ns f5 mt1"),Zr(i,["Pick-and-mix lists for all occasions"]),Zr(n,["\n      ",r,"\n      ",i,"\n    "]);var a=document.createElement("section");a.setAttribute("class"," bg-near-white bn h-100 pa3-ns pt3 pb3 w-two-thirds-ns w-100 flex flex-row-ns flex-column ba-ns bw1-ns dropshadow-ns b--dark-pink");var s=document.createElement("div");s.setAttribute("class","justify-between w-third-ns w-100 h-100 tc flex flex-column items-center");var c=document.createElement("h4");c.setAttribute("class","ma0"),Zr(c,["Add links"]);var l=document.createElement("img");l.setAttribute("src","/assets/1F517.png"),l.setAttribute("class","h3 w3");var u=document.createElement("p");u.setAttribute("class","f6 ma0 pa2 tl"),Zr(u,["Add your favorite links from across the web."]),Zr(s,["\n        ",c,"\n        ",l,"\n        ",u,"\n      "]);var f=document.createElement("div");f.setAttribute("class","justify-between w-third-ns w-100 h-100 tc flex flex-column items-center");var d=document.createElement("h4");d.setAttribute("class","ma0"),Zr(d,["Mix 'em up"]);var h=document.createElement("img");h.setAttribute("src","/assets/1F4A5.png"),h.setAttribute("class","h3 w3");var p=document.createElement("p");p.setAttribute("class","f6 ma0 pa2 tl"),Zr(p,["Pick-and-mix links and lists for all to see."]),Zr(f,["\n        ",d,"\n        ",h,"\n        ",p,"\n      "]);var m=document.createElement("div");m.setAttribute("class","justify-between w-third-ns w-100 h-100 tc flex flex-column items-center");var b=document.createElement("h4");b.setAttribute("class","ma0"),Zr(b,["Collaborate"]);var v=document.createElement("img");v.setAttribute("src","/assets/1F3D3.png"),v.setAttribute("class","h3 w3");var g=document.createElement("p");g.setAttribute("class","f6 ma0 pa2 tl"),Zr(g,["Build with buddies on collaborative lists."]),Zr(m,["\n        ",b,"\n        ",v,"\n        ",g,"\n      "]),Zr(a,["\n      ",s,"\n      ",f,"\n      ",m,"\n    "]),Zr(t,["\n    ",n,"\n    ",a,"\n  "]);var y=document.createElement("div");y.setAttribute("class","w-100 mw8-ns mt4 flex flex-row justify-end-ns justify-center");var w=document.createElement("h2");w.setAttribute("class","ma0");var A=document.createElement("a");A.setAttribute("href","/browse"),A.setAttribute("class","black underline"),Zr(A,["Get Started"]),Zr(w,["\u2192 ",A]);var k=document.createElement("img");return k.setAttribute("src","/assets/2728.png"),k.setAttribute("class","pl2 h2"),Zr(y,["\n      ",w,"\n      ",k,"\n  "]),Zr(e,["\n  ",t,"\n  ",y,"\n"]),e}(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/browse",function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class","w-100 h-auto code lh-copy");var t=document.createElement("main");return t.setAttribute("class","w-100 flex-grow-1 pa4 flex flex-column outline"),Zr(t,["\n        ",arguments[0],"\n        ",arguments[1],"\n      "]),Zr(e,["\n      ",arguments[2],"\n      ",t,"\n      ",arguments[3],"\n      ",arguments[4],"\n      ",arguments[5],"\n    "]),e}(function(e,t){return function(){var e=document.createElement("section");e.setAttribute("class","w-100 flex flex-column");var t=document.createElement("h2");return t.setAttribute("class","f2 lh-title tc"),Zr(t,["Search Results by category"]),Zr(e,["\n      ",t,"\n      ",arguments[0],"\n      ",arguments[1],"\n      ",arguments[2],"\n    "]),e}(function(e,t){var n,r,o=e.lists,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no lists yet"]),i=r):i=ac(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Lists"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),Zr(n,["\n    ",arguments[0],"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n  "]),e}(i)}(e),function(e,t){var n,r,o=e.links,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no links yet"]),i=r):i=$s(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Links"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),Zr(n,["\n    ",arguments[0],"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n  "]),e}(i)}(e),function(e,t){var n,r,o=e.users,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no users yet"]),i=r):i=sc(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Contributors"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100 overflow-scroll-x"),Zr(n,["\n      ",arguments[0],"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n  "]),e}(i)}(e))}(e),function(){var e=document.createElement("section");e.setAttribute("class","w-100 pa4 flex flex-column items-center");var t=document.createElement("h2");t.setAttribute("class","w-100 tc f2 lh-title"),Zr(t,["Browse Categories"]);var n=document.createElement("div");n.setAttribute("class","w-100 flex flex-row-ns flex-column items-start justify-start tc");var r=document.createComment(" links "),o=document.createElement("div");o.setAttribute("class","w-third-ns w-100 flex flex-column justify-start");var i=document.createElement("a");i.setAttribute("href","/links"),i.setAttribute("class","link black w-100");var a=document.createElement("img");a.setAttribute("style","max-width:60%"),a.setAttribute("src","/assets/1F517.png"),a.setAttribute("class","h4-ns h3"),Zr(i,["\n          ",a,"  \n          "]);var s=document.createElement("h3");s.setAttribute("class","f2 lh-title"),Zr(s,["links"]);var c=document.createElement("p");c.setAttribute("class","pa2"),Zr(c,["Links are the heart of nautilist projects. Add 'em in and organize them into lists."]),Zr(o,["\n        ",i,"\n        ",s,"\n        ",c,"\n      "]);var l=document.createComment(" lists "),u=document.createElement("div");u.setAttribute("class","w-third-ns w-100 flex flex-column justify-start");var f=document.createElement("a");f.setAttribute("href","/lists"),f.setAttribute("class","link black w-100");var d=document.createElement("img");d.setAttribute("style","max-width:60%"),d.setAttribute("src","/assets/1F490.png"),d.setAttribute("class","h4-ns h3"),Zr(f,["\n          ",d,"  \n        "]);var h=document.createElement("h3");h.setAttribute("class","f2 lh-title"),Zr(h,["lists"]);var p=document.createElement("p");p.setAttribute("class","pa2"),Zr(p,["Lists are the home for your wonderful links. These have been created, curated, and saved to Nautilist for you to reuse and remix."]),Zr(u,["\n        ",f,"\n        ",h,"\n        ",p,"\n      "]);var m=document.createComment(" collections "),b=document.createElement("div");b.setAttribute("class","w-25-ns w-100 dn");var v=document.createElement("a");v.setAttribute("href","/collections"),v.setAttribute("class","link black w-100");var g=document.createElement("img");g.setAttribute("style","max-width:60%"),g.setAttribute("src","/assets/1F490.png"),g.setAttribute("class","h4-ns h3"),Zr(v,["\n        ",g," \n        "]);var y=document.createElement("h3");y.setAttribute("class","f2 lh-title"),Zr(y,["Collections"]);var w=document.createElement("p");w.setAttribute("class","pa2"),Zr(w,["Collections are groups of projects. Collections may contain similar themed projects such as for a class or larger project."]),Zr(b,["\n        ",v,"\n        ",y,"\n        ",w,"\n      "]);var A=document.createComment(" users "),k=document.createElement("div");k.setAttribute("class","w-third-ns w-100 flex flex-column justify-start");var E=document.createElement("a");E.setAttribute("href","/users"),E.setAttribute("class","link black w-100");var _=document.createElement("img");_.setAttribute("style","max-width:60%"),_.setAttribute("src","/assets/1F984.png"),_.setAttribute("class","h4-ns h3");var C=document.createElement("h3");C.setAttribute("class","f2 lh-title"),Zr(C,["users"]),Zr(E,["\n        ",_,"\n        ",C,"\n        "]);var x=document.createElement("p");x.setAttribute("class","pa2"),Zr(x,["Oh and what would we be without our wonderful users? Go checkout their projects and collections for inspiration or to collaborate!"]),Zr(k,["\n        ",E,"\n        ",x,"\n      "]),Zr(n,["\n      \n      ",r,"\n      ",o,"  \n\n      ",l,"\n      ",u,"\n\n      ",m,"\n      ",b,"\n\n      ",A,"\n      ",k,"\n    "]);var S=document.createElement("p");return S.setAttribute("class","i"),Zr(S,[" Organizing lists into tracks and collections coming soon! "]),Zr(e,["\n    ",t,"\n    ",n,"\n\n    ",S,"\n  "]),e}(),e.cache(Ms,"NavbarTop",e,t).render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/signup",function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class","code lh-copy w-100 h-100");var t=document.createElement("div");t.setAttribute("class","w-100 flex flex-row items-center justify-between");var n=document.createElement("a");n.setAttribute("href","/"),n.setAttribute("class","link black w3 ml2");var r=document.createElement("img");r.setAttribute("src","/assets/logo-wow.png"),Zr(n,[r]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn moon-gray bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(t,["\n        ",n,"\n        ",o,"\n      "]);var i=document.createElement("main");i.setAttribute("class","w-100 h-100");var a=document.createElement("div");a.setAttribute("class","w-100 flex flex-column justify-center items-center");var s=document.createElement("form");s.onsubmit=arguments[1],s.setAttribute("class","mw6 w-100 flex flex-column items-center");var c=document.createElement("h2");Zr(c,["Sign Up"]);var l=document.createElement("fieldset");l.setAttribute("class","w-100 mb3 bn");var u=document.createElement("legend");Zr(u,["Username"]);var f=document.createElement("input");f.setAttribute("type","text"),f.setAttribute("name","username"),f.setAttribute("required","required"),f.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),Zr(l,["\n                ",u,"\n                ",f,"\n              "]);var d=document.createElement("fieldset");d.setAttribute("class","w-100 mb3 bn");var h=document.createElement("legend");Zr(h,["Email"]);var p=document.createElement("input");p.setAttribute("type","email"),p.setAttribute("name","email"),p.setAttribute("required","required"),p.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),Zr(d,["\n                ",h,"\n                ",p,"\n              "]);var m=document.createElement("fieldset");m.setAttribute("class","w-100 mb4 bn");var b=document.createElement("legend");Zr(b,["Password"]);var v=document.createElement("input");v.setAttribute("type","password"),v.setAttribute("name","password"),v.setAttribute("required","required"),v.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),Zr(m,["\n                ",b,"\n                ",v,"\n              "]);var g=document.createElement("input");g.setAttribute("type","submit"),g.setAttribute("value","Sign up"),g.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),Zr(s,["\n              ",c,"\n              ",l,"\n              ",d,"\n              ",m,"\n              ",g,"\n            "]);var y=document.createElement("small"),w=document.createElement("a");return w.setAttribute("href","/login"),w.setAttribute("class","link black underline"),Zr(w,["Log in"]),Zr(y,["Already have an account? ",w]),Zr(a,["\n            ",s,"\n            ",y,"\n          "]),Zr(i,["\n          ",a,"\n          \n      "]),Zr(e,["\n      ",t,"\n      ",i,"\n    "]),e}(function(e){window.location="/"},function(e,t){return function(t){t.preventDefault();var n=new FormData(t.currentTarget),r={username:n.get("username"),email:n.get("email"),password:n.get("password")};e.api.users.create(r).then(function(){alert("Sign up successful - you will receive an email from hello.nautilist@gmail.com to verify your account"),window.location="/"}).catch(function(e){alert("Something went wrong!",e)})}}(e))}),dc.route("/login",function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class","code lh-copy w-100 h-100");var t=document.createElement("div");t.setAttribute("class","w-100 flex flex-row items-center justify-between");var n=document.createElement("a");n.setAttribute("href","/"),n.setAttribute("class","link black w3 ml2");var r=document.createElement("img");r.setAttribute("src","/assets/logo-wow.png"),Zr(n,[r]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn moon-gray bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(t,["\n        ",n,"\n        ",o,"\n      "]);var i=document.createElement("main");i.setAttribute("class","w-100 h-100");var a=document.createElement("div");a.setAttribute("class","w-100 flex flex-column justify-center items-center");var s=document.createElement("form");s.onsubmit=arguments[1],s.setAttribute("class","mw6 w-100 flex flex-column items-center");var c=document.createElement("h2");Zr(c,["Log In"]);var l=document.createElement("fieldset");l.setAttribute("class","w-100 mb3 bn");var u=document.createElement("legend");Zr(u,["Email"]);var f=document.createElement("input");f.setAttribute("type","email"),f.setAttribute("name","email"),f.setAttribute("required","required"),f.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),Zr(l,["\n                ",u,"\n                ",f,"\n              "]);var d=document.createElement("fieldset");d.setAttribute("class","w-100 mb4 bn");var h=document.createElement("legend");Zr(h,["Password"]);var p=document.createElement("input");p.setAttribute("type","password"),p.setAttribute("name","password"),p.setAttribute("required","required"),p.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white");var m=document.createElement("a");m.setAttribute("href","/reset"),m.setAttribute("class","link black underline f7 b"),Zr(m,["I forgot my password \ud83d\ude2c"]),Zr(d,["\n                ",h,"\n                ",p,"\n                ",m,"\n              "]);var b=document.createElement("input");b.setAttribute("type","submit"),b.setAttribute("value","Log In"),b.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),Zr(s,["\n              ",c,"\n              ",l,"\n              ",d,"\n              ",b,"\n            "]);var v=document.createElement("small"),g=document.createElement("a");return g.setAttribute("href","/signup"),g.setAttribute("class","link black underline"),Zr(g,["Sign up!"]),Zr(v,["Don't have an account? ",g]),Zr(a,["\n            ",s,"\n            \n            ",v,"\n          "]),Zr(i,["\n          ",a,"\n          \n      "]),Zr(e,["\n      ",t,"\n      ",i,"\n    "]),e}(function(e,t){return function(e){t("pushState","/")}}(0,t),function(e,t){return function(t){t.preventDefault();var n=new FormData(t.currentTarget),r={username:n.get("username"),email:n.get("email"),password:n.get("password")},o=Object.assign({strategy:"local"},r);e.api.authenticate(o).then(function(t){e.user.authenticated=!0,e.user.username=t.username,e.user.id=t.id,alert("log in successful!"),window.location="/"}).catch(function(t){console.log("Authentication error",t),alert(t),e.user.authenticated=!1})}}(e))}),dc.route("/reset",function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class","code lh-copy w-100 h-100");var t=document.createElement("div");t.setAttribute("class","w-100 flex flex-row items-center justify-between");var n=document.createElement("a");n.setAttribute("href","/"),n.setAttribute("class","link dark-pink dropshadow ba br-pill pa2 bw1 mr3"),Zr(n,["Nautilist"]);var r=document.createElement("button");r.onclick=arguments[0],r.setAttribute("class","bn moon-gray bw2 pa2 h3 w3 f3 pointer"),Zr(r,["\u2573"]),Zr(t,["\n        ",n,"\n        ",r,"\n      "]);var o=document.createElement("main");o.setAttribute("class","w-100 h-100");var i=document.createElement("div");i.setAttribute("class","w-100 flex flex-column justify-center items-center");var a=document.createElement("small");a.setAttribute("class","dn");var s=document.createElement("a");return s.setAttribute("href","/signup"),s.setAttribute("class","link black underline"),Zr(s,["Sign up!"]),Zr(a,["Don't have an account? ",s]),Zr(i,["\n            ",arguments[1],"\n            ",a,"\n          "]),Zr(o,["\n          ",i,"\n          \n      "]),Zr(e,["\n      ",t,"\n      ",o,"\n    "]),e}(function(e,t){return function(e){t("pushState","/login")}}(0,t),function(e,t){return e.query.hasOwnProperty("token")?function(){var e=document.createElement("form");e.onsubmit=arguments[0],e.setAttribute("class","mw6 w-100 flex flex-column items-center");var t=document.createElement("h2");Zr(t,["Set new password"]);var n=document.createElement("span");n.setAttribute("id","update");var r=document.createElement("fieldset");r.setAttribute("class","w-100 mb3 bn");var o=document.createElement("legend");Zr(o,["New Password"]);var i=document.createElement("input");i.setAttribute("type","password"),i.setAttribute("name","password"),i.setAttribute("required","required"),i.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),Zr(r,["\n        ",o,"\n        ",i,"\n      "]);var a=document.createElement("input");return a.setAttribute("type","submit"),a.setAttribute("value","Send Password Reset"),a.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),Zr(e,["\n      ",t,"\n      ",n,"\n      ",r,"\n      ",a,"\n    "]),e}(function(e,t){return function(t){t.preventDefault();var n=new FormData(t.currentTarget),r={action:"resetPwdLong",value:{token:e.query.token,password:n.get("password")}};e.api.authmanagement.create(r).then(function(e){console.log("password changed!",e),alert("You have successfully reset your password. Redirecting you to log in page"),window.location="/login"}).catch(function(e){return e})}}(e)):function(){var e=document.createElement("form");e.onsubmit=arguments[0],e.setAttribute("class","mw6 w-100 flex flex-column items-center");var t=document.createElement("h2");Zr(t,["Send password reset email"]);var n=document.createElement("span");n.setAttribute("id","update");var r=document.createElement("fieldset");r.setAttribute("class","w-100 mb3 bn");var o=document.createElement("legend");Zr(o,["Email"]);var i=document.createElement("input");i.setAttribute("type","email"),i.setAttribute("name","email"),i.setAttribute("required","required"),i.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),Zr(r,["\n        ",o,"\n        ",i,"\n      "]);var a=document.createElement("input");return a.setAttribute("type","submit"),a.setAttribute("value","Send Password Reset"),a.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),Zr(e,["\n      ",t,"\n      ",n,"\n      ",r,"\n      ",a,"\n    "]),e}(function(e,t){return function(t){t.preventDefault();var n={action:"sendResetPwd",value:{email:new FormData(t.currentTarget).get("email")}};e.api.authmanagement.create(n).then(function(e){alert("An email was sent to your inbox - please open that URL to complete your account verification"),window.location="/login"}).catch(function(e){return e})}}(e))}(e))}),dc.route("/verify",function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class","code lh-copy w-100 h-100");var t=document.createElement("div");t.setAttribute("class","w-100 flex flex-row items-center justify-between");var n=document.createElement("a");n.setAttribute("href","/"),n.setAttribute("class","link black w3 ml2");var r=document.createElement("img");r.setAttribute("src","/assets/logo-wow.png"),Zr(n,[r]);var o=document.createElement("button");o.onclick=arguments[0],o.setAttribute("class","bn moon-gray bw2 pa2 h3 w3 f3 pointer"),Zr(o,["\u2573"]),Zr(t,["\n        ",n,"\n        ",o,"\n      "]);var i=document.createElement("main");i.setAttribute("class","w-100 h-100");var a=document.createElement("div");a.setAttribute("class","w-100 flex flex-column justify-center items-center");var s=document.createElement("small");s.setAttribute("class","dn");var c=document.createElement("a");return c.setAttribute("href","/signup"),c.setAttribute("class","link black underline"),Zr(c,["Sign up!"]),Zr(s,["Don't have an account? ",c]),Zr(a,["\n            ",arguments[1],"\n            ",s,"\n          "]),Zr(i,["\n          ",a,"\n          \n      "]),Zr(e,["\n      ",t,"\n      ",i,"\n    "]),e}(function(e,t){return function(e){t("pushState","/login")}}(0,t),function(e,t){return e.query.hasOwnProperty("token")?(t(e.events.user_sendVerificationToken),function(){var e=document.createElement("div");e.setAttribute("class","mw6 w-100 flex flex-column items-center");var t=document.createElement("h2");Zr(t,["Your account was verified!"]);var n=document.createElement("h3"),r=document.createElement("a");return r.setAttribute("href","/login"),r.setAttribute("class","link black underline"),Zr(r,["nautilists.com/login"]),Zr(n,["Go to ",r," to get started!"]),Zr(e,["\n        ",t,"\n        ",n,"\n    "]),e}()):function(){var e=document.createElement("div");e.setAttribute("class","mw6 w-100 flex flex-column items-center");var t=document.createElement("h2");return Zr(t,["An email was sent to verify your account"]),Zr(e,["\n      ",t,"\n    "]),e}()}(e,t))}),dc.route("/links",function(e,t){return function(){var e=document.createElement("body");e.onload=arguments[1],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createElement("header");t.setAttribute("class","w-100 tc flex flex-column items-center");var n=document.createElement("h1");n.setAttribute("class","w-100 mw6 tc f1 lh-title"),Zr(n,["Links"]);var r=document.createElement("img");r.setAttribute("src","/assets/1F33C.png"),r.setAttribute("class","w4");var o=document.createElement("p");o.setAttribute("class","pa2 mw6"),Zr(o,["Connect others to your favorite parts of the web."]),Zr(t,["\n          ",n,"\n          ",r,"\n          ",o,"\n      "]);var i=document.createElement("main");return i.setAttribute("class","w-100 flex flex-column flex-grow-1 items-center mb5"),Zr(i,["\n        ",arguments[0],"\n      "]),Zr(e,["\n      ",arguments[2],"\n      ",t,"\n      ",arguments[3],"\n      ",i,"\n      ",arguments[4],"\n",arguments[5],"\n      ",arguments[6],"\n    "]),e}(function(e,t){var n,r,o=e.links,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no links yet"]),i=r):i=$s(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Links"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),Zr(n,["\n      ",arguments[0],"\n      "]),Zr(e,["\n      ",t,"\n      ",n,"\n    "]),e}(i)}(e),function(){return t("fetch-links")},e.cache(Ms,"NavbarTop",e,t).render(),e.cache(Us,"LinksSearch",e,t,"/api/links","links").render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/links/:id",function(e,t){return"Nautilists - Link"!==e.title&&t(e.events.DOMTITLECHANGE,"Nautilists - Link"),function(){var e=document.createElement("body");e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createComment(" nav bar "),n=document.createComment(" main "),r=document.createElement("main");return r.setAttribute("class","w-100 flex flex-column flex-grow-1 items-center mb5"),Zr(r,["\n      ",arguments[0],"\n        \n      "]),Zr(e,["\n      ",t,"  \n      ",arguments[1],"\n      ",n,"\n      ",r,"\n      ",arguments[2],"\n        ",arguments[3],"\n      ",arguments[4],"\n    "]),e}(Ts(),e.cache(Ms,"NavbarTop",e,t).render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/lists",function(e,t){return function(){var e=document.createElement("body");e.onload=arguments[1],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createElement("header");t.setAttribute("class","w-100 tc flex flex-column items-center");var n=document.createElement("h1");n.setAttribute("class","w-100 mw6 tc f1 lh-title"),Zr(n,["Lists"]);var r=document.createElement("img");r.setAttribute("src","/assets/1F33C.png"),r.setAttribute("class","w4");var o=document.createElement("p");o.setAttribute("class","pa2 mw6"),Zr(o,["Connect others to your favorite parts of the web."]),Zr(t,["\n          ",n,"\n          ",r,"\n          ",o,"\n      "]);var i=document.createElement("main");return i.setAttribute("class","w-100 flex flex-column flex-grow-1 items-center mb5"),Zr(i,["\n        ",arguments[0],"\n      "]),Zr(e,["\n      ",arguments[2],"\n      ",t,"\n      ",arguments[3],"\n      ",i,"\n      ",arguments[4],"\n",arguments[5],"\n",arguments[6],"\n    "]),e}(function(e,t){var n,r,o=e.lists,i=void 0;return o.length<=0?(n=Zr,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no lists yet"]),i=r):i=ac(o),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),Zr(t,["Lists"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),Zr(n,["\n      ",arguments[0],"\n      "]),Zr(e,["\n      ",t,"\n      ",n,"\n    "]),e}(i)}(e),function(){return t("fetch-lists")},e.cache(Ms,"NavbarTop",e,t).render(),e.cache(Us,"ListsSearch",e,t,"/api/lists","lists").render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/lists/:id",function(e,t){return"Nautilists - List"!==e.title&&t(e.events.DOMTITLECHANGE,"Nautilists - List"),function(){var e=document.createElement("body");e.onload=arguments[5],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createComment(" nav bar "),n=document.createComment(" main "),r=document.createElement("main");r.setAttribute("class","w-100 h-auto  flex-grow-1 flex flex-column items-center");var o=document.createElement("section");return o.setAttribute("class","w-100 h-100 mw7 pa2 pb5"),Zr(o,["\n        ",arguments[0],"\n\n        ",arguments[1],"\n        ",arguments[2],"\n        ",arguments[3],"\n        \n        ",arguments[4],"\n        "]),Zr(r,["\n        ",o,"\n      "]),Zr(e,["\n      ",t,"  \n      ",arguments[6],"\n      ",n,"\n      ",r,"\n      ",arguments[7],"\n        ",arguments[8],"\n        ",arguments[9],"\n        ",arguments[10],"\n        ",arguments[11],"\n        ",arguments[12],"\n        ",arguments[13],"\n        ",arguments[14],"\n    "]),e}(Ts(),function(e,t){var n=e.user,r=e.selectedList,o=r.ownerDetails,i=r.collaboratorDetails;if(Object.keys(r).length<=0)return"";var a=!!i.find(function(e){return e.username===n.username});return!0===n.authenticated&&n.username===o.username||!0===a?function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4 flex flex-row-ns flex-column items-center-ns flex-wrap-ns items-start");var t=document.createElement("button");t.onclick=arguments[0],t.setAttribute("class","mt2 h2 flex flex-row items-center dropshadow bn bg-near-white mr2");var n=document.createElement("img");n.setAttribute("src","/assets/1F58D.png"),n.setAttribute("class","ma0 pa0 h2"),Zr(t,[n," Edit List"]);var r=document.createElement("button");r.onclick=arguments[1],r.setAttribute("class","mt2 h2 flex flex-row items-center dropshadow bn bg-near-white mr2");var o=document.createElement("img");o.setAttribute("src","/assets/1F490.png"),o.setAttribute("class","ma0 pa0 h2"),Zr(r,[o," Add section"]);var i=document.createElement("button");i.onclick=arguments[2],i.setAttribute("class","mt2 h2 flex flex-row items-center  dropshadow bn bg-near-white mr2");var a=document.createElement("img");a.setAttribute("src","/assets/1F517.png"),a.setAttribute("class","ma0 pa0 h2"),Zr(i,[a," Add link"]);var s=document.createElement("button");s.onclick=arguments[3],s.setAttribute("class","mt2 h2 flex flex-row items-center dropshadow bn bg-near-white mr2");var c=document.createElement("img");c.setAttribute("src","/assets/1F984.png"),c.setAttribute("class","ma0 pa0 h2"),Zr(s,[c," Add Collaborator"]);var l=document.createElement("button");l.onclick=arguments[4],l.setAttribute("class","mt2 h2 flex flex-row items-center  dropshadow bn bg-near-white red mr2");var u=document.createElement("img");u.setAttribute("src","/assets/1F5D1.png"),u.setAttribute("class","ma0 pa0 h2"),Zr(l,[u," Delete List"]);var f=document.createElement("p");return f.setAttribute("class","f7 pl2 ma0 mr2"),Zr(f,[arguments[5]]),Zr(e,["\n            ",t,"\n            ",r,"\n            ",i,"\n            ",s,"\n            ",l,"\n            ",f,"\n        "]),e}(function(n){e.components.EditableList.toggleEditable(),e.components.EditableListHeader.toggleEditable(),t("render")},function(t){e.api.links.find({query:{$limit:20}}).then(function(t){e.links=t.data,e.components.AddSectionToListModal.open()}).catch(function(e){alert(e)})},function(t){e.api.links.find({query:{$limit:20}}).then(function(t){e.links=t.data,e.components.AddLinksToSectionModal.open()}).catch(function(e){alert(e)})},function(t){e.components.AddCollaboratorModal.open()},function(n){!0===confirm("Are you sure you want to delete this list - "+r.name+" - for you and your collaborators?")&&e.api.lists.remove(r._id).then(function(e){alert("list deleted!"),t("pushState","/users/"+o.username)}).catch(function(e){alert(e)})},!0===e.components.EditableList.editable?"editing":""):void 0}(e,t),e.cache(rc,"EditableListHeader",e,t).render(),function(e,t){var n,r,o=e.selectedList;return function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4 flex flex-row");var t=document.createElement("button");t.onclick=arguments[0],t.setAttribute("class","bn bg-near-white dark-pink pa2 dropshadow mr2"),Zr(t,["Follow"]);var n=document.createElement("button");return n.setAttribute("id","remixBtn"),n.onclick=arguments[1],n.setAttribute("class","bn bg-near-white dark-pink pa2 dropshadow mr2"),Zr(n,["Remix"]),Zr(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(n){if(!0===confirm("follow this list?")){alert("You are now following this list!");var r={$push:{followers:e.user.id}};e.api.lists.patch(o._id,r,{}).then(function(n){e.selectedList=n,t("render")}).catch(function(e){alert(e)})}},(n=o._id,r="lists",function(o){o.preventDefault(),o.stopPropagation(),e.api[r].get(n).then(function(t){var n=Qr.removeIds(t);return n.collaborators=[],n.followers=[],n.suggested=[],e.api[r].create(n)}).then(function(e){alert("feature copied!"),t("pushState","/lists/"+e._id)}).catch(function(e){alert(e)})}))}(e,t),e.cache(Ks,"EditableList",e,t).render(),function(){return t("fetch-list",e.params.id)},e.cache(Ms,"NavbarTop",e,t).render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render(),e.cache(zs,"AddLinksToSectionModal",e,t).render(),e.cache(Vs,"AddSectionToListModal",e,t).render(),e.cache(Bs,"AddCollaboratorModal",e,t).render(),e.cache(Gs,"EditFeatureModal",e,t).render(),e.cache(ic,"ShowFollowersModal",e,t).render())}),dc.route("/users",function(e,t){return function(){var e=document.createElement("body");e.onload=arguments[1],e.setAttribute("class","w-100 h-auto code lh-copy");var t=document.createElement("header");t.setAttribute("class","w-100 tc flex flex-column items-center");var n=document.createElement("h1");n.setAttribute("class","w-100 mw6 tc f1 lh-title"),Zr(n,["Users"]);var r=document.createElement("img");r.setAttribute("src","/assets/1F984.png"),r.setAttribute("class","w4");var o=document.createElement("p");o.setAttribute("class","pa2 mw6"),Zr(o,["Oh and what would we be without our wonderful users? Go checkout their projects and collections for inspiration or to collaborate!"]),Zr(t,["\n          ",n,"\n          ",r,"\n          ",o,"\n    "]);var i=document.createElement("main");i.setAttribute("class","w-100 h-100 pa4");var a=document.createElement("div");a.setAttribute("class","w-100");var s=document.createElement("div");return s.setAttribute("class","mw9 center ph3-ns h-100"),Zr(s,["\n        ",arguments[0],"\n        "]),Zr(a,["\n        ",s,"\n      "]),Zr(i,["\n      ",a,"\n    "]),Zr(e,["\n    ",arguments[2],"\n    ",t,"\n    ",arguments[3],"\n    ",i,"\n    ",arguments[4],"\n",arguments[5],"\n    ",arguments[6],"\n  "]),e}((r=e.users).length>0?r.map(function(e){return function(){var e=document.createElement("a");e.setAttribute("href","/users/"+arguments[3]),e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("class","h-100 shadow-5 bg-near-white ma2 tc pa3");var n=document.createElement("img");n.setAttribute("src",arguments[0]+arguments[1]),n.setAttribute("class","br-100 h4 w4 dib pa2");var r=document.createElement("h1");return r.setAttribute("class","f3 mb2"),Zr(r,[arguments[2]]),Zr(t,["\n            ",n,"\n            ",r,"\n        "]),Zr(e,["\n        ",t,"\n        "]),e}("https://nautilist-public.herokuapp.com/images/user_placeholders/",e.emojis[e.selectedEmoji],e.username,e.username)}):(Zr(n=document.createElement("p"),["no users to show"]),n),function(){return t("fetch-users")},e.cache(Ms,"NavbarTop",e,t).render(),e.cache(Us,"UserSearch",e,t,"users","users").render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render());var n,r}),dc.route("/users/:username",function(e,t){return function(){var e=document.createElement("body");e.onload=arguments[2],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createElement("main");t.setAttribute("class","w-100 flex flex-column flex-grow-1 items-center mb5");var n=document.createElement("section");return n.setAttribute("class","w-100 h-100 mw7 pa2"),Zr(n,["\n          ",arguments[0],"\n          ",arguments[1],"\n        "]),Zr(t,["\n        ",n,"\n      "]),Zr(e,["\n      ",arguments[3],"\n      ",t,"\n      ",arguments[4],"\n      ",arguments[5],"\n      ",arguments[6],"\n    "]),e}(function(e,t){var n,r=e.selectedUser.profile;if(!r.hasOwnProperty("username"))return Zr(n=document.createElement("p"),["no user"]),n;var o=r.username,i=r.bio,a=r.emojis,s=r.selectedEmoji;return function(){var e=document.createElement("section");e.setAttribute("class","w-100 flex flex-column mt4");var t=document.createElement("section");t.setAttribute("class","w-100 flex flex-row"),Zr(t,["\n    ",arguments[0],"\n    "]);var n=document.createElement("section");n.setAttribute("class","w-100 h-auto flex flex-row-ns flex-column");var r=document.createElement("div");r.setAttribute("class","h-100");var o=document.createElement("img");o.setAttribute("src","/assets/"+arguments[1]),o.setAttribute("class","h4"),Zr(r,["\n        ",o,"\n      "]);var i=document.createElement("div");i.setAttribute("class","w-100 h-100 flex flex-column justify-center pa2");var a=document.createElement("h1");a.setAttribute("class","ma0"),Zr(a,[arguments[2]]);var s=document.createElement("p");s.setAttribute("class","ma0"),Zr(s,[arguments[3]]);var c=document.createElement("p");return c.setAttribute("class","ma0 f6"),Zr(c,["# followers \xb7 # following"]),Zr(i,["\n        ",a,"\n        ",s,"\n        ",c,"\n      "]),Zr(n,["\n      ",r,"\n      ",i,"\n    "]),Zr(e,["\n    ",t,"\n    ",n,"\n    \n  "]),e}(function(e,t){var n=e.user,r=e.params.username;return!0===n.authenticated&&n.username===r?function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","bn bg-white underline f7"),Zr(e,["edit profile"]),e}(function(){return t("pushState","/settings/"+r)}):""}(e,t),a[s],o,i)}(e,t),e.cache(fc,"UserContributions",e,t).render(),function(){return t("fetch-user",e.params.username)},e.cache(Ms,"NavbarTop",e,t).render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/settings/:username",function(e,t){var n=e.user,r=e.selectedUser;return!0===n.authenticated&&n.username===r.profile.username?function(){var e=document.createElement("body");e.onload=arguments[6],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createElement("main");t.setAttribute("class","w-100 flex flex-column flex-grow-1 items-center mb5");var n=document.createElement("section");n.setAttribute("class","w-100 h-100 mw7 pa2 pb5");var r=document.createElement("a");r.setAttribute("href","/users/"+arguments[0]),r.setAttribute("class","bn black f6"),Zr(r,["Back to user page"]);var o=document.createElement("h1");Zr(o,["Settings"]);var i=document.createElement("h2");Zr(i,[arguments[1]]);var a=document.createElement("form");a.onsubmit=arguments[5];var s=document.createElement("fieldset");s.setAttribute("class","w-100 flex flex-column bn");var c=document.createElement("legend");Zr(c,["Profile Image"]);var l=document.createElement("img");l.setAttribute("src","/assets/"+arguments[2]),l.setAttribute("class","w4"),Zr(s,["\n          ",c,"\n          ",l,"\n          ",arguments[3],"\n          "]);var u=document.createElement("fieldset");u.setAttribute("class","w-100 flex ba b--black dropshadow flex-column mt3");var f=document.createElement("legend");f.setAttribute("class","pl2 pr2"),Zr(f,["Bio"]);var d=document.createElement("input");d.setAttribute("name","bio"),d.setAttribute("type","text"),d.setAttribute("value",arguments[4]),d.setAttribute("class","w-100 h2 bg-near-white bn"),Zr(u,["\n          ",f,"\n          ",d,"\n          "]);var h=document.createElement("input");return h.setAttribute("type","submit"),h.setAttribute("value","save settings"),h.setAttribute("class","bg-navy bn dropshadow h3 pa2 pink mt3"),Zr(a,["\n          ",s,"\n\n          ",u,"\n          ",h,"\n        "]),Zr(n,["\n        ",r,"\n\n        ",o,"\n        ",i,"\n\n        ",a,"\n\n\n      "]),Zr(t,["\n      ",n,"\n      "]),Zr(e,["\n      ",arguments[7],"\n      ",t,"\n      ",arguments[8],"\n      ",arguments[9],"\n      ",arguments[10],"\n    "]),e}(r.profile.username,r.profile.username,r.profile.emojis[r.profile.selectedEmoji],function(e,t){var n=e.selectedUser.profile;return function(){var e=document.createElement("select");return e.setAttribute("name","selectedEmoji"),e.onchange=arguments[0],e.setAttribute("class","w4"),Zr(e,["\n      ",arguments[1],"\n    "]),e}(function(r){console.log(r.target.value);var o={selectedEmoji:parseInt(r.target.value)};console.log(o),e.api.users.patch(n._id,o).then(function(n){console.log(n),e.selectedUser.profile=n,t("render")}).catch(function(e){alert(e)})},n.emojis.map(function(e,t){var r=e.split("-")[0].toLowerCase();return t==n.selectedEmoji?function(){var e=document.createElement("option");return e.setAttribute("value",arguments[0]),e.setAttribute("selected","selected"),Zr(e,[arguments[1]]),e}(t,r):function(){var e=document.createElement("option");return e.setAttribute("value",arguments[0]),Zr(e,[arguments[1]]),e}(t,r)}))}(e,t),r.profile.bio,function(r){r.preventDefault();var o=new FormData(r.currentTarget),i={bio:o.get("bio"),selectedEmoji:parseInt(o.get("selectedEmoji"))};e.api.users.patch(n.id,i).then(function(n){alert("profile saved!"),e.selectedUser.profile=n,t("render")}).catch(function(e){alert(e)})},function(){return t("fetch-user",e.params.username)},e.cache(Ms,"NavbarTop",e,t).render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render()):function(){var e=document.createElement("body");e.onload=arguments[0],e.setAttribute("class","w-100 h-auto code lh-copy flex flex-column");var t=document.createElement("main");t.setAttribute("class","w-100 flex flex-column flex-grow-1 items-center mb5");var n=document.createElement("section");n.setAttribute("class","w-100 h-100 mw7 pa2 pb5");var r=document.createElement("h1");Zr(r,["Hello there. You're not logged in."]);var o=document.createElement("p"),i=document.createElement("a");return i.setAttribute("href","/login"),i.setAttribute("class","link black underline f3"),Zr(i,["login"]),Zr(o,["\u2192 ",i]),Zr(n,["\n        ",r,"\n        ",o,"\n      "]),Zr(t,["\n      ",n,"\n      "]),Zr(e,["\n      ",arguments[1],"\n      ",t,"\n      ",arguments[2],"\n      ",arguments[3],"\n      ",arguments[4],"\n    "]),e}(function(){return t("fetch-user",e.params.username)},e.cache(Ms,"NavbarTop",e,t).render(),Fs(),e.cache(Ss,"AddFeatureBtn",e,t).render(),e.cache(js,"AddFeatureModal",e,t).render())}),dc.route("/*",function(e,t){return e.title!==ss&&t(e.events.DOMTITLECHANGE,ss),function(){var e=document.createElement("body");e.setAttribute("class","sans-serif pa3");var t=document.createElement("h1");Zr(t,["Route not found."]);var n=document.createElement("a");return n.setAttribute("href","/"),n.setAttribute("class","pt2"),Zr(n,["Back to main."]),Zr(e,["\n      ",t,"\n      ",n,"\n    "]),e}()}),"undefined"!=typeof window&&(document.body.appendChild(dc.start()),dc.mount("body")),dc.use(function(e,t){t.on("navigate",function(){switch(console.log("Navigated to "+e.route),e.route){case"/":t.emit("fetch-home",{});break;case"browse":t.emit("fetch-lists",{});break;case"/links":t.emit("fetch-links",{});break;case"/lists":t.emit("fetch-lists",{});break;case"lists/:id":e.params.hasOwnProperty("id")&&t.emit("fetch-list",e.params.id);break;case"users":t.emit("fetch-users",{});break;case"users/:username":case"settings/:username":e.params.hasOwnProperty("username")&&t.emit("fetch-user",e.params.username)}})})}();
//# sourceMappingURL=bundle.js.map